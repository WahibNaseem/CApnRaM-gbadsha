
@{
    ViewBag.Title = "Finder Fee Report";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="custom-form portlet light form-horizontal">
    <div class="headerbox">
        <div class="row">
            <div class="col-md-12 text-center">
                Finder Fee Balance as of Month Year Reports
            </div>
        </div>
    </div>
    <div class="portlet-body form">
        <div class="form-body">
            <div class="form-group">
                <div class="row">
                    <div class="col-md-12" style="padding-top: 6px;">
                        <div class="col-md-6">
                            <div class="col-md-4 control-label">
                                <label>Franchisee Name/No :</label>
                            </div>
                            <div class="col-md-7">
                                <div class="ui-widget">
                                    <div class="input-icon right input-sm">
                                        <i class="icon-magnifier" style="margin-top: 1px; margin-right: 28px;"></i>
                                        <input id="input_Search" type="text" required name="customernumber" autocomplete="off" placeholder="Search Franhchisee Name/Number" value="" class="form-control input-sm typeahead" style="margin-top: -5px;margin-left: -22px;" />
                                    </div>
                                    <div id="container">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-1"></div>
                        </div>
                        <div class="col-md-6">
                            <div class="col-md-3"></div>
                            <div class="col-md-3">
                                <select class="form-control input-sm" id="ddlmonths">
                                    <option>Month</option>
                                    <option>January</option>
                                    <option>February</option>
                                    <option>March</option>
                                    <option>April</option>
                                    <option>May</option>
                                    <option>June</option>
                                    <option>July</option>
                                    <option>August</option>
                                    <option>September</option>
                                    <option>October</option>
                                    <option>November</option>
                                    <option>December</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <select class="form-control input-sm" id="ddlyear">
                                    <option>Year</option>
                                    <option>2018</option>
                                    <option>2017</option>
                                    <option>2016</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <input type="button" class="btn btn-primary" id="btnGenerate" value="Generate Report" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="GeneratedData">
                <hr style="margin-top: 1px;margin-bottom: 8px;" />
                <div class="row">
                    <div class="col-md-12">
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered table-hover order-column" id="tblReport1099">
                                <thead>
                                    <tr>
                                        <th style="text-align:center;">
                                            Franchisee No.
                                        </th>
                                        <th style="width:320px;text-align:center;">
                                            Franchisee Name
                                        </th>
                                        <th style="text-align:center;">
                                            Total Payment
                                        </th>
                                        <th style="text-align:center;">
                                            Total Due
                                        </th>
                                        <th style="text-align:center;">
                                            Total Paid
                                        </th>
                                        <th style="text-align:center;">
                                            Total Balance
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="text-align:center;"><a href="javascript:void(0);" onclick="btnOpenDeatil(701241)">701241</a></td>
                                        <td style="text-align:center;">VINNY PHAM NGUYEN, INC</td>
                                        <td style="text-align:right;">$5,200.00</td>
                                        <td style="text-align:right;">$0.00</td>
                                        <td style="text-align:right;">$6,000.00</td>
                                        <td style="text-align:right;">$800.00</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade custom-model custom-form-design" id="modal_FeeReport" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-full">
        <div class="modal-content" style="border-radius: 8px;">
            <div class="modal-header headerbox list" style="padding:0px!important;border-bottom: none;">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true" style="margin-top: 12px !important;margin-right: 12px !important;"></button>
                <h4 class="modal-title text-center" style="margin-top: 0px; margin-bottom: 4px;  padding: 7px!important;font-size: 12px;font-weight: bold;background: #3598DC !important;color: #FFF !important;border: 1px solid #3598DC !important;padding: 0px;border-radius: 8px 8px 0 0;text-transform: uppercase;">
                    Finder Fee Banlance as of <label id="lblmonth"></label> <label id="lblyear"></label> Reports
                </h4>
            </div>
            <div class="modal-body" style="padding: 0px 30px 15px 30px;">
                <div class="form-group">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="table-responsive">
                                <table class="table table-striped table-bordered order-column" id="tblDetail">
                                    <thead>
                                        <tr>
                                            <th colspan="2" style="width:100px;text-align:center;font-size: 12px;">
                                                Franchisee No.
                                            </th>
                                            <th colspan="5" style="width:130px;text-align:center;font-size: 12px;">
                                                Franchisee Name
                                            </th>
                                            <th style="width:50px;text-align:center;font-size: 12px;">
                                                Total Payment
                                            </th>
                                            <th style="text-align:center;width:100px;font-size: 12px;">
                                                Total Due
                                            </th>
                                            <th style="text-align:center;width:100px;font-size: 12px;">
                                                Total Paid
                                            </th>
                                            <th style="text-align:center;font-size: 12px;">
                                                Balance
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="2" style="text-align:center;">701241</td>
                                            <td colspan="5" style="text-align:center;">VINNY PHAM NGUYEN, INC</td>
                                            <td style="text-align:center;">$5,200.00</td>
                                            <td style="text-align:center;">$0.00</td>
                                            <td style="text-align:center;">$6,000.00</td>
                                            <td style="text-align:center;">$0.00</td>
                                        </tr>
                                        <tr>
                                            <td style="text-align:center;background: #dcdcdc;">
                                                Customer No
                                            </td>
                                            <td style="text-align:center;width:150px;background: #dcdcdc;">
                                                Customer Name
                                            </td>
                                            <td style="text-align:center;width:50px;background: #dcdcdc;">
                                                FF Type
                                            </td>
                                            <td style="text-align:center;background: #dcdcdc;">
                                                Contract Billing
                                            </td>
                                            <td style="text-align:center;background: #dcdcdc;">
                                                FF Started
                                            </td>
                                            <td style="text-align:center;background: #dcdcdc;">
                                                Payment #
                                            </td>
                                            <td style="text-align:center;background: #dcdcdc;">
                                                No of Payments
                                            </td>
                                            <td style="text-align:center;background: #dcdcdc;">
                                                Current Payment
                                            </td>
                                            <td style="text-align:center;background: #dcdcdc;">
                                                Amount Due
                                            </td>
                                            <td style="text-align:center;background: #dcdcdc;">
                                                Amount Paid
                                            </td>
                                            <td style="text-align:center;background: #dcdcdc;">
                                                Balance
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width:50px;text-align:center;">
                                                701574
                                            </td>
                                            <td style="text-align:center;width:50px;">
                                                HIEU NGUYEN
                                            </td>
                                            <td style="text-align:center;width:50px;"></td>
                                            <td style="text-align:center;width:80px;">
                                                10/10/2017
                                            </td>
                                            <td style="text-align:center;width:80px;">
                                                10/10/2017
                                            </td>
                                            <td style="text-align:center;width:80px;">
                                                123
                                            </td>
                                            <td style="text-align:center;width:80px;">
                                                2
                                            </td>
                                            <td style="text-align:center;width:80px;">
                                                $5,050.00
                                            </td>
                                            <td style="text-align:center;width:80px;">
                                                $0.00
                                            </td>
                                            <td style="text-align:center;width:80px;">
                                                $5,500.00
                                            </td>
                                            <td style="text-align:center;width:80px;">
                                                $0.00
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width:50px;text-align:center;">
                                                701580
                                            </td>
                                            <td style="text-align:center;width:50px;">
                                                BABE
                                            </td>
                                            <td style="text-align:center;width:50px;"></td>
                                            <td style="text-align:center;width:80px;">
                                                10/10/2017
                                            </td>
                                            <td style="text-align:center;width:80px;">
                                                10/10/2017
                                            </td>
                                            <td style="text-align:center;width:80px;">
                                                123
                                            </td>
                                            <td style="text-align:center;width:80px;">
                                                1
                                            </td>
                                            <td style="text-align:center;width:80px;">
                                                $150.00
                                            </td>
                                            <td style="text-align:center;width:80px;">
                                                $0.00
                                            </td>
                                            <td style="text-align:center;width:80px;">
                                                $600.00
                                            </td>
                                            <td style="text-align:center;width:80px;">
                                                $0.00
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>
</div>
@section pageplugins{
    @if (Request.IsSecureConnection)
    {
        <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js" type="text/javascript"></script>
    }
    else
    {
        <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js" type="text/javascript"></script>
    }
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/select2/js/select2.full.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/jquery-validation/js/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/jquery-validation/js/additional-methods.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/bootstrap-wizard/jquery.bootstrap.wizard.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/jquery-inputmask/jquery.inputmask.bundle.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/scripts/datatable.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/datatables/datatables.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/scripts/app.min.js")" type="text/javascript" )"></script>
    <script src="@Url.Content("~/Content/admin/assets/pages/scripts/table-datatables-managed.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/bootstrap-typeahead/bootstrap3-typeahead.min.js")" type="text/javascript"></script>
}
@section scripts{
    <script>
        jQuery(document).ready(function () {
            $("#GeneratedData").hide();

            var table = $('#tblReport1099');
            table.DataTable({
                "pageLength": 10, // default records per page
                "dom": "<'headerboxcustom list'<'row'<'col-md-1'l><'col-md-4'f><'#divrightddl.col-md-5 pull-right text-center'>>><'table-responsive't><'bottom'ip><'clear'>",
                "bInfo": false,
                "bStateSave": false,
                "fnStateSaveParams": function (oSettings, sValue) {
                    $("#tblReport1099 tr.filter .form-control").each(function () {
                        sValue[$(this).attr('name')] = $(this).val();
                    });

                    return sValue;
                },

            });
            applyAutoSeacrh();
        });
        function applyAutoSeacrh() {
            $.ajax({
                type: "GET",
                url: '@Url.Action("GetAllFranchisees", "Franchise", new { area = "Portal" })',
                data: {},
                success: function (data) {
                    var typeaheadSource = [];
                    $.each(data, function (key, value) {
                        typeaheadSource.push({ id: value.FranchiseeId, name: value.FranchiseeNo + ' ' + value.Name })
                    });

                    $('#input_Search').typeahead({
                        source: typeaheadSource,
                        updater: function (item) {
                            return item;
                        }
                    }).focus();
                }
            });
        }
        $("#btnGenerate").click(function () {
            $("#GeneratedData").show();
        });

        function btnOpenDeatil(id) {
            $("#modal_FeeReport").modal('show');
        }

        $('#ddlmonths').change(function () {
            $('#lblmonth').html(this.value).wrapInner("<strong />");
        });
        $('#ddlyear').change(function () {
            $('#lblyear').html(this.value).wrapInner("<strong />");
        });
    </script>
}
