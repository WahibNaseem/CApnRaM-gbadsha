@{
    ViewBag.Title = "Deposits";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .cls-center {
        text-align: center;
    }

    .cls-left {
        text-align: left;
    }

    .cls-right {
        text-align: right;
    }
</style>

<form class="form-horizontal" action="@Url.Action("InsertDeposit", "Company", new { area = "Portal" })" id="from_lockboxsummary" method="POST">
    <div class="modal-content" style="border-radius: 8px;">
        <div class="modal-header headerbox list" style="padding:0px!important;border-bottom: none;">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true" style="margin-top: 12px !important;margin-right: 12px !important;"></button>
            <h4 class="modal-title" style="text-align:center;margin-top: 0px; margin-bottom: 0px;  padding: 7px!important;font-size: 12px;font-weight: bold;background: #337ab7 !important;color: #FFF !important;border: 1px solid #337ab7 !important;padding: 0px;border-radius: 8px 8px 0 0;text-transform: uppercase;">
                Other Deposits
            </h4>
        </div>
        <div class="modal-header headerbox list" style="padding:0px!important;border-bottom: none;background: #3598DC !important;color: #FFF !important;border: 1px solid #3598DC !important;padding: 0px;">
            <div class="row">
                <div class="col-md-12">
                    <div class="col-md-2">
                        <label class="mt-radio">
                            <input type="radio" onclick="searchOnChangeOD(13)" name="OptType" id="OptOthersPayaee" value="13" checked="checked">Others Payee
                            <span></span>
                        </label>
                    </div>
                    <div class="col-md-2">
                        <label class="mt-radio">
                            <input type="radio" onclick="searchOnChangeOD(2)" name="OptType" id="OptFranchisee" value="2"> Franchisee
                            <span></span>
                        </label>
                    </div>
                    <div class="col-md-2">
                        <label class="mt-radio">
                            <input type="radio" onclick="searchOnChangeOD(1)" name="OptType" id="OptCustomer" value="1">Customer
                            <span></span>
                        </label>
                    </div>
                    <div class="col-md-6">
                        <input class="form-control input-sm" id="OD_inputSerach" name="" type="text" value="" placeholder="Name or Number">
                    </div>
                </div>
            </div>
        </div>
        <div class="custom-form portlet light" id="">
            <div class="portlet-body">
                
                    <div class="row" style="padding-bottom:15px;">
                        <div class="col-md-12">
                            <label class="control-label col-md-2" style="font-weight:600;">
                                Payee Name:<span style="color:red">*</span>
                            </label>
                            <div class="col-md-4">
                                <input class="form-control input-sm" id="OD_txtPayeeName" name="OD_txtPayeeName" type="text" value="">
                                <input type="hidden" name="OD_txtPayeeId" id="OD_txtPayeeId" value="" />
                                <input type="hidden" name="OD_txtPayeeType" id="OD_txtPayeeType" value="" />
                            </div>

                            <label class="control-label col-md-2" style="font-weight:600;">
                                Payee Number:
                            </label>
                            <div class="col-md-4">
                                <input class="form-control input-sm" id="OD_txtPayeeNumber" name="OD_txtPayeeNumber" type="text" value="">
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <hr style="margin-top:10px;margin-bottom: 10px;" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <label class="control-label col-md-3" style="font-weight:600;">
                                Check/Reference No:<span style="color:red">*</span>
                            </label>
                            <div class="col-md-2">
                                <input class="form-control input-sm" id="OD_txtReferenceNo" name="OD_txtReferenceNo" type="text" value="">
                            </div>

                            <label class="control-label col-md-1" style="font-weight:600;">
                                Amount:<span style="color:red">*</span>
                            </label>
                            <div class="col-md-2">
                                <input class="form-control input-sm" id="OD_txtAmount" name="OD_txtAmount" type="text" value="">
                            </div>

                            <label class="control-label col-md-1" style="font-weight:600;">
                                Date:<span style="color:red">*</span>
                            </label>
                            <div class="col-md-2">
                                <div class="input-group" data-date-format="mm/dd/yyyy">
                                    <input id="OD_txtDate" name="OD_txtDate" class="form-control input-sm date-picker" autocomplete="off" />
                                    <span class="input-group-btn cal-btn">
                                        <button class="btn default cal-btn" type="button">
                                            <i class="fa fa-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="padding-bottom:20px;">
                        <div class="col-md-12">
                            <label class="control-label col-md-3" style="font-weight:600;">
                                Deposit/Payment Type:<span style="color:red">*</span>
                            </label>
                            <div class="col-md-2">
                                @Html.DropDownList("OD_ServiceTypeListIdTrans", (SelectList)ViewBag.ServiceTypeList, "Select", new { @class = "form-control input-sm", required = "required", @id = "OD_ServiceTypeListIdTrans" })
                            </div>
                            <label class="control-label col-md-1" style="font-weight:600;">
                                Reason:<span style="color:red">*</span>
                            </label>
                            <div class="col-md-6">
                                <input class="form-control input-sm" id="OD_txtReason" name="OD_txtReason" type="text" value="">
                            </div>
                        </div>
                    </div>

                    <div class="form-actions" style="padding:15px !important;padding-top:25px !important;text-align:center;">
                        <button type="button" class="btn btn-primary" id="OD_btnSave" style="margin-right: 22px;">
                            Save
                            <i class="fa fa-check"></i>
                        </button>
                        <button type="button" class="btn btn-primary button-next" id="OD_btnCancel" data-dismiss="modal" style="margin-right: 30px;">
                            Cancel
                            <i class="fa fa-angle-right"></i>
                        </button>
                    </div>
               

            </div>
        </div>

    </div>
</form>
@section scripts{
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/bootstrap-typeahead/bootstrap3-typeahead.min.js")" type="text/javascript"></script>
    <script src="~/Scripts/jquery-ui.js" type="text/javascript"></script>

    <script type="text/javascript">

        $(document).ready(function () {
            applyAutoSeacrhComapnyOD(13);

            applyMaskCurrency('#OD_txtAmount');
            $(".date-picker").datepicker();


            $('#OD_btnSave').click(function () {
                if (!searchIsValidOD()) {
                    swal('Please enter required values.')
                    return;
                }
                $('#from_lockboxsummary').submit();

                //$('#OD_txtPayeeType').val(t);
                //var vInvoiceDate = "";
                //var vInvoiceAmount = 0.00;
                //var vInvoiceOAmount = 0.00;
                //var vApplyAmount = ($('#OD_txtAmount').val() != "" ? parseFloat($('#OD_txtAmount').val(), 10) : 0.00);
                //var vBalanceAmount = 0.00;

                //AppendLockboxItem(0, _lockboxediDetail.RowNo, _lockboxediDetail.CheckNumber, _lockboxediDetail.LockboxEDIDetailId,
                //    $('#OD_txtPayeeId').val(), $('#OD_txtPayeeNumber').val(), $('#OD_txtPayeeName').val(), -1, '', '', 0, 0, $('#OD_txtAmount').val(), 0, false, true, 49,
                //    _lockboxediDetail.DollarAmount, 0, true,
                //    true, $('#OD_txtReason').val(), $('#OD_txtPayeeType').val(), $('#OD_ServiceTypeListIdTrans').val(), $('#OD_txtPayeeId').val(), $('#OD_txtPayeeName').val(), $('#OD_txtPayeeNumber').val());

                //$('#txtVTotalAmountoApply').val((parseFloat($('#txtVTotalAmountoApply').val().toString().replace(',', ''), 10) + vApplyAmount).toFixed(2).toString());
                //$('#txtVTotalAmountExecption').val((parseFloat($('#txtVTotalAmountExecption').val().toString().replace(',', ''), 10) - vApplyAmount).toFixed(2).toString());
                //$('#txtVTotalAmountCustomerCredit').val((parseFloat($('#txtVTotalAmountCustomerCredit').val().toString().replace(',', ''), 10) + 0).toFixed(2).toString());
                //$('tr[rel = "umcr_' + _lockboxediDetail.CheckNumber + '"]').remove();

                //$("#modal_OtherDepositePopupDetail").modal('hide');

                //var count = $('#lockboxsummaryListUnmatched tbody').children('tr').length;
                //if (count == 0)
                //    $('#btnProcessPayment_OnSubmit').prop('disabled', false);
            });
        });

        function searchIsValidOD() {
            var retVal = true;
            if ($('#OD_txtReferenceNo').val() == '')
                retVal = false;
            if ($('#OD_txtAmount').val() == '')
                retVal = false;
            if ($('#OD_txtDate').val() == '0' || $('#OD_txtDate').val()=='')
                retVal = false;
            if ($('#OD_txtReason').val() == '')
                retVal = false;
            return retVal;
        }

        function searchOnChangeOD(v) {
            if (v == 13) {
                applyAutoSeacrhComapnyOD(v);
            } else if (v == 2) {
                applyAutoSeacrhFranchiseeOD(v);
            } else if (v == 1) {
                applyAutoSeacrhCustomerOD(v);
            }
        }

        function applyAutoSeacrhCustomerOD(t) {
            $.blockUI()
            $('#OD_inputSerach').val('');
            $('#OD_txtPayeeType').val(t);
            $.ajax({
                type: "GET",
                url: '@Url.Action("GetAllCustomer", "Customer", new { area = "Portal" })',
                data: {},
                success: function (data) {
                    var typeaheadSource = [];
                    $.each(data, function (key, value) {
                        typeaheadSource.push({ id: value.CustomerId, name: value.CustomerNo + ' ' + $.trim(value.Name), number: value.CustomerNo, title: $.trim(value.Name)})
                    });
                    var box = $('#OD_inputSerach').data('typeahead');
                    if (box != null) {

                        console.log('csearch source change');
                        box.source = typeaheadSource;
                    }
                    else {
                        console.log('csearch initiated');
                        $('#OD_inputSerach').typeahead({
                            source: typeaheadSource,
                            updater: function (item) {
                                console.log(item);
                                $('#OD_txtPayeeId').val(item.id);
                                $('#OD_txtPayeeName').val(item.title);
                                $('#OD_txtPayeeNumber').val(item.number);

                                return item;
                            },
                            minLength: 1
                        }).focus();
                    }
                }
            });
            $.unblockUI();
        }

        function applyAutoSeacrhFranchiseeOD(t) {
            $('#OD_inputSerach').val('');
            $('#OD_txtPayeeType').val(t);
            $.blockUI()
            $.ajax({
                type: "GET",
                url: '@Url.Action("GetAllFranchisees", "Franchise", new { area = "Portal" })',
                data: {},
                success: function (data) {
                    var typeaheadSource = [];
                    $.each(data, function (key, value) {
                        typeaheadSource.push({ id: value.FranchiseeId, name: value.FranchiseeNo + ' ' + value.Name, number: value.FranchiseeNo, title: $.trim(value.Name) })
                    });
                    var box = $('#OD_inputSerach').data('typeahead');
                    if (box != null) {

                        console.log('csearch source change');
                        box.source = typeaheadSource;
                    }
                    else {
                        $('#OD_inputSerach').typeahead({
                            source: typeaheadSource,
                            updater: function (item) {
                                console.log(item);
                                $('#OD_txtPayeeId').val(item.id);
                                $('#OD_txtPayeeName').val(item.title);
                                $('#OD_txtPayeeNumber').val(item.number);

                                return item;
                            }, minLength: 1
                        }).focus();
                    }
                }
            });
            $.unblockUI();
        }

        function applyAutoSeacrhComapnyOD(t) {
            $('#OD_inputSerach').val('');
            $('#OD_txtPayeeType').val(t);
            $.blockUI()
            $.ajax({
                type: "GET",
                url: '@Url.Action("GetAllCompanies", "Company", new { area = "Portal" })',
                data: {},
                success: function (data) {
                    var typeaheadSource = [];
                    $.each(data, function (key, value) {
                        typeaheadSource.push({ id: value.CompanyId, name: value.Name, number: '', title: $.trim(value.Name) })
                    });
                    var box = $('#OD_inputSerach').data('typeahead');
                    if (box != null) {

                        console.log('csearch source change');
                        box.source = typeaheadSource;
                    }
                    else {
                        $('#OD_inputSerach').typeahead({
                            source: typeaheadSource,
                            updater: function (item) {
                                console.log(item);
                                $('#OD_txtPayeeId').val(item.id);
                                $('#OD_txtPayeeName').val(item.title);
                                $('#OD_txtPayeeNumber').val(item.number);
                                return item;
                            }, minLength: 1
                        }).focus();
                    }
                }
            });
            $.unblockUI();
        }

        function applyMaskCurrency(id) {
            $(id).inputmask("currency", {
                alias: 'currency',
                prefix: '$ ',
                digits: 2,
                autoUnmask: true,
                removeMaskOnSubmit: true,
                unmaskAsNumber: true,
                allowPlus: false,
                allowMinus: true,
                autoGroup: true,
                groupSeparator: ",",
            });
        }
    </script>
}


@*<style>
        .no-padding {
            padding: 0;
        }
    </style>
    <div class="custom-form portlet light form form-horizontal" style="max-width:980px;margin: 0px auto;padding:0;min-height: 100px;">
        <div class="headerbox">
            <div class="row">
                <div class="col-md-12 text-center">
                    Deposits
                </div>
            </div>
        </div>
        <div class="portlet-body form">
            <div class="form-body">

                <form class="form-horizontal" role="form" id="form_deposit" action="@Url.Action("InsertDeposit","Company","Portal")" method="post">
                    <div class="form-group" style="border: 1px solid #d8cdcd;padding: 8px;">
                        <div class="row">
                            <div class="col-md-2 control-label">
                                Bank Account:
                            </div>
                            <div class="col-md-6">
                                @Html.DropDownList("BankList", (SelectList)ViewBag.BankList, new { @class = "form-control input-sm", @id = "BankTypeList" })
                            </div>

                        </div>
                    </div>
                    <div class="form-group" style="border: 1px solid #d8cdcd;">
                        <div class="row no-padding" style="background:#3598dc;margin-left:0px;margin-right:0px;padding-top: 2px;padding-bottom: 5px;">
                            <div class="col-md-4">
                                <div class="input-icon">
                                    <i class="icon-magnifier icon-align-right" style="margin-top: 8px;"></i>
                                    @Html.Hidden("classId")
                                    @Html.Hidden("typeListId")
                                    @Html.Hidden("regionId")
                                    <input id="txtName" type="text" required name="customernumber" autocomplete="off" placeholder="Search Customer/Franchisee Name" value="" class="form-control input-sm typeahead" />
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-2 control-label">
                                    Reference No:
                                </div>
                                <div class="col-md-3">
                                    <input type="text" class="form-control input-sm" id="txtReferenceNo" name="txtReferenceNo" />
                                </div>
                                <div class="col-md-1 control-label">
                                    Amount:
                                </div>
                                <div class="col-md-2">
                                    <input type="text" class="form-control input-sm" id="txtAmount" name="txtAmount" />
                                </div>
                                <div class="col-md-1 control-label">
                                    Date:
                                </div>
                                <div class="col-md-2">
                                    <div class="input-group date" data-date-format="mm/dd/yyyy">
                                        <input type="text" class="form-control input-sm date-picker" name="dtDepositDate" id="dtDepositDate" />
                                        <span class="input-group-btn cal-btn">
                                            <button class="btn default cal-btn" type="button">
                                                <i class="fa fa-calendar"></i>
                                            </button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-2 control-label">
                                    Type:
                                </div>
                                <div class="col-md-3">
                                    @Html.DropDownList("DepositTypeList", (SelectList)ViewBag.DepositTypeList, new { @class = "form-control input-sm", @id = "DepositTypeList" })
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-2 control-label">
                                    Description:
                                </div>
                                <div class="col-md-9">
                                    <input type="text" class="form-control input-sm" id="txtDescription" name="txtDescription" />
                                </div>
                            </div>
                        </div>
                        <div class="form-group" style="padding: 10px;">
                            <div class="row">
                                <div class="col-md-4"></div>
                                <div class="col-md-2">
                                    <input type="submit" class="col-md-12 btn btn-primary submit-button" id="btnSave" name="btnSave" value="Save" />
                                </div>
                                <div class="col-md-2">
                                    <div class="col-md-12 btn btn-primary">Cancel</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

                <div class="form-group">
                    <div class="form-group">
                        <div class="row no-padding" style="background:#3598dc;margin-left:-10px;margin-right:-10px;padding-top: 2px;padding-bottom: 5px;">
                            <div class="col-md-4">
                                <div class="input-icon">
                                    <i class="icon-magnifier icon-align-right" style="margin-top: 8px;"></i>
                                    <input id="csearch-box" type="text" required name="customernumber" autocomplete="off" placeholder="Search" value="" class="form-control input-sm typeahead" />
                                </div>
                            </div>
                            <div class="col-md-6 pull-right no-padding">
                                <div class="col-md-10 pull-right no-padding" style="text-align:center;">
                                    <div class="col-md-5 no-padding" style="margin-left: 30px;">
                                        <select id="select_timeduration" class="form-control input-sm">
                                            <option value="1">This Week</option>
                                            <option value="2">This Week-to-date</option>
                                            <option value="3">This Month</option>
                                            <option value="4">This Month-to-date</option>
                                            <option value="5">This Quarter</option>
                                            <option value="6">This Quarter-to-date</option>
                                            <option value="7" selected="selected">This Fiscal Year</option>
                                            <option value="8">This Fiscal Year-to-date</option>
                                            <option value="9">Today</option>
                                            <option value="10">Yesterday</option>
                                            <option value="11">Last Week</option>
                                            <option value="12">Last Month</option>
                                            <option value="13">Last Quarter</option>
                                            <option value="14">Last Year</option>
                                            <option value="15">Custom Date</option>
                                        </select>
                                    </div>
                                    <div class="col-md-5 divspandate no-padding" style="margin-top: 7px; margin-left: 0px; display: block;">
                                        <span id="spnStartDate" style="color: white;"></span> - <span id="spnEndtDate" style="color: white;"></span>
                                    </div>
                                    <div class="col-md-3 pnd5" style="padding-top: 7px;display:none;" id="divSD">
                                        <input type="text" name="txtStartDate" id="txtStartDate" value="" class="form-control input-sm date-picker" style="padding: 3px;" />
                                    </div>
                                    <div class="col-md-3 pnd5" style="padding-top: 7px;display:none;" id="divED">
                                        <input type="text" name="txtEndtDate" id="txtEndtDate" value="" class="form-control input-sm date-picker" style="padding: 3px;" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row" style="padding-left:4px;padding-right:4px;">
                            <div class="table-responsive">
                                <table class="table table-striped table-bordered table-hover order-column" id="TableCheckList">
                                    <thead>
                                        <tr style="background: #acadb5;color: white;">
                                            <th class="tblDL_referenceNo" style="text-align:center;width:100px">Reference No</th>
                                            <th class="tblDL_date" style="text-align:center;width:100px">Deposit Date</th>
                                            <th class="tblDL_depositType" style="text-align:center;">Type</th>
                                            <th class="tblDL_description" style="text-align:center;">Description</th>
                                            <th class="tblDL_amount" style="text-align:center;width:100px">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @section scripts{
        <script src="@Url.Content("~/Content/admin/assets/pages/scripts/components-date-time-pickers.min.js")" type="text/javascript"></script>

        <script type="text/javascript">

            var checkList;

            function getTableURL() {

                var _fromDateVal = $('#spnStartDate').text();
                var _toDateVal = $('#spnEndtDate').text();

                var sURL = '@Url.Action("DepositList", "Company", new { area = "Portal" })?from=' + _fromDateVal + '&to=' + _toDateVal;

                return sURL;
            }

            function refreshTable(sURL) {

                $.blockUI();

                $.ajax({
                    type: "GET",
                    url: sURL,
                    contentType: "application/json; charset=utf-8",
                    datatype: "json",
                    success: function (data) {
                        checkList.clear();
                        checkList.rows.add(data.aaData).draw();
                        $.unblockUI();
                    },
                    error: function () {
                        $.unblockUI();
                        alert("Content load failed.");
                    }
                });
            }

            jQuery(document).ready(function () {
                $("#dtSigned").datepicker("setDate", new Date());
                $("#lblamount").text("0.00");
                $("#dtDepositDate").datepicker("setDate", new Date());
                $("#txtAmount").inputmask("numeric", {
                    decimal: ".",
                    negative: false,
                    scale: 2,
                    groupSeparator: ",",
                    digits: 2,
                    autoGroup: true,
                    prefix: "$",
                    rightAlign: true,
                    autoUnmask: true,
                    removeMaskOnSubmit: true,
                });
                $("#txtName").autocomplete({
                    appendTo: $("#container"),
                    source: function (request, response) {
                        $.ajax({
                            url: "/Portal/Company/PayeeAutoComplete",
                            type: "POST",
                            dataType: "json",
                            data: { namePrefix: request.term, limit: 20 },
                            success: function (data) {
                                response($.map(data, function (item) {
                                    return { label: item.Name, value: item.Name, id: item.ClassId, typeId: item.TypeListId, regionId: item.RegionId };
                                }))
                            },
                            error: function (result) {

                            }
                        })
                    },
                    select: function (event, ui) {
                        var id = ui.item.id;
                        var typeId = ui.item.typeId;
                        var regionId = ui.item.regionId;
                        $("#classId").val(id);
                        $("#typeListId").val(typeId);
                        $("#regionId").val(regionId);
                    }
                });

                checkList = $('#TableCheckList').DataTable({
                    //"bProcessing": true,
                    "bServerSide": false,
                    "aLengthMenu": [[5, 10, 25, 50, -1], [5, 10, 25, 50, "All"]],
                    "pageLength": 25, // default records per page
                    "dom": '<"top">rt<"bottom"lp><"clear">'
                    //"dom": "<'row'<'col-md-8 col-sm-12'pli><'col-md-4 col-sm-12'<'table-group-actions pull-right'>>r><'table-responsive't><'row'<'col-md-8 col-sm-12'pli><'col-md-4 col-sm-12'>>", // datatable layout
                    ,
                    columnDefs: [
                        /*{
                            targets: "tblCL_chk",
                            data: "",
                            orderable: false,
                            className: "dt-center",
                            render: function (data, type, row, meta) {
                                return '<input rel="mgglchk" type="checkbox" style="margin-left: 5px;" id="fp' + row.APBillId + '_chk" name="fp' + row.APBillId + '_chk" relId="' + row.APBillId + '" class="payment-checkbox" />';
                            }
                        },*/
                        {
                            targets: "tblDL_referenceNo",
                            data: "ReferenceNumber",
                            render: function (data, type, row, meta) {
                                return data;
                            }
                        },
                        {
                            targets: "tblDL_date",
                            data: "TransactionDate",
                            render: function (data, type, row, meta) {
                                return moment(new Date(parseInt(data.substr(6)))).format("MM/DD/YYYY");
                            }
                        },
                        {
                            targets: "tblDL_depositType",
                            data: "DepositType",
                            render: function (data, type, row, meta) {
                                return data;
                            }
                        },
                        {
                            targets: "tblDL_description",
                            data: "Description",
                            render: function (data, type, row, meta) {
                                return data;
                            }
                        },
                        {
                            targets: "tblDL_amount",
                            data: "Amount",
                            className: "dt-right",
                            render: function (data, type, row, meta) {
                                return formatCurrency(parseFloat(data));
                            }
                        },
                    ]
                });

                //$('#txtStartDate').inputmask("mm/dd/yyyy", {});
                //$('#txtEndtDate').inputmask("mm/dd/yyyy", {});

                $('#txtStartDate').change(function () {
                    $('#spnStartDate').html($(this).val());
                });
                $('#txtEndtDate').change(function () {
                    $('#spnEndtDate').html($(this).val());
                });

                $('#select_timeduration').change(function () {
                    applyDurationFilter(parseInt($(this).val()));
                    refreshTable(getTableURL());
                });

                $("#csearch-box").keyup(function () {
                    var table = $("#TableCheckList").DataTable();
                    table.search($(this).val()).draw();
                });

                $("#btnSave").click(function () {

                    $.blockUI();
                    $("#form_deposit").submit();

                });
                applyDurationFilter(7);
                refreshTable(getTableURL());

            })

            function applyDurationFilter(v) {
                $('#spnStartDate').html('');
                $('#spnEndtDate').html('');
                $('.divspandate').show();
                $('#divSD').hide();
                $('#divED').hide();
                switch (v) {
                    case 1:
                        firstDay = moment().startOf('isoWeek').toString();
                        lastDay = moment().endOf('isoWeek').toString();
                        break;
                    case 2:
                        //code block
                        firstDay = moment().startOf('isoWeek').toString();
                        lastDay = new Date().toString();
                        break;
                    case 3:
                        firstDay = moment().subtract(0, 'month').startOf('month').toString();
                        lastDay = moment().subtract(0, 'month').endOf('month').toString();
                        break;
                    case 4:
                        //code block
                        firstDay = moment().subtract(0, 'month').startOf('month').toString();
                        lastDay = new Date().toString();
                        break;
                    case 5:
                        //code block
                        firstDay = moment().startOf('quarter').toString();
                        lastDay = moment().endOf('quarter').toString();
                        break;
                    case 6:
                        //code block
                        firstDay = moment().startOf('quarter').toString();
                        lastDay = new Date().toString();
                        break;
                    case 7:
                        //code block
                        firstDay = moment().startOf('year').toString();;
                        lastDay = moment().endOf('year').toString();
                        break;
                    case 8:
                        //code block
                        firstDay = moment().startOf('year').toString();
                        lastDay = new Date().toString();
                        break;
                    case 9:
                        //code block
                        firstDay = moment().toString();
                        lastDay = moment().toString();
                        break;
                    case 10:
                        //code block
                        firstDay = moment().add(-1, 'days').toString();
                        lastDay = moment().add(-1, 'days').toString();
                        break;
                    case 11:
                        //code block
                        firstDay = moment().subtract(1, 'week').startOf('week').toString();
                        lastDay = moment().subtract(1, 'week').endOf('week').toString();
                        break;
                    case 12:
                        //code block
                        firstDay = moment().subtract(1, 'month').startOf('month').toString();
                        lastDay = moment().subtract(1, 'month').endOf('month').toString();
                        break;
                    case 13:
                        //code block
                        firstDay = moment().subtract(1, 'quarter').startOf('quarter').toString();
                        lastDay = moment().subtract(1, 'quarter').endOf('quarter').toString();
                        break;
                    case 14:
                        //code block
                        firstDay = moment().subtract(1, 'year').startOf('year').toString();
                        lastDay = moment().subtract(1, 'year').endOf('year').toString();
                        break;
                    case 15:
                        //code block
                        $('#divspandate').hide();
                        $('#divSD').show();
                        $('#divED').show();
                        $('#txtStartDate').val('');
                        $('#txtEndtDate').val('')
                        break;
                    default:
                    //code block
                }
                $('#spnStartDate').html(moment(firstDay).format('L'));
                $('#spnEndtDate').html(moment(lastDay).format('L'));
            }

            function formatCurrency(total) {
                var neg = false;
                if (total < 0) {
                    neg = true;
                    total = Math.abs(total);
                }
                return (neg ? "-$" : '$') + parseFloat(total, 10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, "$1,").toString();
            }
        </script>
    }*@
