
@{
    ViewBag.Title = "FranchiseeTRXList";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


@section styles{
    <link href="~/Content/admin/assets/global/plugins/jquery-ui/jquery-ui.min.css" rel="stylesheet" />
    <style type="text/css">
        .lbl-p5 {
            padding: 5px;
        }

            .lbl-p5.red {
                color: red;
            }


            .lbl-p5.green {
                color: lightgreen;
            }

        input[type="text"].txtcolon:before {
            content: ": ";
        }

        .credit-field {
            width: 80px !important;
        }

        .alignRight {
            text-align: right;
        }

        .alignCenter {
            text-align: center;
        }

        .close {
            background-image: url(/Content/admin/assets/global/img/stick_close.png) !important;
            height: 12px !important;
            width: 12px !important;
            margin-top: 0px !important;
        }
    </style>

}
<div class="custom-form portlet light">
    <div class="portlet-body form">
        <div class="form-body">
            <div class="form-group">
                <div class="row" style="background-color: #4b85cc;color: #fff;padding-top:8px;padding-bottom:8px">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="col-md-8">
                                    <div class="input-icon">
                                        <i class="icon-magnifier icon-align-right" style="margin-top: 8px;"></i>
                                        <input type="text" placeholder="Search..." class="form-control input-sm search-field col-md-4" id="input_Search" />
                                    </div>
                                    <div id="container">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="col-md-2"></div>
                                <div class="col-md-4 pnd5">
                                    <select id="select_timeduration" class="form-control input-sm">
                                        <option value="1">This Week</option>
                                        <option value="2">This Week-to-date</option>
                                        <option value="3" selected="selected">This Month</option>
                                        <option value="4">This Month-to-date</option>
                                        <option value="5">This Quarter</option>
                                        <option value="6">This Quarter-to-date</option>
                                        <option value="7">This Fiscal Year</option>
                                        <option value="8">This Fiscal Year-to-date</option>
                                        <option value="9">Today</option>
                                        <option value="10">Yesterday</option>
                                        <option value="11">Last Week</option>
                                        <option value="12">Last Month</option>
                                        <option value="13">Last Quarter</option>
                                        <option value="14">Last Year</option>
                                        <option value="15">Custom Date</option>
                                    </select>
                                </div>
                                <div class="col-md-6 pnd5" style="padding-top: 5px;" id="divspandate">
                                    <span id="spnStartDate">08/01/2017</span>&nbsp; To &nbsp;<span id="spnEndtDate">08/31/2017</span>
                                </div>
                                <div class="col-md-3 pnd5" style="padding-top: 7px;display:none;" id="divSD">
                                    <input type="text" name="txtStartDate" id="txtStartDate" value="" class="form-control input-sm date-picker RemovePeriodvalidation" style="padding: 3px;" />
                                </div>
                                <div class="col-md-3 pnd5" style="padding-top: 7px;display:none;" id="divED">
                                    <input type="text" name="txtEndtDate" id="txtEndtDate" value="" class="form-control input-sm date-picker RemovePeriodvalidation" style="padding: 3px;" />
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
                <hr style="margin-top: 1px;margin-bottom: 8px;" />
                <div class="row">
                    <div class="col-md-12">
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered table-hover" id="tblFranchiseeTRXList">
                                <thead>
                                    <tr>
                                        <th style="width:59px;text-align:center;">
                                            Franchise No.
                                        </th>
                                        <th style="text-align:center;width:69px;">
                                            Franchise Name
                                        </th>
                                        <th style="text-align:center;width:113px;">
                                            Contract Billing
                                        </th>
                                        <th style="text-align:center;width:40px;">
                                            Deductions
                                        </th>
                                        <th style="text-align:center;width:110px;">
                                            Payment
                                        </th>
                                        <th style="text-align:center;width:30px;">
                                            Balance
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="text-align:center;">701011</td>
                                        <td style="width:200px;text-align:center;">KIMBURNS, LLC</td>
                                        <td style="text-align:right;">$128,942.99</td>
                                        <td style="text-align:right;">$59,528.99</td>
                                        <td style="text-align:right;">$0.00</td>
                                        <td style="text-align:right;">$80,063.21</td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:center;">701013</td>
                                        <td style="width:200px;text-align:center;">JIM DEVORE</td>
                                        <td style="text-align:right;">$8,545.49</td>
                                        <td style="text-align:right;">$3,410.36</td>
                                        <td style="text-align:right;">$0.00</td>
                                        <td style="text-align:right;">$5,135.13</td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:center;">701019</td>
                                        <td style="width:200px;text-align:center;">MYRAKLE, LLC</td>
                                        <td style="text-align:right;">$2,884.46</td>
                                        <td style="text-align:right;">$1,166.18</td>
                                        <td style="text-align:right;">$0.00</td>
                                        <td style="text-align:right;">$1,718.28</td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:center;">701048</td>
                                        <td style="width:200px;text-align:center;">JOSEPH T. SWARTZMEYER</td>
                                        <td style="text-align:right;">$4,445.24</td>
                                        <td style="text-align:right;">$2,303.18</td>
                                        <td style="text-align:right;">$0.00</td>
                                        <td style="text-align:right;">$2,142.06</td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <th colspan="2" style="background: lightblue;font-size: 12px;text-align:right;">TOTAL</th>
                                        <th style="background: lightblue;font-size: 12px;text-align:right;">$140,818.18</th>
                                        <th style="background: lightblue;font-size: 12px;text-align:right;">$66,408.71</th>
                                        <th style="background: lightblue;font-size: 12px;text-align:right;">$0.00</th>
                                        <th style="background: lightblue;font-size: 12px;text-align:right;">$89,058.68</th>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="form-horizontal" id="form_paymentlist"></div>


@section pageplugins{

    <script src="@Url.Content("~/Content/admin/assets/global/plugins/jquery-ui/jquery-ui.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/jquery-validation/js/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/jquery-inputmask/jquery.inputmask.bundle.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/scripts/datatable.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/datatables/datatables.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js")" type="text/javascript"></script>
    @*<script src="@Url.Content("~/Content/admin/assets/global/scripts/app.min.js")" type="text/javascript" )"></script>*@
    <script src="@Url.Content("~/Content/admin/assets/pages/scripts/table-datatables-managed.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/moment.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/bootstrap-typeahead/bootstrap3-typeahead.min.js")" type="text/javascript"></script>
}

@section scripts{
    <script>
        jQuery(document).ready(function () {
            $('#divspandate').show();
            $('#divSD').hide();
            $('#divED').hide();

            firstDay = moment().subtract(0, 'month').startOf('month').toString();
            lastDay = moment().subtract(0, 'month').endOf('month').toString();

            $('#spnStartDate').html(moment(firstDay).format('L'));
            $('#spnEndtDate').html(moment(lastDay).format('L'));
            //$('#txtStartDate').inputmask("mm/dd/yyyy", {});
            //$('#txtEndtDate').inputmask("mm/dd/yyyy", {});

            //setSearchTime(3);
            //var sURL = getTableURL();
            var dtable = $('#tblFranchiseeTRXList').dataTable({
                "bAutoWidth": false,
                cache: false,
                "order": false,
                "iDisplayLength": 25,
                "aLengthMenu": [[5, 7, 10, 25, 50, -1], [5, 7, 10, 25, 50, "All"]],
                "dom": '<"top">rt<"bottom"lp><"clear">',
                "aaSorting": [[0, "desc"]],

            });

            $("#input_Search").keyup(function () {
                var table = $("#tblFranchiseeTRXList").DataTable();
                table.search($(this).val()).draw();
            });
        })
        var date = new Date(), y = date.getFullYear(), m = date.getMonth();
        var firstDay;
        var lastDay;
        Date.prototype.getWeek = function (start) {
            //Calcing the starting point
            start = start || 0;
            var today = new Date(this.setHours(0, 0, 0, 0));
            var day = today.getDay() - start;
            var date = today.getDate() - day;

            // Grabbing Start/End Dates
            var StartDate = new Date(today.setDate(date));
            var EndDate = new Date(today.setDate(date + 6));
            return [StartDate, EndDate];
        }

        $('#txtStartDate').change(function () {
            $('#spnStartDate').html($(this).val());
        });
        $('#txtEndtDate').change(function () {
            $('#spnEndtDate').html($(this).val());
        });

        $('#select_timeduration').change(function () {
            //alert($(this).val());
            $('#spnStartDate').html('');
            $('#spnEndtDate').html('');
            $('#divspandate').show();
            $('#divSD').hide();
            $('#divED').hide();
            switch (parseInt($(this).val())) {
                case 1:
                    firstDay = moment().startOf('isoWeek').toString();
                    lastDay = moment().endOf('isoWeek').toString();
                    break;
                case 2:
                    //code block
                    firstDay = moment().startOf('isoWeek').toString();
                    lastDay = new Date().toString();
                    break;
                case 3:
                    firstDay = moment().subtract(0, 'month').startOf('month').toString();
                    lastDay = moment().subtract(0, 'month').endOf('month').toString();
                    break;
                case 4:
                    //code block
                    firstDay = moment().subtract(0, 'month').startOf('month').toString();
                    lastDay = new Date().toString();
                    break;
                case 5:
                    //code block
                    firstDay = moment().startOf('quarter').toString();
                    lastDay = moment().endOf('quarter').toString();
                    break;
                case 6:
                    //code block
                    firstDay = moment().startOf('quarter').toString();
                    lastDay = new Date().toString();
                    break;
                case 7:
                    //code block
                    firstDay = moment().startOf('year').toString();;
                    lastDay = moment().endOf('year').toString();
                    break;
                case 8:
                    //code block
                    firstDay = moment().startOf('year').toString();
                    lastDay = new Date().toString();
                    break;
                case 9:
                    //code block
                    firstDay = moment().toString();
                    lastDay = moment().toString();
                    break;
                case 10:
                    //code block
                    firstDay = moment().add(-1, 'days').toString();
                    lastDay = moment().add(-1, 'days').toString();
                    break;
                case 11:
                    //code block
                    firstDay = moment().subtract(1, 'week').startOf('week').toString();
                    lastDay = moment().subtract(1, 'week').endOf('week').toString();
                    break;
                case 12:
                    //code block
                    firstDay = moment().subtract(1, 'month').startOf('month').toString();
                    lastDay = moment().subtract(1, 'month').endOf('month').toString();
                    break;
                case 13:
                    //code block
                    firstDay = moment().subtract(1, 'quarter').startOf('quarter').toString();
                    lastDay = moment().subtract(1, 'quarter').endOf('quarter').toString();
                    break;
                case 14:
                    //code block
                    firstDay = moment().subtract(1, 'year').startOf('year').toString();
                    lastDay = moment().subtract(1, 'year').endOf('year').toString();
                    break;
                case 15:
                    //code block
                    $('#divspandate').hide();
                    $('#divSD').show();
                    $('#divED').show();
                    $('#txtStartDate').val('');
                    $('#txtEndtDate').val('')
                    break;
                default:
                //code block
            }
            $('#spnStartDate').html(moment(firstDay).format('L'));
            $('#spnEndtDate').html(moment(lastDay).format('L'));
            //alert(firstDay)
            //alert(lastDay)
            // _bindTrasaction($('#select_transactionstype').val(), moment(firstDay).format('L'), moment(lastDay).format('L'));
        });
    </script>
}