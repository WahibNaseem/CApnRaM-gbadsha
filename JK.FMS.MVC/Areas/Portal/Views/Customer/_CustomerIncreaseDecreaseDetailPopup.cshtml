@model JKViewModels.Customer.CommonCustomerIncreaseDecreaseDetailViewModel
<style type="text/css">
    .form-horizontal .control-label {
        text-align: right;
        margin-bottom: 0;
        padding-top: 3px;
    }

    .input-sm.pp {
        margin-top: 0;
        margin-bottom: 0;
        text-align: right;
        padding: 3px;
        border-radius: 0;
    }

    .has-error {
        border-color: red;
    }

    .close {
        background-image: url(/Content/admin/assets/global/img/stick_close.png) !important;
        height: 12px !important;
        width: 12px !important;
        margin-top: 0px !important;
    }

    .btn.multiselect {
        text-align: left;
    }

    .multiselect .caret {
        right: 0;
        position: absolute;
        margin-top: 8px;
        margin-right: 8px;
    }

    .row {
        margin: 0;
        padding: 3px 0;
    }

    .page-size {
        padding-left: 0;
        padding-right: 0;
        width: 62px;
    }

    .topheader {
        font-size: 14px;
        font-weight: bold;
        color: #FFF !important;
        text-transform: uppercase;
        margin-top: 3px;
    }

    .alignRight {
        text-align: right;
    }

    .alignCenter {
        text-align: center;
    }

    #CustomerList th {
        vertical-align: middle;
    }

    .no-padding {
        padding: 0;
    }

    .no-margin {
        margin: 0;
    }

    .padding-tb1 {
        padding-top: 1px;
        padding-bottom: 1px;
    }

    .margin-tb1 {
        margin-top: 1px;
        margin-bottom: 1px;
    }

    .custom-listbox .headerbox {
        padding: 3px 0px 3px 5px;
    }

    .custom-listbox {
        margin-top: 4px;
        margin-bottom: 0px;
    }

    .btn.multiselect {
        text-align: left;
        padding-top: 4px;
        padding-bottom: 4px;
        font-size: 11px;
        color: #555;
    }

    .multiselect .caret {
        right: 0;
        position: absolute;
        margin-top: 8px;
        margin-right: 8px;
    }

    .multiselect-container.dropdown-menu {
        text-transform: none;
        font-size: 14px;
    }


    #modal_IncreaseDecrease table.dataTable thead th, #modal_IncreaseDecrease table.dataTable thead td {
        font-size: 11px !important;
    }

    #modal_IncreaseDecrease table.dataTable tbody th, #modal_IncreaseDecrease table.dataTable tbody td {
        font-size: 11px !important;
    }

    #modal_IncreaseDecrease table.dataTable.no-footer {
        border-bottom-color: #e7ecf1;
    }
</style>
@using (Html.BeginForm("CustomerDetailIncreaseDecreasePopUp", "Customer", FormMethod.Post, new { @id = "frmCustomerDetailIncreaseDecreasePopUp", @class = "form form-horizontal toppadding", @style = "margin: 0px;" }))
{
    <div class="modal fade custom-model custom-form-design" id="modal_IncreaseDecrease" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
        <div class="modal-dialog" style="width:1120px">
            <div class="modal-content" style="border-radius: 8px;">
                <div class="modal-header headerbox list" style="padding:0px!important;border-bottom: none;">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" style="margin-top: 12px !important;margin-right: 12px !important;"></button>
                    <h4 class="modal-title" style="margin-top: 0px; margin-bottom: 4px;  padding: 7px!important;font-size: 12px;font-weight: bold;background: #3598DC !important;color: #FFF !important;border: 1px solid #3598DC !important;padding: 0px;border-radius: 8px 8px 0 0;text-transform: uppercase;">
                        Contract Increase/Decrease
                    </h4>
                </div>
                <div class="custom-form portlet light" style="box-shadow: none;margin: 0px;">
                    <input type="hidden" id="hdftransfer_Callfor" name="hdftransfer_Callfor" value="Approve" />
                    @Html.HiddenFor(one => one.CustomerIncreaseDecreaseDetail.MaintenanceTempDetailId)
                    @Html.HiddenFor(one => one.CustomerIncreaseDecreaseDetail.MaintenanceTempId)
                    @Html.HiddenFor(one => one.CustomerIncreaseDecreaseDetail.ContractId)
                    @Html.HiddenFor(one => one.CustomerIncreaseDecreaseDetail.CustomerId)
                    @Html.HiddenFor(one => one.CustomerIncreaseDecreaseDetail.StatusListId, new { Value = 4 })
                    <input id="CustomerIncreaseDecreaseDetail_ContractDetailCount" name="CustomerIncreaseDecreaseDetail_ContractDetailCount" type="hidden" value="@Model.lstContractDetail.Count" />
                    <input id="CustomerIncreaseDecreaseDetail_FranchiseeDistributionCount" name="CustomerIncreaseDecreaseDetail_FranchiseeDistributionCount" type="hidden" value="@Model.lstFranchiseeDistribution.Count" />


                    <div class="portlet-body">

                        <div class="row">
                            <div class="col-md-12">
                                <div class="col-md-1 control-label">
                                    Type:
                                </div>
                                <div class="col-md-3">
                                    <div class="input-group">
                                        <div class="icheck-inline" style="margin-top: 0px">
                                            @Html.RadioButtonFor(m => m.CustomerIncreaseDecreaseDetail.MaintenanceTypeListId, 4) Increase
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            @Html.RadioButtonFor(m => m.CustomerIncreaseDecreaseDetail.MaintenanceTypeListId, 5) Decrease
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-1 control-label">
                                    Reason:
                                </div>
                                <div class="col-md-3">
                                    @Html.TextBoxFor(o => o.CustomerIncreaseDecreaseDetail.Reason, new { @class = "form-control input-sm", @id = "CustomerIncreaseDecreaseDetail_Reason" })
                                    @*@Html.DropDownListFor(one => one.CustomerIncreaseDecreaseDetail.StatusReasonListId, (SelectList)ViewBag.StatusReasonList, "Select", new { @class = "form-control input-sm", required = "required", @id = "CID_ddlTransferStatus" })*@
                                </div>
                                <div class="col-md-2 control-label">
                                    Effective Date:
                                </div>
                                <div class="col-md-1">
                                    @Html.TextBoxFor(o => o.CustomerIncreaseDecreaseDetail.EffectiveDate, "{0:MM/dd/yyyy}", new { @class = "form-control input-sm date-picker" })
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <h4 class="block">Customer Contract</h4>
                            <div class="col-md-12">
                                <div class="table-responsive">
                                    <table class="table table-striped table-bordered table-hover order-column dataTable no-footer">
                                        <thead>
                                            <tr>
                                                <th style="width:125px;text-align:center;">
                                                    Customer No
                                                </th>
                                                <th style="width:300px;text-align:center;">
                                                    Customer Name
                                                </th>
                                                <th style="text-align:center;">
                                                    Address
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td style="text-align:center;">@Html.DisplayFor(o => o.CustomerIncreaseDecreaseDetail.CustomerNo)</td>
                                                <td style="text-align:center;">@Html.DisplayFor(o => o.CustomerIncreaseDecreaseDetail.CustomerName)</td>
                                                <td style="text-align:center;">
                                                    @Html.DisplayFor(o => o.CustomerIncreaseDecreaseDetail.C_Address),
                                                    @Html.DisplayFor(o => o.CustomerIncreaseDecreaseDetail.C_City),
                                                    @Html.DisplayFor(o => o.CustomerIncreaseDecreaseDetail.C_StateName) @Html.DisplayFor(o => o.CustomerIncreaseDecreaseDetail.C_PostalCode)
                                                </td>
                                            </tr>

                                        </tbody>
                                    </table>
                                </div>

                            </div>



                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <hr style="margin-top: 2px;margin-bottom: 1px;" />
                            </div>
                        </div>


                        <div class="form-group">
                            <label class="control-label col-md-1">
                                PO Number
                            </label>
                            <div class="col-md-2">
                                @Html.TextBoxFor(o => o.CustomerIncreaseDecreaseDetail.PONumber, new { @class = "form-control input-sm" })
                            </div>
                            <label class="control-label col-md-2" style="display:none;">
                                Agreement Used
                            </label>
                            <div class="col-md-2" style="display:none;">
                                <label class="mt-checkbox">
                                    @Html.CheckBoxFor(o => o.CustomerIncreaseDecreaseDetail.Qualified, new { @class = "i-checks", @checked = "true" }) Qualified
                                    <span></span>
                                </label>
                            </div>
                            <label class="control-label col-md-1">
                                Account Type
                            </label>
                            <div class="col-md-4">
                                @Html.DropDownListFor(one => one.CustomerIncreaseDecreaseDetail.AccountTypeListId, (SelectList)ViewBag.AccountTypeList, new { @class = "form-control input-sm", required = "required" })
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-md-1">
                                Sign Date
                            </label>
                            <div class="col-md-2">
                                <div class="input-group date" data-date-format="mm/dd/yyyy">
                                    @Html.TextBoxFor(one => one.CustomerIncreaseDecreaseDetail.SignDate, "{0:MM/dd/yyyy}", new { @class = "form-control input-sm date date-picker", @readonly = "readonly" })
                                    <span class="input-group-btn cal-btn">
                                        <button class="btn default cal-btn" type="button">
                                            <i class="fa fa-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                            <label class="control-label col-md-2">
                                Start Date
                            </label>
                            <div class="col-md-2">
                                <div class="input-group date" data-date-format="mm/dd/yyyy">
                                    @Html.TextBoxFor(one => one.CustomerIncreaseDecreaseDetail.StartDate, "{0:MM/dd/yyyy}", new { @class = "form-control input-sm date date-picker", @readonly = "readonly" })
                                    <span class="input-group-btn cal-btn">
                                        <button class="btn default cal-btn" type="button">
                                            <i class="fa fa-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                            <label class="control-label col-md-1">
                                Term Months
                            </label>
                            <div class="col-md-1">
                                @Html.TextBoxFor(one => one.CustomerIncreaseDecreaseDetail.ContractTermMonth, new { @class = "form-control input-sm", style = "width: 35px;float:left;" })<span style="float:left;padding:7px 4px;"></span>
                            </div>
                            <label class="control-label col-md-2">
                                Expiration Date
                            </label>
                            <div class="col-md-1">
                                <div class="input-group">
                                    @Html.TextBoxFor(one => one.CustomerIncreaseDecreaseDetail.ExpirationDate, "{0:MM/dd/yyyy}", new { @class = "form-control input-sm" })
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-md-1">
                                Orig. Amount
                            </label>
                            <div class="col-md-2">
                                @Html.TextBoxFor(one => one.CustomerIncreaseDecreaseDetail.OTotalAmount, new { @class = "form-control input-sm", style = "text-align:right;", @readonly = "readonly" })
                            </div>
                            <label class="control-label col-md-1">
                                New Amount
                            </label>
                            <div class="col-md-2">
                                @Html.TextBoxFor(one => one.CustomerIncreaseDecreaseDetail.TotalAmount, new { @class = "form-control input-sm", style = "text-align:right;" })
                            </div>
                            <label class="control-label col-md-1">
                                Description
                            </label>
                            <div class="col-md-5">
                                @Html.TextAreaFor(one => one.CustomerIncreaseDecreaseDetail.ContractDescription, new { @class = "form-control input-sm", @cols = "35", @rows = "1" })
                            </div>
                        </div>

                        <h4 class="block">Customer Contract Detail</h4>
                        @for (int i = 0; i < Model.lstContractDetail.Count; i++)
                        {
                            @Html.HiddenFor(one => one.lstContractDetail[i].MaintenanceTempDetailId)
                            @Html.HiddenFor(one => one.lstContractDetail[i].MaintenanceTempId)
                            @Html.HiddenFor(one => one.lstContractDetail[i].ContractDetailId)
                            @Html.HiddenFor(one => one.lstContractDetail[i].ContractId)
                            @Html.HiddenFor(one => one.lstContractDetail[i].LineNumber)


                            <h4 class="block" style="background-color: #e7ecf1!important;color: #999999 !important;">Line Number: @Html.DisplayFor(o => o.lstContractDetail[i].LineNumber)</h4>
                            <div class="form-group">
                                <label class="control-label col-md-1">
                                    Service Type
                                </label>
                                <div class="col-md-3">
                                    @Html.DropDownListFor(one => one.lstContractDetail[i].ServiceTypeListId, (SelectList)ViewBag.ServiceTypeListModel, new { @class = "form-control input-sm", required = "required" })
                                </div>
                                <label class="control-label col-md-2">
                                    Billing Frequency
                                </label>
                                <div class="col-md-1">
                                    @Html.DropDownListFor(one => one.lstContractDetail[i].BillingFrequencyListId, (SelectList)ViewBag.FrequencyListModel, null, new { @class = "form-control input-sm", required = "required", @style = "width: 100px;" })
                                </div>
                                <label class="control-label col-md-2">
                                    Orig. Amount
                                </label>
                                <div class="col-md-1">
                                    @Html.TextBoxFor(one => one.lstContractDetail[i].OAmount, new { @class = "form-control input-sm", @readonly = "readonly" })
                                </div>
                                <label class="control-label col-md-1">
                                    New Amount
                                </label>
                                <div class="col-md-1">
                                    @Html.TextBoxFor(one => one.lstContractDetail[i].Amount, new { @class = "form-control input-sm" })
                                    @Html.ValidationMessageFor(one => one.lstContractDetail[i].Amount, "", new { @class = "text-danger" })
                                </div>
                            </div>


                            <div class="form-group">

                                <label class="control-label col-md-1">
                                    Start Time
                                </label>
                                <div class="col-md-1">

                                    <input type="hidden" value="@Convert.ToDateTime(Model.lstContractDetail[i].StartTime).ToShortTimeString()" id="hdnStartTime" />
                                    @Html.TextBoxFor(one => one.lstContractDetail[i].StartTime, new { @class = "form-control input-sm timepicker timepicker-default" })

                                </div>
                                <label class="control-label col-md-1">
                                    End Time
                                </label>
                                <div class="col-md-1">

                                    @Html.TextBoxFor(one => one.lstContractDetail[i].EndTime, new { @class = "form-control input-sm timepicker timepicker-default" })

                                </div>
                                <label class="control-label col-md-2">
                                    Clean Times <span class="required"> * </span>
                                </label>
                                <div class="col-md-1">
                                    @Html.TextBoxFor(one => one.lstContractDetail[i].CleanTimes, new { @class = "form-control input-sm", required = "required" })
                                    @Html.ValidationMessageFor(one => one.lstContractDetail[i].CleanTimes, "", new { @class = "text-danger" })
                                </div>



                                <label class="control-label col-md-2">
                                    Clean Frequency <span class="required"> * </span>
                                </label>
                                <div class="col-md-3">
                                    @Html.DropDownListFor(one => one.lstContractDetail[i].CleanFrequencyListId, (SelectList)ViewBag.CleanFrequencyListModel, null, new { @class = "form-control input-sm", required = "required" })
                                    @Html.ValidationMessageFor(one => one.lstContractDetail[i].BillingFrequencyListId, "", new { @class = "text-danger" })
                                </div>

                            </div>
                            <div class="form-group">

                                <div class="col-md-1">
                                </div>

                                <div class="col-md-2">
                                    <label class="mt-checkbox">
                                        @Html.CheckBoxFor(one => one.lstContractDetail[i].CPIIncrease, new { @class = "i-checks", @checked = "true" }) CPI Increase
                                        <span></span>
                                    </label>
                                </div>

                                <div class="col-md-2">
                                    <label class="mt-checkbox">
                                        @Html.CheckBoxFor(one => one.lstContractDetail[i].SeparateInvoice, new { @class = "i-checks input-sm", @checked = "true" }) Separate Invoice
                                        <span></span>
                                    </label>
                                </div>
                                <label class="control-label col-md-1">
                                    Square Footage
                                </label>
                                <div class="col-md-1">
                                    @Html.TextBoxFor(one => one.lstContractDetail[i].SquareFootage, new { @class = "form-control input-sm" })
                                    @Html.ValidationMessageFor(one => one.lstContractDetail[i].SquareFootage, "", new { @class = "text-danger" })
                                </div>
                                <div class="col-md-5" id="@("divweek" + Model.lstContractDetail[i].ContractDetailId)" style="text-align: right;">
                                    <label class="checkbox-inline">
                                        @Html.CheckBoxFor(one => one.lstContractDetail[i].Mon, new { @class = "i-checks", @checked = "true" }) Mon
                                        <span></span>
                                    </label>
                                    <label class="checkbox-inline">
                                        @Html.CheckBoxFor(one => one.lstContractDetail[i].Tues, new { @class = "i-checks", @checked = "true" }) Tue
                                        <span></span>
                                    </label>
                                    <label class="checkbox-inline">
                                        @Html.CheckBoxFor(one => one.lstContractDetail[i].Wed, new { @class = "i-checks", @checked = "true" }) Wed
                                        <span></span>
                                    </label>
                                    <label class="checkbox-inline">
                                        @Html.CheckBoxFor(one => one.lstContractDetail[i].Thur, new { @class = "i-checks", @checked = "true" }) Thu
                                        <span></span>
                                    </label>
                                    <label class="checkbox-inline">
                                        @Html.CheckBoxFor(one => one.lstContractDetail[i].Fri, new { @class = "i-checks", @checked = "true" }) Fri
                                        <span></span>
                                    </label>
                                    <label class="checkbox-inline">
                                        @Html.CheckBoxFor(one => one.lstContractDetail[i].Sat, new { @class = "i-checks", @checked = "true" }) Sat
                                        <span></span>
                                    </label>
                                    <label class="checkbox-inline">
                                        @Html.CheckBoxFor(one => one.lstContractDetail[i].Sun, new { @class = "i-checks", @checked = "true" }) Sun
                                        <span></span>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="control-label col-md-1 text-right">
                                    Description
                                </div>
                                <div class="col-md-11">
                                    @Html.TextAreaFor(one => one.lstContractDetail[i].Description, new { @class = "form-control input-sm", @rows = "1" })
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="control-label col-md-1 text-right">
                                    Note
                                </div>
                                <div class="col-md-11">
                                    @Html.TextAreaFor(one => one.lstContractDetail[i].Notes, new { @class = "form-control input-sm", @rows = "1" })
                                </div>

                            </div>
                        }

                        <h4 class="block">Franchisee Distribution</h4>
                        <div class="row">
                            <div class="col-md-12">

                                <div class="table-responsive">
                                    <table class="table table-striped table-bordered table-hover order-column dataTable no-footer">
                                        <thead>
                                            <tr>
                                                <th style="width:130px;padding:3px;margin: 0px;">Contract Detail Line</th>
                                                <th style="width:170px;padding:3px;margin: 0px;text-align:center;">Franchisee No.</th>
                                                <th style="width:300px;padding:3px;text-align:center;">Franchisee Name</th>
                                                <th style="width:150px;padding:3px;">Distribution Amount</th>
                                                <th style="width:25px;padding:3px;">Fees</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @for (int j = 0; j < Model.lstFranchiseeDistribution.Count; j++)
                                            {
                                                <tr>
                                                    <td style="text-align:center">
                                                        @Html.HiddenFor(one => one.lstFranchiseeDistribution[j].MaintenanceTempDetailId)
                                                        @Html.HiddenFor(one => one.lstFranchiseeDistribution[j].MaintenanceTempId)
                                                        @Html.HiddenFor(o => o.lstFranchiseeDistribution[j].DistributionId)
                                                        @Html.HiddenFor(o => o.lstFranchiseeDistribution[j].CustomerId)
                                                        @Html.HiddenFor(o => o.lstFranchiseeDistribution[j].FranchiseeId)
                                                        @Html.HiddenFor(o => o.lstFranchiseeDistribution[j].CustomerId)
                                                        @Html.HiddenFor(o => o.lstFranchiseeDistribution[j].ContractDetailId)
                                                        @Html.DisplayFor(o => o.lstFranchiseeDistribution[j].DetailLineNumber)
                                                    </td>
                                                    <td style="text-align:center;">@Html.DisplayFor(o => o.lstFranchiseeDistribution[j].FranchiseeNo)</td>
                                                    <td style="white-space:pre-line;text-align:center;">@Html.DisplayFor(o => o.lstFranchiseeDistribution[j].FranchiseeName)</td>
                                                    <td style="text-align:right;">@Html.TextBoxFor(o => o.lstFranchiseeDistribution[j].Amount)</td>
                                                    <td style="text-align:center">View</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        @if (Model.lstFindersFee.Count > 0)
                        {
                            <h4 class="block">Finders Fee</h4>
                            for (int p = 0; p < Model.lstFindersFee.Count; p++)
                            {
                                @Html.HiddenFor(one => one.lstFindersFee[p].MaintenanceTempDetailId)
                                @Html.HiddenFor(one => one.lstFindersFee[p].MaintenanceTempId)
                                @Html.HiddenFor(one => one.lstFindersFee[p].FindersFeeId)
                                @Html.HiddenFor(one => one.lstFindersFee[p].FranchiseeId)
                                @Html.HiddenFor(one => one.lstFindersFee[p].CustomerId)

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered table-hover order-column dataTable no-footer">
                                                <thead>
                                                    <tr>
                                                        <th style="width:125px;text-align:center;">
                                                            Franchisee No
                                                        </th>
                                                        <th style="width:300px;text-align:center;">
                                                            Franchisee Name
                                                        </th>
                                                        <th style="text-align:center;">
                                                            Address
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td style="text-align:center;">@Html.DisplayFor(o => o.lstFindersFee[p].FranchiseeNo)</td>
                                                        <td style="text-align:center;">@Html.DisplayFor(o => o.lstFindersFee[p].FranchiseeName)</td>
                                                        <td style="text-align:center;">
                                                            @Html.DisplayFor(o => o.lstFindersFee[p].F_Address),
                                                            @Html.DisplayFor(o => o.lstFindersFee[p].F_City),
                                                            @Html.DisplayFor(o => o.lstFindersFee[p].F_StateName) @Html.DisplayFor(o => o.lstFindersFee[p].F_PostalCode)
                                                        </td>
                                                    </tr>

                                                </tbody>
                                            </table>
                                        </div>

                                    </div>
                                </div>
                                <div class="row">
                                    <h4 class="block" style="background-color: #e7ecf1!important;color: #999999 !important;">Finder Fee Information</h4>
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="col-md-2 control-label" style="padding-left: 0px;padding-right: 0px;">
                                                    Start Date<span style="color:#000000;">&nbsp;:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBoxFor(one => one.lstFindersFee[p].StartDate, "{0:MM/dd/yyyy}", new { @class = "form-control input-sm  edit-txtbx date-picker " })
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="col-md-2 control-label">
                                                    Description<span style="color:#000000;">&nbsp;:</span>
                                                </div>
                                                <div class="col-md-9">
                                                    @Html.TextBoxFor(one => one.lstFindersFee[p].Description, new { @class = "form-control input-sm  edit-txtbx" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <h4 class="block" style="background-color: #e7ecf1!important;color: #999999 !important;">Finder Fee Calculation Information</h4>
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="col-md-2 control-label">
                                                    Adjustment:<span style="color:#000000;">&nbsp;:</span><br /><br />
                                                </div>
                                                <div class="col-md-9">
                                                    <div class="table-responsive">
                                                        <table class="table table-striped table-bordered table-hover order-column dataTable no-footer" style="margin-top: 0px !important;" id="tblNewFindersFeeAdjustment">
                                                            <thead>
                                                                <tr>
                                                                    <th class="text-center" style="width:150px;">
                                                                        Type
                                                                    </th>
                                                                    <th class="text-center">
                                                                        Description
                                                                    </th>
                                                                    <th class="text-center" style="width:100px;">
                                                                        Amount
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                @if (Model.lstFindersFeeAdjustment.Count > 0)
                                                                {
                                                                    for (int b = 0; b < Model.lstFindersFeeAdjustment.Where(o => o.FindersFeeId == Model.lstFindersFee[p].FindersFeeId).ToList().Count; b++)
                                                                    {
                                                                        <tr>
                                                                            <td>
                                                                                @Html.HiddenFor(one => one.lstFindersFeeAdjustment[b].MaintenanceTempDetailId)
                                                                                @Html.HiddenFor(one => one.lstFindersFeeAdjustment[b].MaintenanceTempId)
                                                                                @Html.HiddenFor(m => m.lstFindersFeeAdjustment[b].FindersFeeAdjustmentId)
                                                                                @Html.HiddenFor(m => m.lstFindersFeeAdjustment[b].FranchiseeId)
                                                                                @Html.HiddenFor(m => m.lstFindersFeeAdjustment[b].FindersFeeId)
                                                                                @Html.DropDownListFor(m => m.lstFindersFeeAdjustment[b].FindersFeeAdjustmentTypeListId,
                                                                         new SelectList((System.Collections.IEnumerable)@ViewBag.FindersFeeAdjustmentTypeListRaw, "FindersFeeAdjustmentTypeListId", "Name", Model.lstFindersFeeAdjustment[b].FindersFeeAdjustmentTypeListId),
                                                                         "Select", new { @class = "form-control input-sm" })
                                                                            </td>
                                                                            <td>@Html.TextBoxFor(o => o.lstFindersFeeAdjustment[b].Description, new { @class = "form-control input-sm", @style = "width:100%;" })</td>
                                                                            <td>@Html.TextBoxFor(o => o.lstFindersFeeAdjustment[b].Amount, new { @class = "form-control input-sm txamt", @style = "width:100px;" })</td>
                                                                        </tr>
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    <tr>
                                                                        <td colspan="3" style="text-align:center;">No finders fee adjustment records.</td>
                                                                    </tr>
                                                                }
                                                            </tbody>

                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="col-md-2 control-label">
                                                    <a href="javascript:void(0);" onclick="AppendNewFinderAdjestment(@Model.lstFindersFee[p].FindersFeeId,0)">+ Add</a>
                                                </div>
                                                <div class="col-md-2 control-label" style="padding-left: 0px;">
                                                    Calculation Method<span style="color:#000000;">&nbsp;:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.DropDownListFor(m => m.lstFindersFee[p].FindersFeeTypeListId,
new SelectList((System.Collections.IEnumerable)@ViewBag.FindersFeeTypeListRaw, "FindersFeeTypeListId", "Name", Model.lstFindersFee[p].FindersFeeTypeListId)
, "Select", new { @class = "form-control input-sm edit-txtbx", onchange = "FindersFee_FindersFeeTypeListId_Onchange(" + p + ")", @readonly = "readonly" })

                                                </div>
                                                <div class="col-md-3 control-label" style="display:none;">
                                                    Factor<span style="color:#000000;">&nbsp;:</span>
                                                </div>
                                                <div class="col-md-2" style="display:none;">
                                                    @Html.TextBoxFor(one => one.lstFindersFee[p].Factor, new { @class = "form-control input-sm edit-txtbx" })
                                                </div>

                                            </div>
                                            <div class="col-md-12">
                                                <div class="col-md-2 control-label"></div>
                                                <div class="col-md-2 control-label">
                                                    Monthly Billing<span style="color:#000000;">&nbsp;:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBoxFor(one => one.lstFindersFee[p].ContractBillingAmount, new { @class = "form-control input-sm edit-txtbx txamt", @readonly = "readonly" })
                                                </div>
                                                <div class="col-md-3 control-label">
                                                    Total Adjustments<span style="color:#000000;">&nbsp;:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBoxFor(one => one.lstFindersFee[p].TotalAdjustmentAmount, new { @class = "form-control input-sm edit-txtbx txamt", @readonly = "readonly" })
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="col-md-2 control-label"></div>
                                                <div class="col-md-2 control-label">
                                                    Payable On<span style="color:#000000;">&nbsp;:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBoxFor(one => one.lstFindersFee[p].PayableOnAmount, new { @class = "form-control input-sm edit-txtbx txamt", @readonly = "readonly" })
                                                </div>
                                            </div>


                                            <div class="col-md-12">
                                                <div class="col-md-1 control-label"></div>
                                                <div class="col-md-3 control-label">
                                                    DownPayment Percent<span style="color:#000000;">&nbsp;:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBoxFor(one => one.lstFindersFee[p].DownPayPercentage, new { @class = "form-control input-sm edit-txtbx", onchange = "CalculateFindersFee(" + p + ")" })
                                                </div>
                                                <div class="col-md-3 control-label" style="padding-left: 0px;">
                                                    Down Pymnt Amount<span style="color:#000000;">&nbsp;:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBoxFor(one => one.lstFindersFee[p].DownPaymentAmount, new { @class = "form-control input-sm edit-txtbx txamt", @readonly = "readonly" })
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="col-md-1 control-label"></div>
                                                <div class="col-md-3 control-label">
                                                    Monthly Payment Percentage<span style="color:#000000;">&nbsp;:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBoxFor(one => one.lstFindersFee[p].MonthlyPaymentPercentage, new { @class = "form-control input-sm edit-txtbx txamt", onchange = "CalculateFindersFee(" + p + ")" })
                                                </div>
                                                <div class="col-md-3 control-label" style="padding-right: 0px">
                                                    Monthly Payment Amount<span style="color:#000000;">&nbsp;:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBoxFor(one => one.lstFindersFee[p].MonthlyPaymentAmount, new { @class = "form-control input-sm edit-txtbx txamt", @readonly = "readonly" })
                                                </div>
                                            </div>
                                            <div class="col-md-12" style="display:none;">
                                                <div class="col-md-2 control-label"></div>
                                                <div class="col-md-2 control-label">
                                                    Interest Percent<span style="color:#000000;">&nbsp;:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBoxFor(one => one.lstFindersFee[p].Interest, new { @class = "form-control input-sm  edit-txtbx txamt", @readonly = "readonly", @value = "0" })
                                                </div>
                                                <div class="col-md-3 control-label">
                                                    Interest Amount<span style="color:#000000;">&nbsp;:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBoxFor(one => one.lstFindersFee[p].Interest, new { @class = "form-control input-sm  edit-txtbx txamt", @readonly = "readonly", @value = "0" })
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="col-md-2 control-label"></div>
                                                <div class="col-md-2 control-label" style="padding-left: 0px;">
                                                    Number of Payments<span style="color:#000000;">&nbsp;:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBoxFor(one => one.lstFindersFee[p].TotalNumOfpayments, new { @class = "form-control input-sm edit-txtbx", onchange = "CalculateFindersFee(" + p + ")" })
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="col-md-2 control-label"></div>
                                                <div class="col-md-2 control-label">
                                                    Amount Financed<span style="color:#000000;">&nbsp;:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBoxFor(one => one.lstFindersFee[p].FinancedAmount, new { @class = "form-control input-sm edit-txtbx txamt", @readonly = "readonly" })
                                                </div>
                                                <div class="col-md-6" style="padding-right: 0px">
                                                    <label class="mt-checkbox mt-checkbox-outline">
                                                        @Html.CheckBoxFor(one => one.lstFindersFee[p].IncludeDownPayInFirstPay)Include First Payment in down payment
                                                        <span></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="col-md-2 control-label"></div>
                                                <div class="col-md-2 control-label">
                                                    Total FF<span style="color:#000000;">&nbsp;:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBoxFor(one => one.lstFindersFee[p].TotalAmount, new { @class = "form-control input-sm edit-txtbx txamt", @readonly = "readonly" })
                                                </div>
                                            </div>

                                            <div class="col-md-12">
                                                <div class="col-md-2 control-label"></div>
                                                <div class="col-md-2 control-label">
                                                    Note<span style="color:#000000;">&nbsp;:</span>
                                                </div>
                                                <div class="col-md-7">
                                                    @Html.TextBoxFor(one => one.lstFindersFee[p].Notes, new { @class = "form-control input-sm edit-txtbx" })
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                </div>
                            }
                        }
                        @if (Model.CustomerIncreaseDecreaseDetail.MaintenanceTypeListId==5)
                        {
                            if (Model.lstCreditInvoiceItem.Count > 0)
                            {
                                <hr />
                                <h4 class="modal-title" style="margin-top: 0px; margin-bottom: 4px;  padding: 7px!important;font-size: 10px;font-weight: bold;background: #3598DC !important;color: #FFF !important;border: 1px solid #3598DC !important;padding: 0px;border-radius:0;text-transform: uppercase;">
                                    CUSTOMER CREDIT FOR DECREASE
                                </h4>

                                var invIdList = Model.lstCreditInvoiceItem.Select(o => o.InvoiceId).Distinct<int>();


                                foreach (var item in invIdList)
                                {

                                    <table class="table table-striped table-bordered table-hover order-column dataTable no-footer" style="border:1px solid #e8e8e8">
                                        <tbody>
                                            <tr>
                                                <td style="font-weight:bold">Invoice No:</td>
                                                <td>@Model.lstCreditInvoiceItem.Where(p => p.InvoiceId == item).FirstOrDefault().InvoiceNo</td>
                                                <td style="font-weight:bold">Invoice Date:</td>
                                                <td>@string.Format("{0:MM/dd/yyyy}", Model.lstCreditInvoiceItem.Where(p => p.InvoiceId == item).FirstOrDefault().InvoiceDate)</td>
                                                <td style="font-weight:bold">Invoice Due Date:</td>
                                                <td>@string.Format("{0:MM/dd/yyyy}", Model.lstCreditInvoiceItem.Where(p => p.InvoiceId == item).FirstOrDefault().DueDate)</td>
                                            </tr>
                                            <tr>
                                                <td style="font-weight:bold">Reason:</td>
                                                <td>@Model.lstCreditInvoiceItem.Where(p => p.InvoiceId == item).FirstOrDefault().CreditReasonListName</td>
                                                <td style="font-weight:bold">Description:</td>
                                                <td colspan="3">@Model.lstCreditInvoiceItem.Where(p => p.InvoiceId == item).FirstOrDefault().Description</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <table class="table table-striped table-bordered table-hover order-column dataTable no-footer" style="border:1px solid #e8e8e8" id="frTransFransdestributionTable">
                                        <thead>
                                            <tr>
                                                <td class="text-center" colspan="5">Invoice Items</td>
                                            </tr>
                                            <tr>
                                                <th class="text-center" style="vertical-align:middle;background: lightgray;width:85px;">Line No.</th>
                                                <th class="text-center" style="vertical-align:middle;background: lightgray;">Service Desc.</th>
                                                <th class="text-center" style="vertical-align:middle;background: lightgray;width:100px;">Apply Amount</th>
                                                <th class="text-center" style="vertical-align:middle;background: lightgray;width:100px;">Tax Amount</th>
                                                <th class="text-center" style="vertical-align:middle;background: lightgray;width:100px;">Total Amount</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @if (Model.lstCreditInvoiceItem.Where(p => p.InvoiceId == item).Count() > 0)
                                            {
                                                for (int i = 0; i < Model.lstCreditInvoiceItem.Where(p => p.InvoiceId == item).Count(); i++)
                                                {
                                                    <tr>
                                                        <td style="text-align:center;">
                                                            @Html.HiddenFor(x => Model.lstCreditInvoiceItem.Where(p => p.InvoiceId == item).ToList()[i].MaintenanceTempDetailId)
                                                            @Model.lstCreditInvoiceItem[i].LineNumber
                                                        </td>
                                                        <td style="text-align:center;">@Model.lstCreditInvoiceItem.Where(p => p.InvoiceId == item).ToList()[i].ServiceTypeListName</td>
                                                        <td style="text-align:center;">
                                                            @Html.TextBoxFor(x => Model.lstCreditInvoiceItem.Where(p => p.InvoiceId == item).ToList()[i].ApplyAmount, "{0:($ #,#.##)}", new { @style = "text-align: right;color:red;" })
                                                        </td>
                                                        <td style="text-align:center;">
                                                            @Html.TextBoxFor(x => Model.lstCreditInvoiceItem.Where(p => p.InvoiceId == item).ToList()[i].TaxAmount, "{0:($ #,#.##)}", new { @style = "text-align: right;color:red;" })
                                                        </td>
                                                        <td style="text-align:center;">
                                                            @Html.TextBoxFor(x => Model.lstCreditInvoiceItem.Where(p => p.InvoiceId == item).ToList()[i].TotalAmount, "{0:($ #,#.##)}", new { @style = "text-align: right;color:red;" })
                                                        </td>
                                                    </tr>
                                                }
                                            }
                                            else
                                            {
                                                <tr>
                                                    <td colspan="5" style="text-align:center;">
                                                        <span style="color:red">No Invoice Items</span>
                                                    </td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                    <br />
                                    <table class="table table-striped table-bordered table-hover order-column dataTable no-footer" style="border:1px solid #e8e8e8" id="frTransFransdestributionTable">
                                        <thead>
                                            <tr>
                                                <td class="text-center" colspan="6">Billing Pay Items</td>
                                            </tr>
                                            <tr>
                                                <th class="text-center" style="vertical-align:middle;background: lightgray;width:85px;">Line Number</th>
                                                <th class="text-center" style="vertical-align:middle;background: lightgray;">Franchisee Name</th>
                                                <th class="text-center" style="vertical-align:middle;background: lightgray;width:100px;">Franchisee No.</th>
                                                <th class="text-center" style="vertical-align:middle;background: lightgray;width:100px;">Apply Amount</th>
                                                <th class="text-center" style="vertical-align:middle;background: lightgray;width:100px;">Fee Amount</th>
                                                <th class="text-center" style="vertical-align:middle;background: lightgray;width:100px;">Total Amount</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @if (Model.lstCreditBillingPay.Where(p => p.InvoiceId == item).ToList().Count > 0)
                                            {
                                                for (int i = 0; i < Model.lstCreditBillingPay.Where(p => p.InvoiceId == item).ToList().Count; i++)
                                                {
                                                    <tr>
                                                        <td style="text-align:center;">
                                                            @Html.HiddenFor(x => Model.lstCreditBillingPay.Where(p => p.InvoiceId == item).ToList()[i].MaintenanceTempDetailId)
                                                            @Model.lstCreditBillingPay[i].LineNumber
                                                        </td>
                                                        <td style="text-align:center;">@Model.lstCreditBillingPay.Where(p => p.InvoiceId == item).ToList()[i].FranchiseeName</td>
                                                        <td style="text-align:center;">@Model.lstCreditBillingPay.Where(p => p.InvoiceId == item).ToList()[i].FranchiseeNo</td>
                                                        <td style="text-align:center;">
                                                            @Html.TextBoxFor(x => Model.lstCreditBillingPay.Where(p => p.InvoiceId == item).ToList()[i].ApplyAmount, "{0:($ #,#.##)}", new { @style = "text-align:right;color:red" })
                                                        </td>
                                                        <td style="text-align:center;">
                                                            @Html.TextBoxFor(x => Model.lstCreditBillingPay.Where(p => p.InvoiceId == item).ToList()[i].FeeAmount, "{0:c}", new { @style = "text-align:right" })
                                                        </td>
                                                        <td style="text-align:center;">
                                                            @Html.TextBoxFor(x => Model.lstCreditBillingPay.Where(p => p.InvoiceId == item).ToList()[i].ItemAmount, "{0:($ #,#.##)}", new { @style = "text-align:right;color:red" })
                                                        </td>
                                                    </tr>
                                                }
                                            }
                                            else
                                            {
                                                <tr>
                                                    <td colspan="5" style="text-align:center;">
                                                        <span style="color:red">No Billling Pay Items</span>
                                                    </td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>

                                }
                                <hr />
                            }
                            else
                            {
                                <hr />
                                <h4 class="modal-title" style="margin-top: 0px; margin-bottom: 4px;  padding: 7px!important;font-size: 10px;font-weight: bold;background: #3598DC !important;color: #FFF !important;border: 1px solid #3598DC !important;padding: 0px;border-radius:0;text-transform: uppercase;">
                                    CUSTOMER CREDIT FOR DECREASE
                                </h4>
                                <table class="table table-striped table-bordered table-hover order-column dataTable no-footer" style="border:1px solid #e8e8e8">
                                    <tbody>
                                        <tr>  <td><span style="color:red">No Active Invoice for Credit found relate to this customer</span> </td></tr>
                                    </tbody>
                                </table>
                            }
                        }
                        <div class="form-actions">
                            <div class="col-md-12">
                                <button type="button" id="saveApproveButton" class="btn btn-primary pull-right" style="margin-left: 10px;">Approve</button>
                                <button type="button" id="saveRejectButton" class="btn btn-primary pull-right" style="margin-left: 10px;">Reject</button>
                            </div>
                        </div>
                        @*<div class="form-actions">
                                <div class="col-md-12" style="padding-right: 28px;">
                                    <button type="submit" class="btn btn-primary col-md-2 pull-right" style="margin-left: 10px; ">Approve<i class="fa fa-check"></i></button>
                                </div>
                            </div>*@

                    </div>
                </div>

            </div>
        </div>
    </div>
    <div class="modal fade custom-model custom-form-design" id="CIDmodal_service" tabindex="-1" role="basic" aria-hidden="true" style="display: none;margin-top: 100px;">
        <div class="modal-dialog modal-sm">
            <div class="modal-content" style="border-radius: 8px;">
                <div class="modal-header headerbox list" style="padding:0px!important;border-bottom: none;">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" style="margin-top: 12px !important;margin-right: 12px !important;"></button>
                    <h4 class="modal-title" style="margin-top: 0px; margin-bottom: 4px;  padding: 7px!important;font-size: 12px;font-weight: bold;background: #3598DC !important;color: #FFF !important;border: 1px solid #3598DC !important;padding: 0px;border-radius: 8px 8px 0 0;text-transform: uppercase;">
                        Contract Detail Service
                    </h4>
                </div>
                <div class="modal-body" style="padding: 0px">
                    <div class="row">
                        <div style="max-width: 98%;margin: 0px auto;">
                            <div class="custom-form portlet light">
                                <div class="portlet-body form">
                                    <div class="form-body-outer" style="padding: 0px;">
                                        <div style="overflow:auto;width: 100%; margin: 0em auto;">
                                            <div class="form-group">
                                                <label class="control-label col-md-4">
                                                </label>
                                                <div class="col-md-3">
                                                    <label class="mt-checkbox" style="margin-bottom: 8px;">
                                                        <input type="checkbox" id="cid_chkScheduleMonday" class="i-checks editcheck">Monday
                                                        <span></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-4">
                                                </label>
                                                <div class="col-md-3">
                                                    <label class="mt-checkbox" style="margin-bottom: 8px;">
                                                        <input type="checkbox" id="cid_chkScheduleTuesday" class="i-checks editcheck">Tuesday
                                                        <span></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-4">
                                                </label>
                                                <div class="col-md-3">
                                                    <label class="mt-checkbox" style="margin-bottom: 8px;">
                                                        <input type="checkbox" id="cid_chkScheduleWednesday" class="i-checks editcheck">Wednesday
                                                        <span></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-4">
                                                </label>
                                                <div class="col-md-3">
                                                    <label class="mt-checkbox" style="margin-bottom: 8px;">
                                                        <input type="checkbox" id="cid_chkScheduleThursday" class="i-checks editcheck">Thursday
                                                        <span></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-4">
                                                </label>
                                                <div class="col-md-3">
                                                    <label class="mt-checkbox" style="margin-bottom: 8px;">
                                                        <input type="checkbox" id="cid_chkScheduleFriday" class="i-checks editcheck">Friday
                                                        <span></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-4">
                                                </label>
                                                <div class="col-md-3">
                                                    <label class="mt-checkbox" style="margin-bottom: 8px;">
                                                        <input type="checkbox" id="cid_chkScheduleSaturday" class="i-checks editcheck">Saturday
                                                        <span></span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-4">
                                                </label>
                                                <div class="col-md-3">
                                                    <label class="mt-checkbox" style="margin-bottom: 8px;">
                                                        <input type="checkbox" id="cid_chkScheduleSunday" class="i-checks editcheck">Sunday
                                                        <span></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <input id="CustomerIncreaseDecreaseDetail_FindersFeeAdjustmentCount" name="CustomerIncreaseDecreaseDetail_FindersFeeAdjustmentCount" type="hidden" value="0" />
}


<script type="text/javascript">
    $(document).ready(function () {
        $('.date-picker').datepicker({ autoclose: true, dateFormat: 'mm/dd/yy' });
        $('.date-picker').attr("placeholder", "mm/dd/yyyy");
        $('#btnContractDetailSave').click(function () {

            var isvalid = true;

            if ($('#Contract_PurchaseOrderNo').val() == '') { $('#Contract_PurchaseOrderNo').css('border-color', 'red'); if (isvalid == true) { isvalid = false; } } else { $('#Contract_PurchaseOrderNo').css('border-color', ''); }
            if ($('#AccountTypeList').val() == '') { $('#AccountTypeList').css('border-color', 'red'); if (isvalid == true) { isvalid = false; } } else { $('#AccountTypeList').css('border-color', ''); }

            if ($('#Contract_SignDate').val() == '') { $('#Contract_SignDate').css('border-color', 'red'); if (isvalid == true) { isvalid = false; } } else { $('#Contract_SignDate').css('border-color', ''); }
            if ($('#Contract_StartDate').val() == '') { $('#Contract_StartDate').css('border-color', 'red'); if (isvalid == true) { isvalid = false; } } else { $('#Contract_StartDate').css('border-color', ''); }

            //if ($('#Contract_ContractTermListId').val() == '') { $('#Contract_ContractTermListId').css('border-color', 'red'); if (isvalid == true) { isvalid = false; } } else { $('#Contract_ContractTermListId').css('border-color', ''); }
            if ($('#Contract_ContractTermMonth').val() == '') { $('#Contract_ContractTermMonth').css('border-color', 'red'); if (isvalid == true) { isvalid = false; } } else { $('#Contract_ContractTermMonth').css('border-color', ''); }
            if ($('#Contract_ExpirationDate').val() == '') { $('#Contract_ExpirationDate').css('border-color', 'red'); if (isvalid == true) { isvalid = false; } } else { $('#Contract_ExpirationDate').css('border-color', ''); }

            if ($('#Contract_Amount').val() == '') { $('#Contract_Amount').css('border-color', 'red'); if (isvalid == true) { isvalid = false; } } else { $('#Contract_Amount').css('border-color', ''); }
            if ($('#Contract_AmountSubjectToFee').val() == '') { $('#Contract_AmountSubjectToFee').css('border-color', 'red'); if (isvalid == true) { isvalid = false; } } else { $('#Contract_AmountSubjectToFee').css('border-color', ''); }

            if ($('#Contract_StatusDate').val() == '') { $('#Contract_StatusDate').css('border-color', 'red'); if (isvalid == true) { isvalid = false; } } else { $('#Contract_StatusDate').css('border-color', ''); }
            if ($('#Contract_ResumeDate').val() == '') { $('#Contract_ResumeDate').css('border-color', 'red'); if (isvalid == true) { isvalid = false; } } else { $('#Contract_ResumeDate').css('border-color', ''); }
            if ($('#Contract_AmountSubjectToFee').val() == '') { $('#Contract_AmountSubjectToFee').css('border-color', 'red'); if (isvalid == true) { isvalid = false; } } else { $('#Contract_AmountSubjectToFee').css('border-color', ''); }

            if (isvalid == true) {
                $("#SaveCustomerContractform_wizard_1").submit();
            }
        });

        $("#saveApproveButton").click(function () {
            swal('Approved.');
            $('#hdftransfer_Callfor').val('Approve');
            $("#frmCustomerDetailIncreaseDecreasePopUp").submit();
        });

        $("#saveRejectButton").click(function () {
            swal('Rejected.');
            $('#hdftransfer_Callfor').val('Reject');
            $("#frmCustomerDetailIncreaseDecreasePopUp").submit();
        });
    });

    function ShowAddNEwFeeFinder(id) {
        $("#modal_FeeFinderdetailResult" + id).modal({ backdrop: 'static' });
    }

    function CIDFranchiseeservice(mo, tu, we, th, fr, sa, su) {

        $("#cid_chkScheduleMonday").prop('checked', false);
        $("#cid_chkScheduleTuesday").prop('checked', false);
        $("#cid_chkScheduleWednesday").prop('checked', false);
        $("#cid_chkScheduleThursday").prop('checked', false);
        $("#cid_chkScheduleFriday").prop('checked', false);
        $("#cid_chkScheduleSaturday").prop('checked', false);
        $("#cid_chkScheduleSunday").prop('checked', false);



        $("#cid_chkScheduleMonday").prop('checked', mo);

        $("#cid_chkScheduleTuesday").prop('checked', tu);

        $("#cid_chkScheduleWednesday").prop('checked', we);

        $("#cid_chkScheduleThursday").prop('checked', th);

        $("#cid_chkScheduleFriday").prop('checked', fr);

        $("#cid_chkScheduleSaturday").prop('checked', sa);

        $("#cid_chkScheduleSunday").prop('checked', su);

        $("#CIDmodal_service").modal({ backdrop: 'static' });
    }

    $(function () {
        window.AddContractDetailDescriptionModal = function (ContractDetailId, i) {
            $.blockUI({
                //baseZ: 99999,
                //message: '<center><img height: src="/Images/loading_icon.gif" /><h3> <b>Processing....</br> Please wait! and do not refresh page.</b></h3></center>',
                //css: { backgroundColor: 'rgb{0,0,0}', border: '0', color: '#fff', "z-index": 99999 }
            });
            var ContractId = 0;
            if ($('#CustomerIncreaseDecreaseDetail_ContractId').val() != "") {
                ContractId = $('#CustomerIncreaseDecreaseDetail_ContractId').val();
            }
            if ($('#CustomerIncreaseDecreaseDetail_ContractId').val() != 0) {
                ContractId = $('#CustomerIncreaseDecreaseDetail_ContractId').val();
            }
            else {
                swal(
                    'Oops...',
                    'Save Customer Contract First, Before add Contract Detail!',
                    'warning'
                )
            }


            $('#lstContractDetail_' + i + '__StartTime').timepicker({ timeFormat: 'h:mm:ss p' });
            $('#lstContractDetail_' + i + '__EndTime').timepicker({ timeFormat: 'h:mm:ss p' });

            $('#lstContractDetail_' + i + '__CleanFrequencyListId').on('change', function () {
                if (this.value == '1') {
                    $('#lstContractDetail_' + i + '__Mon').removeAttr('checked');
                    $('#lstContractDetail_' + i + '__Tues').removeAttr('checked');
                    $('#lstContractDetail_' + i + '__Wed').removeAttr('checked');
                    $('#lstContractDetail_' + i + '__Thur').removeAttr('checked');
                    $('#lstContractDetail_' + i + '__Fri').removeAttr('checked');
                    $('#lstContractDetail_' + i + '__Sat').removeAttr('checked');
                    $('#lstContractDetail_' + i + '__Sun').removeAttr('checked');
                    $("#divweek" + ContractDetailId).show();
                }
                else {
                    $("#divweek" + ContractDetailId).hide();
                }
            });

            if (ContractId > 0 && ContractDetailId > 0) {
                $('#modalDataCusContractPopup' + ContractDetailId).modal();
            }
            else if (ContractId > 0) {
                $('#modalDataCusContractPopup' + ContractDetailId).modal();
            }


            var __ContractDetailCount = parseInt($('#CustomerIncreaseDecreaseDetail_ContractDetailCount').val());
            var __FranchiseeDistributionCount = parseInt($('#CustomerIncreaseDecreaseDetail_FranchiseeDistributionCount').val());

            if (__ContractDetailCount == 1) {
                $('#lstContractDetail_0__Amount').val($('#CustomerIncreaseDecreaseDetail_TotalAmount').val());

            }
            if (__FranchiseeDistributionCount == 1) {
                $('#lstFranchiseeDistribution_0__Amount').val($('#CustomerIncreaseDecreaseDetail_TotalAmount').val());

            }

            $('#DFCustomerIncreaseDecreaseDetail_ContractExpirationDate').text($('#CustomerIncreaseDecreaseDetail_ExpirationDate').val());
            $('#DFCustomerIncreaseDecreaseDetail_ContractTotalAmount').text($('#CustomerIncreaseDecreaseDetail_TotalAmount').val());






            $.unblockUI();
        }
    });

    function IncreaseDistribution() {

        $('#modal_CIDFranchiseeDistribution').modal({ backdrop: 'static' });
    }

    function RemoveContractDetail(ContractDetailId, ContractId) {
        $.blockUI({
            baseZ: 99999,
            message: '<center><img height: src="/Images/loading_icon.gif" /><h3> <b>Processing....</br> Please wait! and do not refresh page.</b></h3></center>',
            css: { backgroundColor: 'rgb{0,0,0}', border: '0', color: '#fff', "z-index": 99999 }
        });
        $.ajax({
            type: "post",
            url: '@Url.Action("RemoveContractDetail", "Customer")',
            ajaxasync: true,
            data: { ContractDetailId: ContractDetailId, ContarctId: ContractId },
            success: function (response) {
                loadOwners(response.id);

                $.unblockUI();
            },
            error: function (data) {
                $.unblockUI();
            }
        })
        $.unblockUI();
    }
    function loadOwners(id) {
        $.blockUI({
            baseZ: 99999,
            message: '<center><img height: src="/Images/loading_icon.gif" /><h3> <b>Processing....</br> Please wait! and do not refresh page.</b></h3></center>',
            css: { backgroundColor: 'rgb{0,0,0}', border: '0', color: '#fff', "z-index": 99999 }
        });

        $.ajax({
            type: "GET",
            url: '@Url.Action("GetContractDetail", "Customer", new { @area = "Portal" })?id=' + id,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (response) {
                $('#tblContractDescriptionData').html(response);
                $.unblockUI();
            },
            error: function (xhr, textStatus, error) {
                if (typeof console == "object") {

                    $('#tblContractDescriptionData').html(xhr.responseText);
                    console.log(xhr.status + "," + xhr.responseText + "," + textStatus + "," + error);
                }
                $.unblockUI();
            }
        });
        $.unblockUI();
    }

    $("#CustomerIncreaseDecreaseDetail_ContractTermMonth").change(function () {

        var monthadd = $("#CustomerIncreaseDecreaseDetail_ContractTermMonth").val();
        var startdate = $("#CustomerIncreaseDecreaseDetail_StartDate").val();
        var contractstartdate = new Date(startdate);

        if (monthadd == "")
            monthadd = 0;

        contractstartdate.setMonth(contractstartdate.getMonth() + parseInt(monthadd));
        var c = (contractstartdate.getMonth() + 1) + '/' + contractstartdate.getDate() + '/' + contractstartdate.getFullYear()
        $("#CustomerIncreaseDecreaseDetail_ExpirationDate").val(c);

    });

    $("#CustomerIncreaseDecreaseDetail_OptionType").change(function () {

        var monthadd = $("#CustomerIncreaseDecreaseDetail_OptionType").val();
        alert(monthadd);

    });
    var FindersFeeAdjustmentRowCount = 0;
    function AppendNewFinderAdjestment(ffID, i) {
        FindersFeeAdjustmentRowCount++;
        var rFFA = "";
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetFindersFeeAdjustmentList", "Customer", new { @area = "Portal" })',
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (response) {

                rFFA += '<tr><td><select id="txtFindersFeeAdjustment_' + ffID + '_' + FindersFeeAdjustmentRowCount + '_Adjustment" name="txtFindersFeeAdjustment_' + ffID + '_' + FindersFeeAdjustmentRowCount + '_Adjustment" class="form-control input-sm">';
                rFFA += "<option value=" + 0 + ">" + "Select" + "</option>";
                for (var i = 0; i < response.length; i++) {
                    rFFA += "<option value=" + response[i].Value + ">" + $.trim(response[i].Text) + "</option>";
                }
                rFFA += '</select>';

                rFFA += '<td><input type="text" id="txtFindersFeeAdjustment_' + ffID + '_' + FindersFeeAdjustmentRowCount + '_Description" name="txtFindersFeeAdjustment_' + ffID + '_' + FindersFeeAdjustmentRowCount + '_Description" value="" class="form-control input-sm" /></td>';
                rFFA += '<td><input type="text" id="txtFindersFeeAdjustment_' + ffID + '_' + FindersFeeAdjustmentRowCount + '_Amount" name="txtFindersFeeAdjustment_' + ffID + '_' + FindersFeeAdjustmentRowCount + '_Amount" value="" class="form-control input-sm"/></td>';

                rFFA += '</tr>';

                $('#tblNewFindersFeeAdjustment').append(rFFA);

                $('#txtFindersFeeAdjustment_' + ffID + '_' + FindersFeeAdjustmentRowCount + '_Amount').change(function () {

                    var amt = 0.00;
                    for (var j = 1; j <= FindersFeeAdjustmentRowCount; j++) {
                        if ($.trim($('#txtFindersFeeAdjustment_' + ffID + '_' + j + '_Amount').val()) != '')
                            amt += parseFloat($('#txtFindersFeeAdjustment_' + ffID + '_' + j + '_Amount').val());
                    }
                    $("#lstFindersFee_" + i + "__TotalAdjustmentAmount").val(amt);
                });
            }
        });
        $("#CustomerIncreaseDecreaseDetail_FindersFeeAdjustmentCount").val(FindersFeeAdjustmentRowCount);
    }



    $('.timepicker').timepicker({ timeFormat: 'h:mm:ss p' });


    var _FFSchedule = [];
    GetFindersFeeScheduleList();
    function GetFindersFeeScheduleList() {
        $.ajax({
            type: "get",
            url: '@Url.Action("GetFindersFeeScheduleList", "Franchise",new {area ="Portal" })',
            success: function (response) {
                _FFSchedule = response;
            },
            error: function (data) {
                console.log(data);
            }
        });
    }


    function FindersFee_FindersFeeTypeListId_Onchange(i) {
        var _FindersFeeTypeListId = $("#lstFindersFee_" + i + "__FindersFeeTypeListId").val();

        $.each(_FFSchedule, function (index, item) {
            if (item.FindersFeeTypeListId == parseInt(_FindersFeeTypeListId)) {
                var _Payable = parseFloat($("#lstFindersFee_" + i + "__PayableOnAmount").val())

                if (_Payable >= item.StartAmount && _Payable <= item.EndAmount) {
                    $("#lstFindersFee_" + i + "__Factor").val(item.Factor);
                    $("#lstFindersFee_" + i + "__DownPayPercentage").val(item.DownPayPercentage);
                    $("#lstFindersFee_" + i + "__DownPaymentAmount").val((item.DownPayPercentage * _Payable / 100).toFixed(2));
                    $("#lstFindersFee_" + i + "__MonthlyPaymentPercentage").val(item.MonthlyPercentage);
                    $("#lstFindersFee_" + i + "__MonthlyPaymentAmount").val((item.MonthlyPercentage * _Payable / 100).toFixed(2));
                    $("#lstFindersFee_" + i + "__TotalNumOfpayments").val(item.NumOfPayments);

                    $("#lstFindersFee_" + i + "__FinancedAmount").val((item.MonthlyPercentage * _Payable / 100) * item.NumOfPayments);
                    $("#lstFindersFee_" + i + "__TotalAmount").val(((item.DownPayPercentage * _Payable / 100) + ((item.MonthlyPercentage * _Payable / 100) * item.NumOfPayments)).toFixed(2));

                    maskCurrency('lstFindersFee_' + i + '__DownPaymentAmount');
                    maskCurrency('lstFindersFee_' + i + '__MonthlyPaymentAmount');
                    maskCurrency('lstFindersFee_' + i + '__FinancedAmount');
                    maskCurrency('lstFindersFee_' + i + '__TotalAmount');

                    maskPercentage('lstFindersFee_' + i + '__DownPayPercentage');
                    maskPercentage('lstFindersFee_' + i + '__MonthlyPaymentPercentage');

                }
            }
        });
    }
        $("#FindersFee_ContractBillingAmount").change(function () {
        var _FindersFeeTypeListId = $("#FindersFee_FindersFeeTypeListId").val();
        var ctTemp = 0;
        var _this = this;
        $.each(_FFSchedule, function (index, item) {
            ctTemp++;
            if (item.FindersFeeTypeListId == parseInt(_FindersFeeTypeListId)) {
                var _Payable = parseFloat(_this.value);//parseFloat($("#FindersFee_PayableOnAmount").val())

                if (_Payable >= item.StartAmount && _Payable <= item.EndAmount) {

                    $("#FindersFee_Factor").val(item.Factor);
                    $("#FindersFee_DownPayPercentage").val(item.DownPayPercentage);
                    $("#FindersFee_DownPaymentAmount").val((item.DownPayPercentage * _Payable / 100).toFixed(2));
                    $("#FindersFee_MonthlyPaymentPercentage").val(item.MonthlyPercentage);
                    $("#FindersFee_MonthlyPaymentAmount").val((item.MonthlyPercentage * _Payable / 100).toFixed(2));
                    $("#FindersFee_TotalNumOfpayments").val(item.NumOfPayments);

                    $("#FindersFee_FinancedAmount").val((item.MonthlyPercentage * _Payable / 100) * item.NumOfPayments);
                    $("#FindersFee_TotalAmount").val(((item.DownPayPercentage * _Payable / 100) + ((item.MonthlyPercentage * _Payable / 100) * item.NumOfPayments)).toFixed(2));

                    maskCurrency('FindersFee_DownPaymentAmount');
                    maskCurrency('FindersFee_MonthlyPaymentAmount');
                    maskCurrency('FindersFee_FinancedAmount');
                    maskCurrency('FindersFee_TotalAmount');
                    maskCurrency('FindersFee_MultiTenantOccupancyAmount');

                    maskPercentage('FindersFee_DownPayPercentage');
                    maskPercentage('FindersFee_MonthlyPaymentPercentage');

                }
            }

            if (ctTemp == _FFSchedule.length) {

                setTimeout(CalculateFindersFee(),100);
            }

        });



    });
    function CalculateFindersFee(i) {
        _Factor = $("#lstFindersFee_" + i + "__Factor").val();
        _ContractBillingAmount = $("#lstFindersFee_" + i + "__ContractBillingAmount").val() != '' ? $("#lstFindersFee_" + i + "__ContractBillingAmount").val() : 0;
        _TotalAdjustmentAmount = $("#lstFindersFee_" + i + "__TotalAdjustmentAmount").val() != '' ? $("#lstFindersFee_" + i + "__TotalAdjustmentAmount").val() : 0;
        _PayableOnAmount = parseFloat($("#lstFindersFee_" + i + "__PayableOnAmount").val());

        _DownPayPercentage = parseFloat($("#lstFindersFee_" + i + "__DownPayPercentage").val() != '' ? $("#lstFindersFee_" + i + "__DownPayPercentage").val() : 0);
        $("#lstFindersFee_" + i + "__DownPaymentAmount").val((_PayableOnAmount * _DownPayPercentage / 100).toFixed(2));

        _MonthlyPaymentPercentage = parseFloat($("#lstFindersFee_" + i + "__MonthlyPaymentPercentage").val() != '' ? $("#lstFindersFee_" + i + "__MonthlyPaymentPercentage").val() : 0);
        $("#lstFindersFee_" + i + "__MonthlyPaymentAmount").val((_PayableOnAmount * _MonthlyPaymentPercentage / 100).toFixed(2));

        _TotalNumOfpayments = parseInt($("#lstFindersFee_" + i + "__TotalNumOfpayments").val() != '' ? $("#lstFindersFee_" + i + "__TotalNumOfpayments").val() : 0);

        $("#lstFindersFee_" + i + "__FinancedAmount").val(((_PayableOnAmount * _MonthlyPaymentPercentage / 100) * _TotalNumOfpayments).toFixed(2));
        $("#lstFindersFee_" + i + "__TotalAmount").val(((_PayableOnAmount * _DownPayPercentage / 100) + ((_PayableOnAmount * _MonthlyPaymentPercentage / 100) * _TotalNumOfpayments)).toFixed(2));
    }
    function maskCurrency(id) {
        $('#' + id).inputmask("currency", {
            alias: 'currency',
            prefix: '$ ',
            digits: 2,
            autoUnmask: true,
            removeMaskOnSubmit: true,
            unmaskAsNumber: true,
            allowPlus: false,
            allowMinus: false,
            autoGroup: true,
            groupSeparator: ",",
        });
    }

    function maskPercentage(id) {
        $('#' + id).inputmask("numeric", {
            radixPoint: ".",
            groupSeparator: ",",
            autoGroup: true,
            suffix: " %",
            rightAlign: true,
            autoUnmask: true,
            removeMaskOnSubmit: true,
            clearMaskOnLostFocus: false,
            oncleared: function () { self.Value(''); }
        });
    }
    function applyMaskNumber(id) {
        $(id).inputmask("numeric", {
            autoUnmask: true,
            removeMaskOnSubmit: true,
            oncleared: function () { self.Value(''); }
        });
    }


    $("#SubmitFC_onClick").click(function (e) {

        e.preventDefault();
        $("#frm_CustomerDetailIncrease").submit();
    });


    function _CustomerIncreaseDecreaseInIt() {

        maskCurrency('CustomerIncreaseDecreaseDetail_TotalAmount');
        maskCurrency('lstContractDetail_0__Amount');
        maskCurrency('lstFranchiseeDistribution_0__Amount');
        maskCurrency('lstFindersFee_0__ContractBillingAmount');
        maskCurrency('lstFindersFee_0__TotalAdjustmentAmount');
        maskCurrency('lstFindersFee_0__PayableOnAmount');

        maskPercentage('lstFindersFee_0__DownPayPercentage');
        maskPercentage('lstFindersFee_0__MonthlyPaymentPercentage');
        maskCurrency('lstFindersFee_0__DownPaymentAmount');
        maskCurrency('lstFindersFee_0__MonthlyPaymentAmount');
        applyMaskNumber('lstFindersFee_0__TotalNumOfpayments');
        maskCurrency('lstFindersFee_0__FinancedAmount');
        maskCurrency('lstFindersFee_0__TotalAmount');

        maskCurrency('lstFindersFeeAdjustment_0__Amount');



    }




</script>
