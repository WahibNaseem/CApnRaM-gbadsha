
@model IEnumerable<JKViewModels.Customer.CustomerRevenuesResultViewModel>


@foreach (int Regionid in Model.Select(o => o.RegionId).Distinct())
{
    <div class="tablebox">
        <div class="table-responsive" id='@("divCustomerRevenues"+Regionid)'>
            <table class="table table-striped table-bordered table-hover order-column" rel="datatableCR" id='@("tblCustomerRevenues"+Regionid)' style="margin-top:0 !important;">
                <thead>
                    <tr style="background: #8d8f92;color: white;font-weight: bold;">
                        <th style="text-align:center;">
                            Region
                        </th>
                        <th style="text-align:center;">
                            Customer No
                        </th>
                        <th style="text-align:center;width: 200px;">
                            Customer Name
                        </th>
                        <th style="text-align:center;width:85px">
                            Contract Amount
                        </th>
                        <th style="text-align:center;width:85px">
                            Total Bill Amount
                        </th>
                        <th style="text-align:center;width:85px">
                            Total Tax
                        </th>
                        <th style="text-align:center;width:85px">
                            Total Revenue
                        </th>
                        <th style="text-align:center;width:85px">
                            Total Payment
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.Where(o => o.RegionId == Regionid))
                    {
                        <tr>
                            <td style="text-align:center">
                                @item.RegionName
                            </td>
                            <td style="text-align:center">
                                @item.CustomerNo
                            </td>
                            <td style="text-align:center">
                                @item.CustomerName
                            </td>
                            <td style="text-align:right">$ @string.Format("{0:n}", item.ContractAmount)</td>
                            <td style="text-align:right">$ @string.Format("{0:n}", item.TotalBill)</td>
                             <td style="text-align:right">$ @string.Format("{0:n}", item.TotalTax)</td>
                            <td style="text-align:right">$ @string.Format("{0:n}", item.TotalRevenue)</td>
                            <td style="text-align:right">$ @string.Format("{0:n}", item.TotalPayment)</td>
                        </tr>
                    }

                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="2"></td>
                        <td style="text-align:right;background: #d5f7fb;" colspan="1">Total</td>
                        <td style="text-align:right;background: #d5f7fb;">@String.Format("{0:c}", Model.Where(o => o.RegionId == Regionid).Sum(d => d.ContractAmount))</td>
                        <td style="text-align:right;background: #d5f7fb;">@String.Format("{0:c}", Model.Where(o => o.RegionId == Regionid).Sum(d => d.TotalBill))</td>
                        <td style="text-align:right;background: #d5f7fb;">@String.Format("{0:c}", Model.Where(o => o.RegionId == Regionid).Sum(d => d.TotalTax))</td>
                        <td style="text-align:right;background: #d5f7fb;">@String.Format("{0:c}", Model.Where(o => o.RegionId == Regionid).Sum(d => d.TotalRevenue))</td>
                        <td style="text-align:right;background: #d5f7fb;">@String.Format("{0:c}", Model.Where(o => o.RegionId == Regionid).Sum(d => d.TotalPayment))</td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
}