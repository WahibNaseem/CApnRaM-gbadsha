@model JKViewModels.Inspection.InspectionFormModel
@{
    ViewBag.Title = "InspectionReport";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section styles{
    <link href="~/Content/admin/assets/global/plugins/jquery-ui/jquery-ui.min.css" rel="stylesheet" />
    <style type="text/css">
        .lbl-p5 {
            padding: 5px;
        }

            .lbl-p5.red {
                color: red;
            }


            .lbl-p5.green {
                color: lightgreen;
            }

        input[type="text"].txtcolon:before {
            content: ": ";
        }

        .no-padding {
            padding: 0;
        }

        .credit-field {
            width: 80px !important;
        }

        .alignRight {
            text-align: right;
        }

        .alignCenter {
            text-align: center;
        }

        .close {
            background-image: url(/Content/admin/assets/global/img/stick_close.png) !important;
            height: 12px !important;
            width: 12px !important;
            margin-top: 0px !important;
        }

        #ui-datepicker-div {
            z-index: 99999 !important;
        }
    </style>

}


<div class="custom-form portlet light">
    <div class="headerbox">
        <div class="row">
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-12 text-center" style="font-size:13px;">
                        <b>Customer Inspection Report</b>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="portlet-body form form-horizontal">

        <div class="form-body">
            <div class="form-group">
                <div class="row">
                    <div class="col-md-12">
                        <div class="col-md-2 control-label" style="padding-top: 0px;"><b>Account:</b></div>
                        @if (ViewBag.CustomerDetail != null)
                        {
                            if (ViewBag.CustomerDetail.CustomerName != null)
                            {
                                <div class="col-md-4" style="padding-top: 1px;">@ViewBag.CustomerDetail.CustomerName</div>
                            }
                        }

                        <div class="col-md-2 control-label" style="padding-top: 0px;"><b>Contact:</b></div>

                        @if (ViewBag.CustomerDetail != null)
                        {
                            if (ViewBag.CustomerDetail.ContactName != null)
                            {
                                <div class="col-md-4" style="padding-top: 1px;">@ViewBag.CustomerDetail.ContactName</div>
                            }
                        }
                    </div>
                    <div class="col-md-12">
                        <div class="col-md-2 control-label" style="padding-top: 0px;"><b>Address:</b></div>
                        @if (ViewBag.CustomerDetail != null)
                        {
                            if (ViewBag.CustomerDetail.Address != null)
                            {
                                <div class="col-md-4" style="padding-top: 1px;">@ViewBag.CustomerDetail.Address</div>
                            }
                        }
                        <div class="col-md-2 control-label" style="padding-top: 0px;"><b>Phone:</b></div>
                        @if (ViewBag.CustomerDetail != null)
                        {
                            if (ViewBag.CustomerDetail.Phone != null)
                            {
                                <div class="col-md-4" style="padding-top: 1px;">@ViewBag.CustomerDetail.Phone</div>
                            }
                        }
                    </div>
                    <div class="col-md-12">
                        <div class="col-md-2 control-label" style="padding-top: 0px;"></div>
                        @if (ViewBag.CustomerDetail != null)
                        {
                            if (ViewBag.CustomerDetail.Address2 != null)
                            {
                                <div class="col-md-4" style="padding-top: 1px;">@ViewBag.CustomerDetail.Address2</div>
                            }
                        }
                        <div class="col-md-2 control-label" style="padding-top: 0px;"><b>Acct Type:</b></div>
                        <div class="col-md-4" style="padding-top: 1px;">@Model.AccountType</div>
                    </div>
                    @*<div class="col-md-12">
                            <div class="col-md-2 control-label" style="padding-top: 0px;"><b>Frequency:</b></div>
                            <div class="col-md-4" style="padding-top: 1px;">5 Per W</div>
                            <div class="col-md-2 control-label" style="padding-top: 0px;"><b>Franchisee:</b></div>
                            <div class="col-md-4" style="padding-top: 1px;">KMBURNS, INC</div>
                        </div>*@
                    <div class="col-md-12">
                        <div class="col-md-2 control-label" style="padding-top: 0px;"><b>Inspector:</b></div>
                        <div class="col-md-4" style="padding-top: 1px;"></div>
                        <div class="col-md-2 control-label" style="padding-top: 0px;"></div>
                        <div class="col-md-4" style="padding-top: 1px;"></div>
                    </div>
                    <div class="col-md-12">
                        <div class="col-md-2 control-label" style="padding-top: 0px;"><b>Result:</b></div>
                        <div class="col-md-1" style="padding-top: 1px;">Pass<i class="fa fa-check" style="color:green;padding-left: 7px;"></i></div>
                        <div class="col-md-2" style="padding-top: 1px;">Need Improvments<i class="fa fa-warning" style="color:yellow;padding-left: 7px;"></i></div>
                        <div class="col-md-1" style="padding-top: 1px;">Fail<i class="fa fa-close" style="color:red;padding-left: 7px;"></i></div>
                        <div class="col-md-2" style="padding-top: 1px;">N/A<i class="fa fa-ban" style="color:orangered;padding-left: 7px;"></i></div>
                    </div>
                </div>
            </div>
            @if (Model.Sections.Count() > 0)
            {
                foreach (var item in Model.Sections)
                {
                    <div class="form-group" style="background: black;color: white;padding-bottom: 5px;padding-top: 5px;">
                        <div class="col-md-3">
                            <span>@Html.DisplayFor(modelItem => item.SectionName)</span>
                        </div>
                        <div class="col-md-2">
                            <span>Pass Points: @Html.DisplayFor(modelItem => item.PassPoints)</span>
                        </div>
                        <div class="col-md-3">
                            <span>Needs Improvement Points: @Html.DisplayFor(modelItem => item.NeedImprovementPoints)</span>
                        </div>
                        <div class="col-md-2">
                            <span>Fail Points: @Html.DisplayFor(modelItem => item.FailPoints)</span>
                        </div>
                        <div class="col-md-2">
                            <span>Area Score: @Html.DisplayFor(modelItem => item.ScorePercent)</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-12" style="margin-top:-7px;">
                            @foreach (var sectionItem in item.Items)
                            {
                                if (sectionItem.FormItemType == JKViewModels.FormItemType.FormItemTypeInspection)
                                {

                                    var data = Json.Decode(sectionItem.FormItemValue);

                                    <span class="col-md-3" style="padding-top: 7px;">
                                        @data["Label"]
                                        @if (data["Status"] == 2 || data["Status"] == 3)
                                        {
                                            if (data["Items"].Length > 0)
                                            {
                                                <a onclick="openDialog(@sectionItem.InspectionFormItemId);"><i class="fa fa-image" style="color:blue"></i></a>
                                            }
                                        }
                                    </span>
                                    if (data["Status"] == 0)
                                    {
                                        <span class="col-md-1" align="center" style="padding-top: 7px;"><i class="fa fa-ban" style="color:orangered;padding-left: 7px;"></i></span>
                                    }
                                    if (data["Status"] == 1)
                                    {
                                        <span class="col-md-1" align="center" style="padding-top: 7px;"><i class="fa fa-check" style="color:green"></i></span>
                                    }
                                    if (data["Status"] == 2)
                                    {
                                        <span class="col-md-1" align="center" style="padding-top: 7px;"><i class="fa fa-close" style="color:red"></i></span>
                                    }
                                    if (data["Status"] == 3)
                                    {
                                        <span class="col-md-1" align="center" style="padding-top: 7px;"><i class="fa fa-warning" style="color:yellow;"></i></span>
                                    }
                                }
                            }
                        </div>
                    </div>
                }
                <div class="form-group" style="background: black;color: white;padding-bottom: 5px;padding-top: 5px;">
                    <div class="col-md-3">
                        <span>Overall</span>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-6" style="margin-top:-7px;">
                        <div class="col-md-12" style="padding-bottom: 12px;"></div>
                        <div class="col-md-8">
                            <b>Total Point Possible</b>
                        </div>
                        <div class="col-md-4">
                            <span></span>
                        </div>
                        <div class="col-md-8">
                            <b>Total Pass Point</b>
                        </div>
                        <div class="col-md-4">
                            <span>@Model.PassPoints</span>
                        </div>
                        <div class="col-md-8">
                            <b>Need Improvement Points</b>
                        </div>
                        <div class="col-md-4">
                            <span>@Model.NeedImprovementPoints</span>
                        </div>
                        <div class="col-md-8">
                            <b>Total Failed Point</b>
                        </div>
                        <div class="col-md-4">
                            <span>@Model.FailPoints</span>
                        </div>
                        <div class="col-md-8">
                            <b>Percent Score</b>
                        </div>
                        <div class="col-md-4">
                            <span>@Model.ScorePercent</span>
                        </div>
                    </div>
                    <div class="col-md-6" style="margin-top:-7px;">
                        <div class="col-md-12">
                            <b>Scoring</b>
                        </div>
                        <div class="col-md-12">
                            <span>100% - 95% = Excellent</span>
                        </div>
                        <div class="col-md-12">
                            <span>94% - 90% = Good</span>
                        </div>
                        <div class="col-md-12">
                            <span>89% - 86% = Fail</span>
                        </div>
                        <div class="col-md-12">
                            <span>85% - 81% = Poor</span>
                        </div>
                        <div class="col-md-12">
                            <span>80% or Less 93% = Fail</span>
                        </div>
                    </div>
                </div>
                <div class="form-group" style="background: black;color: white;padding-bottom: 5px;padding-top: 5px;">
                    <div class="col-md-12">
                        <span>Customer Signature: <a href=""></a></span>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-5" style="margin-top:5px;"></div>
                    <div class="col-md-7" style="margin-top:5px;">
                        <img src="@Model.SignatureUrl" style="width: 200px;">
                    </div>
                </div>
            }

        </div>



    </div>
</div>

<div class="form-horizontal" id="form_ShowImage"></div>



@section pageplugins{
    @if (Request.IsSecureConnection)
    {
        <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js" type="text/javascript"></script>
    }
    else
    {
        <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js" type="text/javascript"></script>
    }
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/select2/js/select2.full.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/jquery-validation/js/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/jquery-validation/js/additional-methods.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/bootstrap-wizard/jquery.bootstrap.wizard.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/jquery-inputmask/jquery.inputmask.bundle.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/scripts/datatable.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/datatables/datatables.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/scripts/app.min.js")" type="text/javascript" )"></script>
    <script src="@Url.Content("~/Content/admin/assets/pages/scripts/table-datatables-managed.min.js")" type="text/javascript"></script>

    <link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/chosen.css")" />
    <script src="@Url.Content("~/Scripts/chosen.jquery.min.js")" type="text/javascript"></script>
    <script src="~/Scripts/jquery.uniform.min.js"></script>

}

@section scripts{
    <script>
        jQuery(document).ready(function () {

        });

        function btnClose() {
            $("#modal_ShowImage").modal("hide");
        }
        function openDialog(Id) {
            $.blockUI();

            var sURL = '@Url.Action("GetImageLoad", "Administration", new { area = "Portal" })?id=' + Id;
            $.ajax({
                type: "GET",
                url: sURL,
                contentType: "application/json; charset=utf-8",
                datatype: "json",
                success: function (data) {
                    $('#form_ShowImage').html(data);
                    $("#modal_ShowImage").modal({ backdrop: 'static' });
                    $('.modal-dialog').draggable();

                    $.unblockUI();
                },
                error: function () {
                    $.unblockUI();
                    alert("Content load failed.");
                }
            });
        }
    </script>
}