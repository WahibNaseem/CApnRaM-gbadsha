@model List<JKViewModels.Commission.CurrentScheduledCommissionViewModel>

<div class="headerbox" style="margin-top:10px;">
    <div class="row" style="background-color: #3598DC;color: #fff;">
        <div class="col-md-12 no-padding">
            <div class="alignCenter">
                <div class="col-md-4" style="">
                    <div class="col-md-7 pull-left no-padding">
                        <div style="display:table-cell;width:100%;">
                          
                                <button type="button" class="btn red dropdown-toggle pull-left subsectionBtn" onclick="BindGenerateCurrentList()"
                                        style="padding: 3px 12px; font-size: 12px;">
                                    <span class="hidden-sm hidden-xs">Review Payout</span>
                                </button>
                           
                        </div>
                    </div>
                </div>
                <div class="col-md-4 topheader">
                    @ViewBag.SelectedPeriod Scheduled Compensations
                </div>
                <div class="col-md-4" style="padding-right:5px;">

                </div>
            </div>
        </div>
    </div>
</div>
<hr />
<div class="tablebox">
    <div class="table-responsive" id="divcustomerList" style="background-color:#ffffff;min-height:100%;">
        <table class="table table-striped table-bordered order-column dataTable no-footer" id="AdditionalBonusScheduleList" style="margin-top:0 !important;">
            @if (Model.Where(o => o.CommissionTrxTypeListId == 1).Count() == 0)
            {
                <tr style="background-color: #6fa0c1;color: #fff;">
                    <td style="text-align:center;vertical-align:middle;">
                        Customer No
                    </td>
                    <td style="text-align:center;vertical-align:middle;">
                        Customer
                    </td>
                    <td style="text-align:center;vertical-align:middle;">
                        Start Date
                    </td>
                    <td style="text-align:center;vertical-align:middle;">
                        Contract Bill
                    </td>
                    <td style="text-align:center;vertical-align:middle;">
                        Commission Amount
                    </td>
                    <td style="text-align:center;vertical-align:middle;">
                        CommissionType
                    </td>
                </tr>
                <tr>
                    <td colspan="6" style="text-align:center"> No records available for curent period.</td>
                </tr>
            }
            else
            {

                int LastUserId = 0;
                foreach (var item in Model.Where(o => o.CommissionTrxTypeListId == 1).OrderBy(f => f.SalesPersonId))
                {
                    if (LastUserId != item.SalesPersonId)
                    {
                        <tr style="background-color: #6fa0c1;color: #fff;">
                            <td colspan="6" style="vertical-align:middle;">
                                <strong>User : @item.SalesPersonName</strong>
                            </td>
                        </tr>
                        <tr style="background-color: #6fa0c1;color: #fff;">
                            <td style="text-align:center;vertical-align:middle;">
                                Customer No
                            </td>
                            <td style="text-align:center;vertical-align:middle;">
                                Customer
                            </td>
                            <td style="text-align:center;vertical-align:middle;">
                                Start Date
                            </td>
                            <td style="text-align:center;vertical-align:middle;">
                                Contract Bill
                            </td>
                            <td style="text-align:center;vertical-align:middle;">
                                Commission Amount
                            </td>
                            <td style="text-align:center;vertical-align:middle;">
                                CommissionType
                            </td>
                        </tr>
                        <span style="display:none;"> @(LastUserId = item.SalesPersonId)</span>
                    }

                    <tr>
                        <td style="text-align:center;vertical-align:middle;">
                            @item.CustomerNo
                        </td>
                        <td style="text-align:left;vertical-align:middle;">
                            @item.CustomerName
                        </td>
                        <td style="text-align:center;vertical-align:middle;">
                            @String.Format("{0:MM/dd/yyyy}", item.ContractStartDate)
                        </td>
                        <td style="text-align:center;vertical-align:middle;">

                            @String.Format("{0:c}", item.ContractAmount)
                        </td>
                        <td style="text-align:center;vertical-align:middle;">
                            *
                        </td>
                        <td style="text-align:center;vertical-align:middle;">
                            @item.CompensationTypeListDescription
                        </td>
                    </tr>
                }
                <tr>
                    <td colspan="3"></td>
                    <td style="text-align:center;width:200px;vertical-align:middle;">
                        @String.Format("{0:c}", Model.Where(o => o.CommissionTrxTypeListId == 1).Sum(d => d.ContractAmount))
                    </td>
                    <td colspan="2"></td>
                </tr>
            }
        </table>
    </div>
</div>
<div class="tablebox">
    <div class="table-responsive" id="divcustomerList" style="background-color:#ffffff;min-height:100%;">
        <table class="table table-striped table-bordered order-column dataTable no-footer" id="AdditionalBonusScheduleListCancel" style="margin-top:0 !important;">
            @if (Model.Where(o => o.CommissionTrxTypeListId == 2).Count() == 0)
            {
                <tr style="background-color: #6fa0c1;color: #fff;">
                    <td style="text-align:center;vertical-align:middle;">
                        Customer No
                    </td>
                    <td style="text-align:center;vertical-align:middle;">
                        Customer
                    </td>
                    <td style="text-align:center;vertical-align:middle;">
                        Start Date
                    </td>
                    <td style="text-align:center;vertical-align:middle;">
                        Contract Bill
                    </td>
                    <td style="text-align:center;vertical-align:middle;">
                        Commission Amount
                    </td>
                    <td style="text-align:center;vertical-align:middle;">
                        CommissionType
                    </td>
                </tr>
                <tr>
                    <td colspan="6" style="text-align:center"> No records available for curent period.</td>
                </tr>
            }
            else
            {

                int LastUserId = 0;
                foreach (var item in Model.Where(o => o.CommissionTrxTypeListId == 2).OrderBy(f => f.SalesPersonId))
                {
                    if (LastUserId != item.SalesPersonId)
                    {
                        <tr style="background-color: #6fa0c1;color: #fff;">
                            <td colspan="6" style="vertical-align:middle;">
                                <strong>User : @item.SalesPersonName</strong>
                            </td>
                        </tr>
                        <tr style="background-color: #6fa0c1;color: #fff;">
                            <td style="text-align:center;vertical-align:middle;">
                                Customer No
                            </td>
                            <td style="text-align:center;vertical-align:middle;">
                                Customer
                            </td>
                            <td style="text-align:center;vertical-align:middle;">
                                Start Date
                            </td>
                            <td style="text-align:center;vertical-align:middle;">
                                Contract Bill
                            </td>
                            <td style="text-align:center;vertical-align:middle;">
                                Commission Amount
                            </td>
                            <td style="text-align:center;vertical-align:middle;">
                                CommissionType
                            </td>
                        </tr>
                        <span style="display:none;"> @(LastUserId = item.SalesPersonId)</span>
                    }

                    <tr>
                        <td style="text-align:center;vertical-align:middle;">
                            @item.CustomerNo
                        </td>
                        <td style="text-align:left;vertical-align:middle;">
                            @item.CustomerName
                        </td>
                        <td style="text-align:center;vertical-align:middle;">
                            @String.Format("{0:MM/dd/yyyy}", item.ContractStartDate)
                        </td>
                        <td style="text-align:center;vertical-align:middle;">

                            @String.Format("{0:c}", item.ContractAmount)
                        </td>
                        <td style="text-align:center;vertical-align:middle;">
                            *
                        </td>
                        <td style="text-align:center;vertical-align:middle;">
                            @item.CompensationTypeListDescription
                        </td>
                    </tr>
                }
                <tr>
                    <td colspan="3"></td>
                    <td style="text-align:center;width:200px;vertical-align:middle;">
                        @String.Format("{0:c}", Model.Where(o => o.CommissionTrxTypeListId == 2).Sum(d => d.ContractAmount))
                    </td>
                    <td colspan="2"></td>
                </tr>
            }
        </table>
    </div>
</div>
