@model IEnumerable<JKViewModels.CRM.CRMPotentialFranchiseeViewModel>
@using JK.FMS.MVC.Areas.CRM.Common
@using JKApi.Core.Common
@using JK.Resources


@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section styles{

    <link href='@Url.Content("~/Content/admin/assets/global/plugins/datatables/datatables.min.css")' rel="stylesheet" type="text/css" />
    <link href='@Url.Content("~/Content/admin/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css")' rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/admin/assets/global/plugins/bootstrap-multiselect/css/bootstrap-multiselect.css")" rel="stylesheet" type="text/css" />
    <link href="~/Content/admin/assets/global/css/components.min.css" rel="stylesheet" />

    <style>
        .form-actions {
            padding-top: 10px;
            margin-top: 20px;
            border-top: 1px solid #e7ecf1;
        }

        .form-section {
            margin-top: 10px;
            padding: 5px;
            border-bottom: 1px solid #e7ecf1;
        }

        .forminput {
            text-align: left;
            margin-left: -20px;
            border: none;
            background: transparent;
        }

        .portlet-bottom {
            margin-bottom: 10px;
        }

        .portlet-align {
            padding-left: 6px;
            padding-right: 6px;
        }

        .modal-custom-content {
            padding: 0px;
            border-radius: 20px;
        }

        .modal-custom-header {
            background: #3598DC;
            padding: 8px;
            border-top-left-radius: 18px;
            border-top-right-radius: 18px;
        }

        .modal-close-button {
            margin-top: 10px;
            margin-right: 10px;
        }

        .topheader {
            font-size: 14px;
            font-weight: bold;
            color: #FFF !important;
            text-transform: uppercase;
            margin-top: 3px;
        }

        .alignCenter {
            text-align: center;
        }

        .capitaltext {
            text-transform: uppercase;
        }

        .tabpointer {
            cursor: pointer;
        }
    </style>

    <style>
        .close {
            background-image: url(/Content/admin/assets/global/img/stick_close.png) !important;
            height: 12px !important;
            width: 12px !important;
            margin-top: 0px !important;
        }

        .btn.multiselect {
            text-align: left;
        }

        .multiselect .caret {
            right: 0;
            position: absolute;
            margin-top: 8px;
            margin-right: 8px;
        }

        .row {
            margin: 0;
            padding: 3px 0;
        }

        .page-size {
            padding-left: 0;
            padding-right: 0;
            width: 62px;
        }

        .topheader {
            font-size: 14px;
            font-weight: bold;
            color: #FFF !important;
            text-transform: uppercase;
            margin-top: 3px;
        }

        .alignRight {
            text-align: right;
        }

        .alignCenter {
            text-align: center;
        }

        #FranchisePotentialList th {
            vertical-align: middle;
        }

        .no-padding {
            padding: 0;
        }

        .fieldspadding-left {
            padding-left: 0px;
        }

        .no-margin {
            margin: 0;
        }

        .padding-tb1 {
            padding-top: 1px;
            padding-bottom: 1px;
        }

        .margin-tb1 {
            margin-top: 1px;
            margin-bottom: 1px;
        }

        .custom-listbox .headerbox {
            padding: 3px 0px 3px 5px;
        }

        .custom-listbox {
            margin-top: 4px;
            margin-bottom: 0px;
        }

        .btn.multiselect {
            text-align: left;
            padding-top: 4px;
            padding-bottom: 4px;
            font-size: 11px;
            color: #555;
        }

        .multiselect .caret {
            right: 0;
            position: absolute;
            margin-top: 8px;
            margin-right: 8px;
        }

        .multiselect-container.dropdown-menu {
            text-transform: none;
            font-size: 14px;
        }

        .contract {
            text-align: right;
        }

        .tablebox .table-responsive {
            min-height: 80px;
        }

        .input-mysize {
            min-width: 150px
        }

        .input-mysize2 {
            min-width: 90px
        }

        .input-mysize3 { /*min-width: 250px*/
        }
    </style>

    <style>
        @@media (min-width: 768px) {
            .seven-cols .col-md-1,
            .seven-cols .col-sm-1,
            .seven-cols .col-lg-1 {
                width: 100%;
                *width: 100%;
            }
        }

        @@media (min-width: 992px) {
            .seven-cols .col-md-1,
            .seven-cols .col-sm-1,
            .seven-cols .col-lg-1 {
                width: 14.285714285714285714285714285714%;
                *width: 14.285714285714285714285714285714%;
            }
        }

        @@media (min-width: 1200px) {
            .seven-cols .col-md-1,
            .seven-cols .col-sm-1,
            .seven-cols .col-lg-1 {
                width: 14.285714285714285714285714285714%;
                *width: 14.285714285714285714285714285714%;
            }
        }
    </style>

}

@section pageplugins{

    <script src="@Url.Content("~/Content/admin/assets/global/plugins/jquery-ui/jquery-ui.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/jquery-validation/js/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/jquery-inputmask/jquery.inputmask.bundle.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/scripts/datatable.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/datatables/datatables.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/pages/scripts/table-datatables-managed.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/moment.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/bootstrap-typeahead/bootstrap3-typeahead.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/bootstrap-multiselect/js/bootstrap-multiselect.js")" type="text/javascript"></script>

    @if (Request.IsSecureConnection)
    {
        <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js" type="text/javascript"></script>
    }
    else
    {
        <script src="http://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js" type="text/javascript"></script>
    }

}


@section scripts{

    <script src="@Url.Content("~/Areas/CRM/Scripts/crm_potentialfranchise.js")"></script>

    <script type="text/javascript">

        var salesPersonList = @Html.Raw(Json.Encode(ViewBag.SalePersonList));

        function getCurrentUrl() {
            return '@Url.Action("GetIndex", "CRMPotentialFranchise", new { area = "CRM" })';
        }

        var getFranchiseDetail = function (id) {

            if (!(isNaN(id))) {

                $("#divBelow").css("display", "block");
                /*Show Lead Id */
                $("#franchiselead_title").css("display", "block");
                /*Bind Lead Id*/
                $("#franchiselead_title_id").html(id);
                $("#portlettoplist").click();
                $(".checkbox_questionaire").prop("checked", false);
                $(".checkbox_acknowledgement").prop("checked", false);

                /**
               * Make a request   '
               */
                var URL = "/CRM/CRMPotentialFranchise/GetPotentialDetail?accountId=" + id;

                $.ajax({
                    url: URL,
                    type: "GET",
                    dataType: "json",
                    cache: false,
                    success: function (data) {
                        $("#hdfAssigneeId").val(data.assigneeId);
                        BindLeadGen(data.franchisedetailvm.StageStatus, data, setFranchiseDetailData, data.franchisedetailvm.CRM_AccountFranchiseDetailId);
                        $("#divlistview").hide();
                    },
                    error: function (error) {
                        JK.CRM.CRMApp.hideActivity("#addlead_modalview_footer");
                        console.log(error.message);
                    }
                });
            }
        }

        function bindSalePersonList(listregion) {
            var _region = [{}];

            $.grep(salesPersonList, function (v) {
                if (v.RegionId == null || v.RegionId == "") {
                    _region.push({ "UserId": v.UserId, "FirstName": v.FirstName })
                    return;
                }
            });
            $.each(listregion, function (index, region) {
                $.grep(salesPersonList, function (v) {
                    if (v.RegionId == parseInt(region)) {
                        _region.push({ "UserId": v.UserId, "FirstName": v.FirstName })
                        return;
                    }
                });

            });

            $("#select_saleperson").html('');
            $.each(_region, function (data, value) {
                $("#select_saleperson").append($("<option>All</option>").val(value.UserId).html(value.FirstName));
            });
        }

        $(document).ready(function () {

            
            /*Lead Stage Status List*/
            $("#franchise_statusList").multiselect({
                includeSelectAllOption: false,
                selectAllText: 'Select all',
                buttonWidth: '100%',
                nonSelectedText: 'Select All',
                dropRight: true,
                numberDisplayed: 2,
            });

            /*Region List */
            $("#franchise_regionList").multiselect({
                includeSelectAllOption: false,
                selectAllText: 'Select all',
                buttonWidth: '100%',
                nonSelectedText: 'Select All',
                dropRight: true,
                numberDisplayed: 2,
            });

            //Hide Bottom Contact
            setupForm();
            $("#divBelow").hide();
            disablecontent();
            $("#editcontactinfo_button").text("Edit");
            $("#cancelcontactinfo_button").hide();
            $("#btn_editpotential").text("Edit");
            $("#btn_cancelpotential").hide();

            $(document).on('init.dt', function (e, settings) {
                var api = new $.fn.dataTable.Api(settings);
                if ($(api.table().node()).attr('id') == 'FranchisePotentialList') {
                    setPaging();
                }
            });


            function initTable() {

                var ps = $('#pageSize').val();
                var dtable = $('#FranchisePotentialList').dataTable({
                    "bAutoWidth": false,
                    cache: true,
                    "iDisplayLength": ps == '-1' ? 10 : ps,
                    "bDestroy": true,
                    "aLengthMenu": [[5, 7, 10, 25, 50, -1], [5, 7, 10, 25, 50, "All"]],
                    //"dom": "<'headerbox list'<'row'<'col-md-1'l><'col-md-4'f><'#divrightckbox.col-md-5 pull-right text-center'>>><'table-responsive't><'bottom'ip><'clear'>",
                    "dom": "<'table-responsive't><'bottom'ip><'clear'>",
                    "aaSorting": [[0, "asc"]],
                    "sAjaxSource": getCurrentUrl(),
                    "sAjaxDataProp": "aadata",  // Internationalisation. For more info refer to http://datatables.net/manual/i18n
                    "rowCallback": function (nRow, data) {
                    },
                    "aoColumns": [
                        {
                            "sName": "AccountId",
                            "bSortable": true,
                            "mRender": function (data, type, full) {
                                return '<span>' + full.CRM_AccountId + '</span>';
                            }
                        },
                        {
                            "sName": "FranchiseeName",
                            "bSortable": true,
                            "sClass": "tabpointer",
                            "mRender": function (data, type, full) {
                                return "<a href='javascript: void(0);' onclick='getFranchiseDetail(" + full.CRM_AccountId + ")'  style='color:#0c9cff' id=" + full.CRM_AccountId + ">" + full.FranchiseeName + "</a>";
                            }
                        },
                        {
                            "sName": "ContactName",
                            "bSortable": true,
                            "mRender": function (data, type, full) {
                                return "<span>" + full.ContactName + "</span>";
                            }
                        },
                        {
                            "sName": "PhoneNumber",
                            "bSortable": true,
                            "sClass": "alignCenter",
                            "mRender": function (data, type, full) {
                                if (full.PhoneNumber != null) {
                                    if (full.PhoneNumber.length == 10)
                                        var value = '(' + full.PhoneNumber.substr(0, 3) + ')' + ' ' + full.PhoneNumber.substr(3, 3) + '-' + full.PhoneNumber.substr(6, 4);
                                    return '<span>' + value + '</span>';
                                } else { return ''; }
                            }
                        },
                        {
                            "sName": "EmailAddress",
                            "bSortable": true,
                            "sClass": "capitaltext",
                            "mRender": function (data, type, full) {
                                return full.EmailAddress;
                            }
                        },
                        {
                            "sName": "ProviderName",
                            "bSortable": true,
                            "sClass": "alignCenter capitaltext",
                            "mRender": function (data, type, full) {
                                return full.ProviderName;
                            }
                        },
                        {
                            "sName": "StageStatusName",
                            "bSortable": true,
                            "sClass": "alignCenter capitaltext",
                            "mRender": function (data, type, full) {
                                if (full.StageStatusName == "potentialinquary")
                                    return '<span id="spnStageStatus_' + full.CRM_AccountId + '" class="label label-sm label-warning" style = "background-color:#567ca5;" > ' + full.StageStatusName + '</span > '
                                if (full.StageStatusName == "franchisecontract")
                                    return '<span id="spnStageStatus_' + full.CRM_AccountId  + '" class="label label-sm label-warning" style="background-color:#567ca5;">' + full.StageStatusName + '</span>'
                                if (full.StageStatusName == "followup")
                                    return '<span id="spnStageStatus_' + full.CRM_AccountId + '" class="label label-sm label-warning" style="background-color:#567ca5;">' + full.StageStatusName + '</span>'
                                if (full.StageStatusName == "signagreement")
                                    return '<span id="spnStageStatus_' + full.CRM_AccountId + '" class="label label-sm label-warning" style="background-color:#567ca5;">' + full.StageStatusName + '</span>'
                            }
                        },
                        {
                            "sName": "LeftDay",
                            "bSortable": true,
                            "mRender": function (data, type, full) {
                                if (full.LeftDay.includes("over"))
                                    return '<span class="label label-sm label-warning" style="background-color:#8a7447;">' + full.LeftDay + '</span>'
                                else
                                    return full.LeftDay;
                            }
                        },
                        {
                            "sName": "StageStatusId",
                            "visible": false,
                            "bSortable": true,
                            "mRender": function (data, type, full) {
                                return full.StageStatus;

                            }

                        }


                    ]
                });
            }
            /*Search keyp up event*/
            $("#input_Search").keyup(function () {
                var table = $("#FranchisePotentialList").DataTable();
                table.search($(this).val()).draw();
            });


            /* Franchise Potential Search by Status */
            $("#franchise_statusList").change(function () {
                debugger;
                var val = $(this).val();
                var table = $("#FranchisePotentialList").DataTable();

                if (val != null) {
                    var search = val.join('|');
                    var pattern = ("\\b" + search + '\\b');

                    table.columns(8).search(pattern, true, false).draw();
                }
                else {
                    table.columns(8).search('', true, false).draw();
                }
            });

            /* Showing Calendar ModalView */

            //$(document).on('click', '#assignee_calendar', function (e) {
            //    $("#assigneecalendar_modalview").modal(open).show();
            //});

            //$("#assigneecalendar_modalview").on('shown.bs.modal', function () {
            //    $("#calendar2").fullCalendar('render');
            //});

            $(document).on("click", "#assignee_calendar", function (e) {
                $.ajax({
                    url: "/CRM/CustomerSales/GetSchedulesForLeadAssignee?userId=" + $("#hdfAssigneeId").val(),
                    type: "GET",
                    dataType: "json",
                    cache: false,
                    success: function (response) {
                        UpDateCalendar(response.result, "#assigneecalendar");
                        $("#assigneecalendar_modalview").modal(open).show();                        
                    },
                    error: function (error) {
                        console.log(error);
                    }
                });
            });

            // Showing Modal
            $("#assigneecalendar_modalview").on('shown.bs.modal', function () {                
                $("#assigneecalendar").fullCalendar();
            });




            /*page size change event*/
            $("#pageSize").change(function () {
                setPaging();
            })

            /*Call table initialize function*/
            initTable();


            // Showing Modal of Calendar  
            $("#calendar_model").on("click", function () {
                $("#calendar_modalview").modal(open).show();
            });

            $("#calendar_modalview").on('shown.bs.modal', function () {                
                $("#calendar").fullCalendar('render');
            });
            

            /*Dropdown for Sign Agreement Stage plan Type*/
            $('body').on('change', '#input_plantype', function () {

                if (!(this.value == "")) {
                    $.blockUI();
                    $.ajax({
                        url: '/CRM/CRMPotentialFranchise/GetFranchiseContractTypeById?id=' + this.value,
                        type: 'GET',
                        dataType: 'json',
                        cache: false,
                        success: function (response) {
                            if (response.success) {
                                $("#input_planamount").val(response.franchiseContractTypevm.Price);
                                $("#input_ibamount").val(response.franchiseContractTypevm.BusinessAmount);
                                $("#input_downpayment").val(response.franchiseContractTypevm.DownPayment);
                                $("#input_interest").val(response.franchiseContractTypevm.Interest);
                                $("#input_nopayments").val(response.franchiseContractTypevm.NoOfPayments);
                            }
                            $.unblockUI();
                        },
                        error: function (error) {
                            alert("Content failed");
                            $.unblockUI();
                        }
                    });
                }
            });

            /*DropDown for Follow up close */
            $('body').on('change', '#select_signingpurpose', function () {
                if ($(this).val() == "5" || $(this).val() == "2" || $(this).val() == "") {
                    $("#div_franchise_reschedule").hide();
                }
                else {
                    $("#div_franchise_reschedule").show();
                }
            });
        });



        function setPaging() {
            var z = $("#pageSize").val();
            var table = $("#FranchisePotentialList").DataTable();
            if (z > 0) {
                table.page.len(z).draw();
            }
            else if (z == -1) {
                table.page.len(table.rows().count()).draw();
            }
            else {
                table.page.page.len(10).draw();
            }
        }

        $("#input_starttime").timepicker({
            useCurrent: true
        });

        $(".potentialdetailtab").click(function (e) {

            var tabClickId = $(this).attr('id');

            if (tabClickId == "tab_contactinfo") {
                $('#divLoadStage_contactinfo').html('');
                $('#' + lastDivStage).contents().appendTo('#divLoadStage_contactinfo');
                $('#' + lastDivStage).html('');
                lastDivStage = "divLoadStage_contactinfo";
            }
            else if (tabClickId == "tab_potentialdetail") {
                $("#divLoadStage_potentialdetail").html('');
                $('#' + lastDivStage).contents().appendTo("#divLoadStage_potentialdetail");
                $('#' + lastDivStage).html('');
                lastDivStage = "divLoadStage_potentialdetail";
            }
            else if (tabClickId == "tab_activity") {
                $("#divLoadStage_activity").html('');
                $('#' + lastDivStage).contents().appendTo("#divLoadStage_activity");
                $('#' + lastDivStage).html('');
                lastDivStage = "divLoadStage_activity";
            }
            else if (tabClickId == "tab_todo") {
                $("#divLoadStage_todo").html('');
                $('#' + lastDivStage).contents().appendTo("#divLoadStage_todo");
                $('#' + lastDivStage).html('');
                lastDivStage = "divLoadStage_todo";
            }
            else if (tabClickId == "tab_note") {
                $("#divLoadStage_personalnote").html('');
                $('#' + lastDivStage).contents().appendTo("#divLoadStage_personalnote");
                $('#' + lastDivStage).html('');
                lastDivStage = "divLoadStage_personalnote";
            }
            else if (tabClickId == "tab_document") {
                $("#divLoadStage_document").html('');
                $('#' + lastDivStage).contents().appendTo("#divLoadStage_document");
                $('#' + lastDivStage).html('');
                lastDivStage = "divLoadStage_document";
            }
            else if (tabClickId == "tab_schedule") {
                $("#divLoadStage_schedule").html('');
                $('#' + lastDivStage).contents().appendTo("#divLoadStage_schedule");
                $('#' + lastDivStage).html('');
                lastDivStage = "divLoadStage_schedule";
            }

            setupForm();

        });

    </script>

}

<div class="portlet box" style="margin-bottom:5px; margin-top:-7px;">
    <div class="portlet-title text-center" style="background: #3da8c6;">
        <div class="caption">
            <b>POTENTIAL LIST</b>
        </div>
        <div id="franchiselead_title" class="caption col-md-8" style="display:none;">
            Lead # <span id="franchiselead_title_id"></span>
        </div>
        <div class="tools">
            <a id="portlettoplist" href="javascript:;" class="collapse" data-original-title="" title=""> </a>
            @*<a href="#portlet-config" data-toggle="modal" class="config" data-original-title="" title=""> </a>
                <a href="javascript:;" class="reload" data-original-title="" title=""> </a>
                <a href="" class="fullscreen" data-original-title="" title=""> </a>
                <a href="javascript:;" class="remove" data-original-title="" title=""> </a>*@
        </div>
    </div>
    <div class="portlet-body" style="display: block;padding-left: 0px;padding-right: 0px;" id="divlistview">

        @*Potential Header*@

        <div class="custom-listbox" style="margin-top: -10px;">
            <div class="headerbox">
                <div class="row no-padding">
                    <div class="col-md-1 page-size">
                        <select class="form-control input-sm" id="pageSize" style="padding-left:6px;">
                            <option value="-1">All</option>
                            <option value="10" selected>10</option>
                            <option value="25">25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>

                        </select>
                    </div>
                    <div class="col-md-3">
                        <div class="input-icon">
                            <i class="icon-magnifier icon-align-right" style="margin-top: 8px;"></i>
                            <input id="input_Search" type="text" required name="customernumber" autocomplete="off" placeholder="Search..." value="" class="form-control input-sm typeahead" />
                        </div>
                    </div>
                    @*<div class="col-md-4"></div>*@
                    @*<div class="col-md-4 pull-right" style="padding-right:5px;"></div>*@
                    <div class="col-md-2">
                        @if (ViewBag.LeadStageStatusList != null)
                        {
                            <select class="form-control input-sm" multiple="multiple" id="franchise_statusList" style="display:none;">
                                @{
                                    foreach (var item in (SelectList)ViewBag.LeadStageStatusList)
                                    {
                                        <option @(item.Selected ? "selected" : "") value="@item.Value">@item.Text</option>
                                    }
                                }
                            </select>
                        }

                    </div>

                    <div class="col-md-2">
                        @if (ViewBag.LstRegion != null)
                        {
                            <div class="col-md-3 no-padding" style="text-transform:none;font-weight:normal;text-align: right;margin-top: 3px;">
                                Region
                            </div>
                            <div class="col-md-9 no-padding" style="padding-left: 6px;">
                                <select class="form-control input-sm" multiple="multiple" id="franchise_regionList" style="display:none;">
                                    @foreach (var item in (SelectList)ViewBag.LstRegion)
                                    {
                                        <option @(item.Selected ? "selected" : ViewBag.SelectedRegionId) value="@item.Value">@item.Text</option>
                                    }
                                </select>
                            </div>
                        }
                    </div>
                    <div class="col-md-4"></div>
                    @{
                        ClaimView _ClaimView = ClaimView.Instance;

                        var userviewModel = (JKViewModels.UserViewModel)_ClaimView.GetCLAIM_PERSON_INFORMATION();

                        if (userviewModel != null && userviewModel.RoleAccesss != null)
                        {
                            var RoleType = userviewModel.Roles.FirstOrDefault(x => x.RoleTypeId == 1);
                            if (RoleType != null)
                            {
                                <div class="col-md-4 pull-right" style="padding-right:5px;">
                                    @if (ViewBag.UserList != null)
                                    {
                                        <div class="col-md-12 pull-right no-padding">
                                            <div class="col-md-6 no-padding" style="text-transform:none;font-weight:normal;text-align: right;margin-top: 3px;">
                                                Sales Person
                                            </div>
                                            <div class="col-md-6 no-padding" style="padding-left: 6px;">
                                                @Html.DropDownList("select_saleperson", (SelectList)ViewBag.UserList, "ALL...", new { @id = "select_saleperson", @class = "form-control input-sm" })
                                            </div>
                                        </div>
                                    }
                                </div>
                            }
                        }
                    }
                </div>
            </div>
        </div>

        @*Potential Table*@
        <div class="tablebox">
            <div class="table-responsive" id="divcustomerList">
                <table class="table table-striped table-bordered table-hover order-column" id="FranchisePotentialList" style="margin-top:0 !important;">
                    <thead>
                        <tr>
                            <th style="width:25px;text-align:center;">
                                ID #
                            </th>
                            <th style="width:160px;text-align:center;">
                                Franchisee Name
                            </th>
                            <th style="width:160px;text-align:center;">
                                Contact Name
                            </th>
                            <th style="text-align:center;width:75px;">
                                PHONE NUMBER
                            </th>
                            <th style="text-align:center;width:65px;">
                                EMAIL
                            </th>
                            <th style="text-align:center;width:40px;">
                                PROVIDER
                            </th>
                            <th style="text-align:center;width:30px;">
                                STATUS
                            </th>
                            <th style="text-align:center;width:30px;">
                                Remaining Day
                            </th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<div class="portlet light bordered" id="divBelow" style="display:none;">

    @Html.Hidden("hdfselectedaccountdetailid", "", new { @id = "hdfselectedaccountdetailid" })
    @Html.Hidden("hdfSelectedAccountId", "", new { @id = "hdfSelectedAccountId" })
    @Html.Hidden("hdfAssigneeId", "", new { @id = "hdfAssigneeId" })
    @Html.Hidden("hdfStageId", "", new { @id = "hdfStageId" })

    <div class="portlet-title compact">
        <div class="btn-group pull-right">
            <button class="btn green  btn-outline dropdown-toggle " data-toggle="dropdown">
                Action
                <i class="fa fa-angle-down"></i>
            </button>
            <ul class="dropdown-menu pull-right">
                <li>
                    <a href="#addActivity_modalview" data-toggle="modal">
                        <i class="fa fa-plus"></i>
                        Create To-Do
                    </a>
                </li>
                <li>
                    <a href="#addNote_modalview" data-toggle="modal">
                        <i class="fa fa-pencil-square-o"></i>
                        Create Personal Note
                    </a>
                </li>
                <li>
                    <a href="#report_modalview" data-toggle="modal">
                        <i class="fa fa-pencil-square-o"></i>
                        Create a Report
                    </a>
                </li>
                <li>
                    <a href="#uploaddocument_modalview" data-toggle="modal">
                        <i class="fa fa-upload"></i>
                        Add a Document
                    </a>
                </li>
                <li>
                    <a href="javascript:;" onclick="SendEmail();">
                        <i class="fa fa-envelope"></i> Write an Email
                    </a>
                </li>
            </ul>
        </div>
        <div class="tabbable-line">
            <ul class="nav nav-tabs ">
                <li class="active">
                    <a id="tab_contactinfo" href="#tabcontent_contactinfo" class="potentialdetailtab" data-toggle="tab">Contact info</a>
                </li>
                <li>
                    <a id="tab_potentialdetail" href="#tabcontent_potentialdetail" class="potentialdetailtab" data-toggle="tab"> Potential Detail </a>
                </li>
                <li>
                    <a id="tab_activity" href="#tabcontent_activity" class="potentialdetailtab" data-toggle="tab">Activity </a>
                </li>
                <li>
                    <a id="tab_todo" href="#tabcontent_todo" class="potentialdetailtab" data-toggle="tab">Tasks</a>
                </li>
                <li>
                    <a id="tab_note" href="#tabcontent_personalnote" class="potentialdetailtab" data-toggle="tab">Personal Note</a>
                </li>
                <li>
                    <a id="tab_document" href="#tabcontent_document" class="potentialdetailtab" data-toggle="tab">Document </a>
                </li>
                <li>
                    <a id="tab_schedule" href="#tabcontent_schedule" class="potentialdetailtab" data-toggle="tab"> Schedule </a>
                </li>
            </ul>
        </div>
    </div>

    <div class="portlet-body">
        <div class="tab-content">
            <div class="tab-pane active" id="tabcontent_contactinfo">
                @Html.Partial("_CRMFranchiseStages")
                <input type="hidden" id="hdnMostRecent" />
                <div class="row">
                    <div class="col-md-5">
                        <div class="row">
                            <!-- CONTACT SECTION -->
                            <form action="#" id="form_referenceinfo">

                                <div class="col-md-12 portlet-align">
                                    <div class="portlet box portlet-bottom" style="background-color: #a3a9ad;">
                                        <div class="portlet-title compact">
                                            <div class="caption">
                                                Employee Info
                                            </div>
                                        </div>
                                        <div class="portlet-body">
                                            <div class="portlet-body form">
                                                <!-- BEGIN FORM-->
                                                <div class="form-body" style="margin-top:-20px; margin-bottom:-20px;">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">Franchisee Name:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("franchisename", "", new { @class = "forminput", @id = "input_franchisename", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">Full/Part Time:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    <select class="forminput input-sm" id="select_jobtype" disabled="disabled">
                                                                        <option value="1">Full Time</option>
                                                                        <option value="2">Part Time</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- END FORM-->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-12 portlet-align">
                                    <div class="portlet box portlet-bottom" style="background-color: #a3a9ad;">
                                        <div class="portlet-title compact">
                                            <div class="caption">
                                                Contact Info
                                            </div>
                                        </div>
                                        <div class="portlet-body">
                                            <div class="portlet-body form">
                                                <!-- BEGIN FORM-->
                                                <div class="form-body" style="margin-top:-20px; margin-bottom:-20px;">
                                                    @Html.Hidden("AccountId", "", new { @id = "accountid" })
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">Contact Name:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("firstname", "", new { @class = "forminput", @id = "input_contactname", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">Position:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("position", "", new { @class = "forminput", @id = "input_position", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.phone:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("phonenumber", "", new { @class = "forminput", @id = "input_contactphonenumber", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.email:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("contactEmail", "", new { @class = "forminput", @id = "input_contactemail", type = "email", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- END FORM-->
                                            </div>
                                        </div>
                                    </div>
                                </div>




                                <div class="col-md-12 portlet-align">
                                    <div class="portlet box portlet-align" style="background-color: #a3a9ad;">
                                        <div class="portlet-title compact">
                                            <div class="caption">
                                                @JKCRMResource.address
                                            </div>
                                        </div>
                                        <div class="portlet-body">
                                            <div class="portlet-body form">
                                                <!-- BEGIN FORM-->
                                                <div class="form-body" style="margin-top:-20px; margin-bottom:-20px;">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.address1:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("addessline1", "", new { @class = "forminput", @id = "input_addressline1", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.address2:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("addessline2", "", new { @class = "forminput", @id = "input_addressline2", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.city:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("city", "", new { @class = "forminput", @id = "input_city", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.county:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("county", "", new { @class = "forminput", @id = "input_county", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.state:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.DropDownList("state", (SelectList)ViewBag.State, "Select", new { @class = "forminput", @id = "select_state", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        @*<div class="col-md-12">
                                                                <div class="form-group">
                                                                    <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">Home:</label>
                                                                    <div class="col-md-7 col--sm-6">
                                                                        @Html.TextBox("homenumber", "", new { @class = "forminput", @id = "input_homenumber", @disabled = "disabled" })
                                                                    </div>
                                                                </div>
                                                            </div>*@
                                                        @*<div class="col-md-12">
                                                                <div class="form-group">
                                                                    <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.fax:</label>
                                                                    <div class="col-md-7 col--sm-6">
                                                                        @Html.TextBox("faxnumber", "", new { @class = "forminput", @id = "input_faxnumber", @disabled = "disabled" })
                                                                    </div>
                                                                </div>
                                                            </div>*@
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.zipCode:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("zipcode", "", new { @class = "forminput", @id = "input_zipcode", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- END FORM-->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </form>
                            <div class="form-actions">
                                <div class="col-md-4">
                                    <button id="editcontactinfo_button" type="button" class="btn green btn-block" onclick="EditData();">Edit</button>
                                </div>
                                <div class="col-md-4">
                                    <button id="cancelcontactinfo_button" type="button" class="btn green btn-block" onclick="CancelBtn();">Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="divLoadStage_contactinfo">

                    </div>

                </div>
            </div>
            <div class="tab-pane" id="tabcontent_potentialdetail">
                @Html.Partial("_CRMFranchiseStages")
                <div class="row">

                    <div class="col-md-5">
                        <div class="row">
                            <div class="col-md-12 portlet-align" id="right-content">
                                <div class="portlet box div-right portlet-bottom" style="background-color: #a3a9ad;">
                                    <div class="portlet-title compact">
                                        <div class="caption">
                                            Detail
                                        </div>
                                    </div>
                                    <div class="portlet-body">
                                        <form action="#" id="form_summary" class="form-horizontal">
                                            <div class="form-body">
                                                @Html.Hidden("AccountfranchiseDetailId", "", new { @id = "accountfranchisedetailid" })
                                                <!-- Lead Status -->
                                                <div class="form-group">
                                                    <label for="select_stagestatus" class="control-label col-md-4">@JKCRMResource.leadstatus:</label>
                                                    <div class="col-md-6">
                                                        @Html.DropDownList("stagestatus", (SelectList)ViewBag.LeadStageStatusList, new { @class = "form-control input-sm", @id = "select_stagestatus", @disabled = "disabled" })
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="select_providertype" class="control-label col-md-4">@JKCRMResource.leadsource:</label>
                                                    <div class="col-md-6">
                                                        @Html.DropDownList("providertype", (SelectList)ViewBag.ProviderTypeList, new { @class = "form-control input-sm", @id = "select_providertype", @disabled = "disabled" })
                                                    </div>
                                                </div>
                                                <!-- Current Provider -->
                                                <div class="form-group">
                                                    <label for="select_providersource" class="control-label col-md-4">@JKCRMResource.currentprovider:</label>
                                                    <div class="col-md-6">
                                                        @Html.DropDownList("providersource", (SelectList)ViewBag.ProviderSourceList, new { @class = "form-control input-sm", @id = "select_providersource", @disabled = "disabled" })
                                                    </div>
                                                </div>
                                                <!-- Budget Amount -->
                                                <div class="form-group">
                                                    <label for="input_budgetamount" class="control-label col-md-4">@JKCRMResource.budget:</label>
                                                    <div class="col-md-6">
                                                        @Html.TextBox("_budgetamount", "$50,000", new { @class = "form-control input-sm", @id = "input_budgetamount", @disabled = "disabled" })
                                                    </div>
                                                </div>
                                                <div class="form-actions">
                                                    <div class="row" id="contactinfo_action">
                                                        <div class="col-md-4 pull-right">
                                                            <button id="btn_editpotential" type="button" class="btn green btn-block" onclick="btnPotential_Edit();">Edit</button>
                                                        </div>
                                                        <div class="col-md-4 col-md-offset-4">
                                                            <button id="btn_cancelpotential" type="button" class="btn green btn-block" onclick="btnPotential_Cancel();">Cancel</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="divLoadStage_potentialdetail">

                    </div>


                </div>
            </div>

            <div class="tab-pane" id="tabcontent_activity">
                @Html.Partial("_CRMFranchiseStages")
                <div class="row">

                    <div class="col-md-5">
                        <div class="row">
                            <div class="col-md-12 portlet-align">
                                <div class="portlet box div-right portlet-bottom" style="background-color: #a3a9ad;">
                                    <div class="portlet-title compact">
                                        <div class="caption">
                                            Activities
                                        </div>
                                    </div>
                                    <div class="portlet-body">
                                        <form action="#" id="form_activities" class="form-horizontal">
                                            <div class="form-body">
                                                <div class="scroller" style="height: 518px;" data-always-visible="1" data-rail-visible1="0" data-handle-color="#333">
                                                    <div class="general-item-list">
                                                        <div class="mt-comments">
                                                            <div class="mt-comment" id="franchise_content_activity">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="divLoadStage_activity">

                    </div>
                </div>
            </div>

            <div class="tab-pane" id="tabcontent_todo">
                @Html.Partial("_CRMFranchiseStages")
                <div class="row">
                    <div class="col-md-5">
                        <div class="row">
                            <div class="col-md-12 portlet-align">
                                <div class="portlet box div-right portlet-bottom" style="background-color: #a3a9ad;">
                                    <div class="portlet-title compact">
                                        <div class="caption">
                                            TO - DO
                                        </div>
                                    </div>
                                    <div class="portlet-body">
                                        <form action="#" id="form_todo" class="form-horizontal">
                                            <div class="form-body">
                                                <div class="scroller" style="height: 500px;" data-always-visible="1" data-rail-visible1="0" data-handle-color="#333">
                                                    <div class="general-item-list">
                                                        <div class="mt-comments">
                                                            <div class="mt-comment" id="franchise_content_todo">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="divLoadStage_todo">

                    </div>
                </div>
            </div>

            <div class="tab-pane" id="tabcontent_personalnote">
                @Html.Partial("_CRMFranchiseStages")
                <div class="row">
                    <div class="col-md-5">
                        <div class="row">
                            <div class="col-md-12 portlet-align">
                                <div class="portlet box div-right portlet-bottom" style="background-color: #a3a9ad;">
                                    <div class="portlet-title compact">
                                        <div class="caption">
                                            Notes
                                        </div>
                                    </div>
                                    <div class="portlet-body">
                                        <form action="#" id="form_notes" class="form-horizontal">
                                            <div class="form-body">
                                                <div class="scroller" style="height: 500px;" data-always-visible="1" data-rail-visible1="0" data-handle-color="#333">
                                                    <div class="general-item-list">
                                                        <div class="mt-comments">
                                                            <div class="mt-comments" id="franchise_content_note">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div id="divLoadStage_personalnote">

                    </div>
                </div>
            </div>

            <div class="tab-pane" id="tabcontent_document">
                @Html.Partial("_CRMFranchiseStages")
                <div class="row">
                    <div class="col-md-5">
                        <div class="row">
                            <div class="col-md-12 portlet-align">
                                <div class="portlet box div-right portlet-bottom" style="background-color: #a3a9ad;">
                                    <div class="portlet-title compact">
                                        <div class="caption">
                                            Documents
                                        </div>
                                    </div>
                                    <div class="portlet-body">
                                        <form action="#" id="form_document" class="form-horizontal">
                                            <div class="form-body">
                                                <div class="scroller" style="height: 500px;" data-always-visible="1" data-rail-visible1="0" data-handle-color="#333">
                                                    <div class="general-item-list">
                                                        <div class="mt-comments">
                                                            <div class="mt-comments" id="franchise_content_document">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="divLoadStage_document">

                    </div>

                </div>
            </div>

            <div class="tab-pane" id="tabcontent_schedule">
                @Html.Partial("_CRMFranchiseStages")
                <div class="row">
                    <div class="col-md-5">
                        <div class="row">
                            <div class="col-md-12 portlet-align">
                                <div class="portlet box div-right portlet-bottom" style="background-color: #a3a9ad;">
                                    <div class="portlet-title compact">
                                        <div class="caption">
                                            Schedules
                                        </div>
                                    </div>
                                    <div class="portlet-body">
                                        <form action="#" id="form_schedules" class="form-horizontal">
                                            <div class="form-body">
                                                <div class="scroller" style="height: 500px;" data-always-visible="1" data-rail-visible1="0" data-handle-color="#333">
                                                    <div class="general-item-list">
                                                        <div class="mt-comments">
                                                            <div class="mt-comments" id="franchise_content_schedule">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-actions">
                                                <div class="row">
                                                    @*<div class="col-md-4 pull-right">
                                                            <a class="btn green btn-block" data-toggle="modal" href="#addSchedules_modalview">Create New Schedule</a>
                                                        </div>*@
                                                    <div class="col-md-4 pull-right">
                                                        <a class="btn green btn-block" data-toggle="modal" id="calendar_model">View Calender</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div id="divLoadStage_schedule">

                    </div>

                </div>
            </div>
        </div>
    </div>

</div>





<!--Upload Document -->
<div class="modal fade  custom-model custom-form-design" id="uploaddocument_modalview" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content modal-custom-content">
            <div class="modal-header modal-custom-header" id="uploaddocument_modalview_header">
                <button type="button" class="close modal-close-button" data-dismiss="modal" aria-hidden="true" onclick="resetUploadform();"></button>
                <h4 class="modal-title">Upload Document</h4>
            </div>
            <div class="modal-body" id="import_modalview_body">
                <div class="row">
                    @*@using (Html.BeginForm("UploadExcel", "CRMLeadCustomer", FormMethod.Post, new { enctype = "multipart/form-data", onsubmit = "return myFunction()" }))
                        {*@
                    <form action="" enctype="multipart/form-data">
                        <div class="col-md-12">
                            <div class="col-md-12">
                                <!--Note Title-->
                                <div class="form-group">
                                    <label for="form_title" class="control-label col-md-2 input-sm text-right">Name<span class="required">*</span>:</label>
                                    <div class="col-md-10">
                                        <input id="input_filename" name="name" type="text" data-required="1" class="form-control input-sm" placeholder="" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--Description-->
                        <div class="col-md-12">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="form_description" class="control-label col-md-2 input-sm text-right">Description:</label>
                                    <div class="col-md-10">
                                        <textarea id="input_filedescription" class="form-control input-sm" rows="6"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12">
                            <div class="col-md-12 text-center">
                                <div class="form-group">
                                    <div class="col-md-offset-2 col-md-10" style="margin-top:10px;">
                                        <div class="fileinput fileinput-new" data-provides="fileinput">
                                            <div class="input-group input-large">
                                                <div class="form-control uneditable-input input-fixed input-medium" data-trigger="fileinput">
                                                    <i class="fa fa-file fileinput-exists"></i>&nbsp;
                                                    <span class="fileinput-filename"></span>
                                                </div>
                                                <span class="input-group-addon btn default btn-file">
                                                    <span class="fileinput-new"> Select file </span>
                                                    <span class="fileinput-exists"> Change </span>
                                                    <input type="hidden" value="" name="..."><input type="file" id="fileDocument" name="FileUpload" />
                                                </span>
                                                <a href="javascript:;" class="input-group-addon btn red fileinput-exists" data-dismiss="fileinput"> Remove </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-12">
                                        <input type="submit" value="Upload" id="btnSubmitdocument" class="btn btn-primary" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    @*}*@
                </div>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
</div>


<!-- Add To-Do Model View -->
<div class="modal fade custom-model custom-form-design" id="addActivity_modalview" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content  modal-custom-content">
            <div class="modal-header modal-custom-header" id="addActivity_modalview_header">
                <button type="button" class="close modal-close-button" data-dismiss="modal" aria-hidden="true" onclick="resetAddActivityForm();"></button>
                <h4 class="modal-title">Create To-Do</h4>
            </div>
            <div class="modal-body" id="addschedule_modalview_body">
                <div class="row">
                    <form action="#" id="addActivity_form">
                        <div class="form-body">
                            <div class="col-md-12">
                                <!--Activity Title-->
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label for="form_title" class="control-label col-md-3 input-sm text-right">@JKCRMResource.type<span class="required">*</span>:</label>
                                        <div class="col-md-8">
                                            <select id="select_Type" class="form-control select2 input-sm">
                                                <option value="1">@JKCRMResource.call</option>
                                                <option value="2">@JKCRMResource.email</option>
                                                <option value="3">@JKCRMResource.meeting</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" id="divOutcome">
                                <!-- Outcome -->
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label for="form_title" class="control-label col-md-3 input-sm text-right">@JKCRMResource.outcome:</label>
                                        <div class="col-md-8">
                                            <select id="select_OutCome" class="form-control select2 input-sm">
                                                <option value="1">@JKCRMResource.noanswer</option>
                                                <option value="2">@JKCRMResource.busy</option>
                                                <option value="3">@JKCRMResource.wrongnumber</option>
                                                <option value="4">@JKCRMResource.leftvoicemail</option>
                                                <option value="5">@JKCRMResource.connected</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <!-- Start Date/Time -->
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label for="form_startdate" class="control-label col-md-3 input-sm text-right">Start Date/Time<span class="required"></span>:</label>
                                        <div class="col-md-4">
                                            <input type="text" class="form-control input-mysize input-group input-group-sm input-sm date-picker RemovePeriodvalidation" name="datepicker" data-date-format="mm/dd/yyyy" value="" id="todo_startdate" />
                                        </div>
                                        <div class="col-md-4">
                                            <div class="input-icon">
                                                <i class="fa fa-clock-o" style="margin-top:7px;"></i>
                                                <input type="text" class="form-control input-group input-mysize2 input-group-sm input-sm  timepicker timepicker-default" value="" id="todo_starttime" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" id="divenddate" style="display:none;">
                                <!-- End Date/Time -->
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label for="form_startdate" class="control-label col-md-3 input-sm text-right">End Date/Time<span class="required"></span>:</label>
                                        <div class="col-md-4">
                                            <input type="text" class="form-control input-mysize input-group input-group-sm input-sm date-picker RemovePeriodvalidation" name="datepicker" data-date-format="mm/dd/yyyy" value="" id="todo_enddate" />
                                        </div>
                                        <div class="col-md-4">
                                            <div class="input-icon">
                                                <i class="fa fa-clock-o" style="margin-top:7px;"></i>
                                                <input type="text" class="form-control input-group input-mysize2 input-group-sm input-sm  timepicker timepicker-default" value="" id="todo_endtime" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--Note-->
                            <div class="col-md-12">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label for="form_description" class="control-label col-md-3 input-sm" style="text-align: right;">@JKCRMResource.note:</label>
                                        <div class="col-md-8">
                                            <textarea id="form_description" class="form-control input-sm" rows="6"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer" id="addActivity_modalview_footer">
                <button id="cancel_addactivity_button" type="button" class="btn btn-default" data-dismiss="modal" onclick="resetAddActivityForm();">@JKCRMResource.cancel</button>
                <button id="addactivity_button" type="button" class="btn btn-success">@JKCRMResource.save</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
</div>


<!-- Add Personal Note Modal View -->
<div class="modal  custom-model custom-form-design" id="addNote_modalview" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content modal-custom-content">
            <div class="modal-header modal-custom-header" id="addschedule_modalview_header">
                <button type="button" class="close modal-close-button" data-dismiss="modal" aria-hidden="true" onclick="resetAddNoteForm();"></button>
                <h4 class="modal-title">Add Personal Note</h4>
            </div>
            <div class="modal-body" id="addnote_modalview_body">
                <div class="row">
                    <form action="#" id="addNote_form">
                        <div class="form-body">
                            <div class="col-md-12">
                                <div class="col-md-12">
                                    <!--Note Title-->
                                    <div class="form-group">
                                        <label for="form_title" class="control-label col-md-3 input-sm text-right">Title<span class="required">*</span>:</label>
                                        <div class="col-md-8">
                                            <input id="input_notetitle" name="name" type="text" data-required="1" class="form-control input-sm" placeholder="" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--Description-->
                            <div class="col-md-12">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label for="form_description" class="control-label col-md-3 input-sm text-right">Description:</label>
                                        <div class="col-md-8">
                                            <textarea id="input_notedescription" class="form-control input-sm" rows="8"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer" id="addnote_modalview_footer">
                <button id="cancel_addnote_button" type="button" class="btn btn-default" data-dismiss="modal" onclick="resetAddNoteForm();">Cancel</button>
                <button id="addnote_button" type="button" class="btn btn-success" data-dismiss="modal" onclick="saveNoteData();">Create Note</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
</div>


<!--Pd Appointment Modal View-->
<div class="modal fade" id="leadgeneration_modalview" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" id="leadgeneration_modalview_header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Lead Generation</h4>
            </div>
            <div class="modal-body" id="leadgeneration detail_modalview_body">
                <div class="row">
                    <form action="#" id="form_contactleadgen" class="form-horizontal">
                        <div class="form-body">
                            @Html.Hidden("AccountDetailId", "", new { @id = "accountdetailid" })
                            <!-- Name -->
                            <div class="form-group">
                                <label for="input_name" class="control-label col-md-4">Name<span class="required">*</span>:</label>
                                <div class="col-md-6">
                                    <input id="inputModal_contactname" name="name" type="text" data-required="1" class="form-control input-sm" placeholder="" disabled="disabled" />
                                </div>
                            </div>

                            <!-- Name -->
                            <div class="form-group">
                                <label for="input_address" class="control-label col-md-4">Address<span class="required">*</span>:</label>
                                <div class="col-md-6">
                                    <input id="inputModal_contactaddress" name="name" type="text" data-required="1" class="form-control input-sm" placeholder="" disabled="disabled" />
                                </div>
                            </div>

                            <!-- Name -->
                            <div class="form-group">
                                <label for="input_city" class="control-label col-md-4">City<span class="required">*</span>:</label>
                                <div class="col-md-6">
                                    <input id="inputModal_contactcity" name="name" type="text" data-required="1" class="form-control input-sm" placeholder="" disabled="disabled" />
                                </div>
                            </div>

                            <!-- Name -->
                            <div class="form-group">
                                <label for="input_state" class="control-label col-md-4">State<span class="required">*</span>:</label>
                                <div class="col-md-6">
                                    <input id="inputModal_contactstate" name="name" type="text" data-required="1" class="form-control input-sm" placeholder="" disabled="disabled" />
                                </div>
                            </div>

                            <!-- Name -->
                            <div class="form-group">
                                <label for="input_zipcode" class="control-label col-md-4">Zip Code<span class="required">*</span>:</label>
                                <div class="col-md-6">
                                    <input id="inputModal_contactzipcode" name="name" type="text" data-required="1" class="form-control input-sm" placeholder="" disabled="disabled" />
                                </div>
                            </div>

                            <!-- Name -->
                            <div class="form-group">
                                <label for="input_contactperson" class="control-label col-md-4">Contact Person<span class="required">*</span>:</label>
                                <div class="col-md-6">
                                    <input id="inputModalcontact_contactperson" name="name" type="text" data-required="1" class="form-control input-sm" placeholder="" disabled="disabled" />
                                </div>
                            </div>

                            <!-- Name -->
                            <div class="form-group">
                                <label for="input_phonenumber" class="control-label col-md-4">Phone Number<span class="required">*</span>:</label>
                                <div class="col-md-6">
                                    <input id="inputModal_contactphonenumber" name="name" type="text" data-required="1" class="form-control input-sm" placeholder="" disabled="disabled" />
                                </div>
                            </div>
                            <!-- Available To Meet -->
                            <div class="form-group">
                                <label for="select_availabletomeet" class="control-label col-md-4">Available To Meet<span class="required">*</span>:</label>
                                <div class="col-md-6">
                                    <div class="input-group input-group-sm date form_datetime bs-datetime ">
                                        <input id="inputModal_contactavailabletomeet" type="text" class="form-control" name="datepicker" size="16" aria_describedby="sizing-addondstart" readonly disabled="disabled">
                                        <span class="input-group-addon">
                                            <button class="default date-reset" type="button" disabled="disabled">
                                                <i class="fa fa-times"></i>
                                            </button>
                                        </span>
                                        <span class="input-group-addon" id="sizing-addondstart">
                                            <button class="default date-set" type="button" disabled="disabled">
                                                <i class="fa fa-calendar"></i>
                                            </button>
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="schedule_purpose" class="control-label col-md-4">Purpose:</label>
                                <div class="col-md-6">
                                    <select id="selectModal_contactpurpose" class="form-control input-sm" name="options2" disabled="disabled">
                                        <option value="">Select</option>
                                        <option value="1">Call Back</option>
                                        <option value="2">Meeting</option>
                                    </select>
                                </div>
                            </div>
                            <!-- Note -->
                            <div class="form-group">
                                <label for="schedule_purpose" class="control-label col-md-4">Note:</label>
                                <div class="col-md-6">
                                    @Html.TextArea("note", "", new { @class = "form-control autosizeme", rows = "6", style = "font-size: 11px", @id = "textModal_contactleadgen", @disabled = "disabled" })
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
</div>


<!-- Calendar Modal View -->
<div class="modal fade bs-modal-lg  custom-model custom-form-design" id="calendar_modalview" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content modal-custom-content">
            <div class="modal-header modal-custom-header" id="addlead_modalview_header">
                <button type="button" class="close modal-close-button" data-dismiss="modal" aria-hidden="true"></button>
                <a class="btn btn-primary" data-toggle="modal" href="#newschedule_modalview" style="background:#95a5a6;">Add New Schedule</a>
            </div>
            <div class="modal-body" id="calendar_modalview_body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="col-md-12">
                            <div class="portlet light calendar">
                                <div class="portlet-title">
                                    <div class="caption">
                                        <i class="icon-layers font-green"></i>
                                        <span class="caption-subject font-green sbold uppercase">Calendar</span>
                                    </div>
                                </div>
                                <div id="calendar" class="has-toolbar"> </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
    </div>
</div>


<!-- Calendar For Assignee Modal View -->
<div class="modal fade bs-modal-lg  custom-model custom-form-design" id="assigneecalendar_modalview" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content modal-custom-content">          
            <div class="modal-body" id="calendar_modalview_body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="col-md-12">
                            <div class="portlet light calendar">
                                <div class="portlet-title">
                                    <div class="caption">
                                        <i class="icon-layers font-green"></i>
                                        <span class="caption-subject font-green sbold uppercase">Calendar</span>
                                    </div>
                                </div>
                                <div id="assigneecalendar" class="has-toolbar"> </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
    </div>
</div>



<form id="form_detailschedule">
    @Html.Hidden("AccountDetailId", "", new { @id = "scheduleaccountdetailid" })
    <div class="modal fade custom-model custom-form-design" id="detailschedule_modalview" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content modal-custom-content">
                <div class="modal-header modal-custom-header" id="newschedule_modalview_header">
                    <button type="button" class="close modal-close-button" data-dismiss="modal" aria-hidden="true" onclick="resetUploadform();"></button>
                    <h4 class="modal-title" style="text-transform:uppercase; font-weight: bold;color:white;">Schedule Detail</h4>
                </div>
                <div class="modal-body" id="newschedule_modalview_body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="col-md-12">
                                <!--Schedule Title-->
                                <div class="form-group">
                                    <label for="form_title" class="control-label col-md-2 input-sm">Subject<span class="required"></span>:</label>
                                    <div class="col-md-10">
                                        <input id="input_scheduletitle_detail" name="input_scheduletitle" type="text" data-required="1" class="form-control input-sm" style="margin-left:-35px;" placeholder="" disabled="disabled" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="col-md-12">
                                <!--Schedule Title-->
                                <div class="form-group">
                                    <label for="form_title" class="control-label col-md-2 input-sm">Location<span class="required"></span>:</label>
                                    <div class="col-md-10">
                                        <input id="input_schedulelocation_detail" name="input_schedulelocation" type="text" data-required="1" class="form-control input-sm" style="margin-left:-35px;" placeholder="" disabled="disabled" />
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--Schedule Type-->
                        <div class="col-md-12">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="form_scheduletype" class="control-label col-md-4 input-sm">Schedule Type<span class="required"></span>:</label>
                                    <div class="col-md-4">
                                        @*@Html.DropDownList("schedule",(SelectList)ViewBag.ScheduleType, new { @id = "input_scheduletype", @class = "form-control input-sm", @style = "margin-left:-35px;" })*@
                                        <select id="input_scheduletype_detail" name="input_scheduletype" class="form-control input-sm" style="margin-left:-98px;" disabled="disabled">
                                            <option value="1">Outlook</option>
                                            <option value="2">CRM</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--Start Date/Time-->
                        <div class="col-md-12">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="form_title" class="control-label col-md-3 input-sm">Start Date/Time<span class="required"></span>:</label>
                                    <div class="col-md-2">
                                        <input type="text" class="form-control input-sm date date-picker RemovePeriodvalidation" name="input_schedulestartdate_detail" data-date-format="mm/dd/yyyy" id="input_schedulestartdate_detail" style="margin-left:-40px;" disabled="disabled" />
                                    </div>
                                    <!--Start Time-->
                                    <div class="col-md-3" style="margin-left:-42px;">
                                        <div class="input-icon">
                                            <i class="fa fa-clock-o" style="margin-top:7px;"></i>
                                            <input type="text" class="form-control input-sm  timepicker timepicker-default" name="input_schedulestarttime_detail" id="input_schedulestarttime_detail" disabled="disabled">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--End Date/Time-->
                        <div class="col-md-12">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="form_title" class="control-label col-md-2 input-sm">End Date/Time<span class="required"></span>:</label>
                                    <div class="col-md-2">
                                        <input type="text" class="form-control input-sm date date-picker RemovePeriodvalidation" name="input_scheduleenddate_detail" data-date-format="mm/dd/yyyy" id="input_scheduleenddate_detail" style="margin-left:4px;" disabled="disabled" />
                                    </div>
                                    <!--End Time-->
                                    <div class="col-md-3" style="margin-left:3px;">
                                        <div class="input-icon">
                                            <i class="fa fa-clock-o" style="margin-top:7px;"></i>
                                            <input type="text" class="form-control input-sm  timepicker timepicker-default" name="input_scheduleendtime_detail" id="input_scheduleendtime_detail" disabled="disabled">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--Description-->
                        <div class="col-md-12">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <div class="col-md-12" style="margin-top:5px;">
                                        <textarea id="input_scheduledescription_detail" name="input_scheduledescription" class="form-control input-sm" rows="6" disabled="disabled"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <div class="modal-footer" id="schedule_modalview_footer">
                    <button id="cancel_addschedule_button" type="button" class="btn btn-default" data-dismiss="modal" onclick="resetAddScheduleForm();" disabled="disabled">Cancel</button>
                    <button type="button" class="btn btn-success" data-dismiss="modal" onclick="addNewSchedule();" disabled="disabled">Save</button>
                </div>
            </div>

        </div>
        <!-- /.modal-content -->
    </div>
</form>


@*Franchise Upload Document*@

<div class="modal fade in" id="ModelFranchiseCRMUploadDocumentPopup" tabindex="-1" role="basic" aria-hidden="true" style="display: none; padding-right: 17px;">
    <div class="modal-dialog modal-lg" id="RenderFranchiseCRMUploadDocumentPopup">
    </div>
</div>


<!-- Initial Communication As Lead Generation Modal View -->
<div class="modal fade custom-model custom-form-design" id="initialdetail_modalview" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content modal-custom-content" id="renderinitialdetail_modalview">
        </div>
        <!-- /.modal-content -->
    </div>
</div>


<!-- Potential Inquary Modal View -->
<div class="modal fade custom-model custom-form-design" id="potentialinquary_modalview" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content modal-custom-content" id="renderpotentialinquary_modalview">
        </div>
        <!-- /.modal-content -->
    </div>
</div>

<!-- Franchise Contract Modal View -->
<div class="modal fade custom-model custom-form-design" id="franchisecontract_modalview" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content modal-custom-content" id="renderfranchisecontract_modalview">
        </div>
        <!-- /.modal-content -->
    </div>
</div>

<!-- Franchise Contract Modal View -->
<div class="modal fade custom-model custom-form-design" id="followup_modal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content modal-custom-content" id="renderfollowup_modalview">
        </div>
        <!-- /.modal-content -->
    </div>
</div>

<script>

    /*We Can Assign the default parameter in js function(ss, data1,detailsetfranchise = null)*/
    var lastDivStage = "divLoadStage_contactinfo";

    function BindLeadGen(ss, data1, setFranchiseDetailData, fd) {
        /*Second Method to set default parameter to function*/
        setFranchiseDetailData = setFranchiseDetailData || null;

        var sURL = '@Url.Action("PartialPotentialLoad", "CRMPotentialFranchise", new { area = "CRM" })?ssid=' + ss + '&&fdid=' + fd;;
        $.ajax({
            type: "GET",
            url: sURL,
            contentType: "application/json; charset=utf-8",
            datatype: "json",
            success: function (data) {
                $('#' + lastDivStage).html(data);
                setupForm();
                // UpdateDocument(data1);
                if (setFranchiseDetailData != null) { setFranchiseDetailData(data1); }

            },
            error: function (err) {
                console.log(err);
            }
        });
    }

  /*  function UpdateDocument(docdata) {
        if (docdata != null) {
            if (docdata.document.length > 0) {
                //$(".clseditlnk").show();
                refreshFranchiseCRMDocumentDisplay(docdata.document);
                $.each(docdata.document, function (index, value) {
                    if (value.FileTypeListId == "31") {
                        $(".checkbox_questionaire").prop("checked", true);

                    }
                    if (value.FileTypeListId == "32") {
                        $(".checkbox_acknowledgement").prop("checked", true);
                    }
                });
            }
            else {
                //$(".clseditlnk").hide();
                $("#CRMDocumentDisplay").html('');
            }
        }
    }    */

</script>

<script>

    /* Get Lead Generation from Initial Communication by Franchise Detail Id*/
    function OpenInitialPP(FranchiseDetailbyId) {
        var sURL = '@Url.Action("LeadGenerationPopup", "CRMPotentialFranchise")?franchiseDetailbyId=' + FranchiseDetailbyId;
            $.ajax({
                type: "GET",
                url: sURL,
                contentType: "application/json; charset=utf-8",
                datatype: "json",
                cache:false,
                success: function (data) {
                    $('#renderinitialdetail_modalview').html(data);
                    $("#initialdetail_modalview").modal({ backdrop: 'static' });
                },
                error: function (err) {
                    console.log(err);
                }
            });
    }

    /*Get Potential Inquary by Franchise Detail Id*/
    function OpenPotentialInquaryPP(FranchiseDetailById) {
        var sURL = '@Url.Action("LeadPotentialInquaryPopup", "CRMPotentialFranchise")?franchiseDetailById=' + FranchiseDetailById;
        $.ajax({
            type: "GET",
            url: sURL,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            cache: false,
            success: function (data) {
                $("#renderpotentialinquary_modalview").html(data.leadgen);
                $("#potentialinquary_modalview").modal({ backdrop: 'static' });
            },
            error: function (err) {
                console.log(err);
                console.log(err);
            }
        });

    }

    /*Get Franchise Contract by Franchise Detail Id */
    function OpenFrachiseContractPP(FranchiseDetailById) {
        var sURL = '@Url.Action("PotentialContractPopup","CRMPotentialFranchise")?franchiseDetailById=' + FranchiseDetailById;

        $.ajax({
            url: sURL,
            type: "GET",
            dataType: "json",
            cache: false,
            success: function (data) {
                console.log(data);
                $("#renderfranchisecontract_modalview").html(data.franchisecontract);
                $("#franchisecontract_modalview").modal({ backdrop: 'static' });
            },
            error: function (error) {
                alert("Content load failed");
            }
        });
    }


    /*Get FollowUp by Franchise Detail Id */
    function OpenFrachiseFollowUpPP(FranchiseDetailById) {
        var sURL = '@Url.Action("FollowUpPopUp", "CRMPotentialFranchise")?franchiseDetailById=' + FranchiseDetailById;
        $.ajax({
            url: sURL,
            type: "GET",
            dataType: "json",
            cache: false,
            success: function (data) {
                console.log(data.followup);
                $("#renderfollowup_modalview").html(data.followup);
                $("#followup_modal").modal({ backdrop: "static" });
            },
            error: function (error) {
                alert("Content load failed");
            }
        });
    }


    /*Get Sign Agreement by Franchise Detail Id */
    function OpenSignAgreementPP(FranchiseDetailById) {
        var sURL = '@Url.Action("FollowUpPopUp","CRMPotentialFranchise")?franchiseDetailId=' + FranchiseDetailById;
        $.ajax({
            url: sURL,
            type: "GET",
            dataType: "json",
            cache: false,
            success: function (data) {
                console.log(data);
            },
            error: function (error) {
                alert("Content load failed");
            }

        });

    }
</script>





