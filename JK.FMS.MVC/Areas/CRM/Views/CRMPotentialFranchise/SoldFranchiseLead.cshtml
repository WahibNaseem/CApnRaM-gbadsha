@model IEnumerable<JKViewModels.CRM.CRMSignAgreementViewModel>
@using JK.FMS.MVC.Areas.CRM.Common
@using JK.Resources



@{

    Layout = "~/Views/Shared/_Layout.cshtml";
}


@section styles{

    <link href='@Url.Content("~/Content/admin/assets/global/plugins/datatables/datatables.min.css")' rel="stylesheet" type="text/css" />
    <link href='@Url.Content("~/Content/admin/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css")' rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/admin/assets/global/plugins/bootstrap-multiselect/css/bootstrap-multiselect.css")" rel="stylesheet" type="text/css" />
    <link href="~/Content/admin/assets/global/css/components.min.css" rel="stylesheet" />



    <style>
        .form-actions {
            padding-top: 10px;
            margin-top: 20px;
            border-top: 1px solid #e7ecf1;
        }

        .form-section {
            margin-top: 10px;
            padding: 5px;
            border-bottom: 1px solid #e7ecf1;
        }

        .forminput {
            text-align: left;
            margin-left: -20px;
            border: none;
            background: transparent;
        }

        .portlet-bottom {
            margin-bottom: 10px;
        }

        .portlet-align {
            padding-left: 6px;
            padding-right: 6px;
        }

        .modal-custom-content {
            padding: 0px;
            border-radius: 20px;
        }

        .modal-custom-header {
            background: #3598DC;
            padding: 8px;
            border-top-left-radius: 18px;
            border-top-right-radius: 18px;
        }

        .modal-close-button {
            margin-top: 10px;
            margin-right: 10px;
        }

        .topheader {
            font-size: 14px;
            font-weight: bold;
            color: #FFF !important;
            text-transform: uppercase;
            margin-top: 3px;
        }

        .alignCenter {
            text-align: center;
        }

        .capitaltext {
            text-transform: uppercase;
        }

        .tabpointer {
            cursor: pointer;
        }
    </style>

    <style>
        .close {
            background-image: url(/Content/admin/assets/global/img/stick_close.png) !important;
            height: 12px !important;
            width: 12px !important;
            margin-top: 0px !important;
        }

        .btn.multiselect {
            text-align: left;
        }

        .multiselect .caret {
            right: 0;
            position: absolute;
            margin-top: 8px;
            margin-right: 8px;
        }

        .row {
            margin: 0;
            padding: 3px 0;
        }

        .page-size {
            padding-left: 0;
            padding-right: 0;
            width: 62px;
        }

        .topheader {
            font-size: 14px;
            font-weight: bold;
            color: #FFF !important;
            text-transform: uppercase;
            margin-top: 3px;
        }

        .alignRight {
            text-align: right;
        }

        .alignCenter {
            text-align: center;
        }

        #PotentialLeadList th {
            vertical-align: middle;
        }

        .no-padding {
            padding: 0;
        }

        .no-margin {
            margin: 0;
        }

        .padding-tb1 {
            padding-top: 1px;
            padding-bottom: 1px;
        }

        .margin-tb1 {
            margin-top: 1px;
            margin-bottom: 1px;
        }

        .custom-listbox .headerbox {
            padding: 3px 0px 3px 5px;
        }

        .custom-listbox {
            margin-top: 4px;
            margin-bottom: 0px;
        }

        .btn.multiselect {
            text-align: left;
            padding-top: 4px;
            padding-bottom: 4px;
            font-size: 11px;
            color: #555;
        }

        .multiselect .caret {
            right: 0;
            position: absolute;
            margin-top: 8px;
            margin-right: 8px;
        }

        .multiselect-container.dropdown-menu {
            text-transform: none;
            font-size: 14px;
        }

        .contract {
            text-align: right;
        }

        .tablebox .table-responsive {
            min-height: 80px;
        }

        .input-mysize {
            min-width: 150px
        }

        .input-mysize2 {
            min-width: 90px
        }

        .input-mysize3 { /*min-width: 250px*/
        }
    </style>

    <style>
        @@media (min-width: 768px) {
            .seven-cols .col-md-1,
            .seven-cols .col-sm-1,
            .seven-cols .col-lg-1 {
                width: 100%;
                *width: 100%;
            }
        }

        @@media (min-width: 992px) {
            .seven-cols .col-md-1,
            .seven-cols .col-sm-1,
            .seven-cols .col-lg-1 {
                width: 14.285714285714285714285714285714%;
                *width: 14.285714285714285714285714285714%;
            }
        }

        @@media (min-width: 1200px) {
            .seven-cols .col-md-1,
            .seven-cols .col-sm-1,
            .seven-cols .col-lg-1 {
                width: 14.285714285714285714285714285714%;
                *width: 14.285714285714285714285714285714%;
            }
        }
    </style>
}

@section pageplugins{

    <script src="@Url.Content("~/Content/admin/assets/global/plugins/jquery-ui/jquery-ui.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/jquery-validation/js/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/jquery-inputmask/jquery.inputmask.bundle.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/scripts/datatable.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/datatables/datatables.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/pages/scripts/table-datatables-managed.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/moment.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/bootstrap-typeahead/bootstrap3-typeahead.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/admin/assets/global/plugins/bootstrap-multiselect/js/bootstrap-multiselect.js")" type="text/javascript"></script>


    @if (Request.IsSecureConnection)
    {
        <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js" type="text/javascript"></script>
    }
    else
    {
        <script src="http://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js" type="text/javascript"></script>
    }
}

@section scripts{

    <script src="@Url.Content("~/Areas/CRM/Scripts/crm_potentialfranchise.js")"></script>

    <script type="text/javascript">
         function getCurrentUrl() {
            return '@Url.Action("GetSoldFranchise", "CRMPotentialFranchise", new { area = "CRM" })';
        }

        var getFranchiseDetail = function (id) {

            if (!(isNaN(id))) {


                $("#divBelow").css("display", "block");
                /*Show Lead Id */
                $("#franchiselead_title").css("display", "block");
                /*Bind Lead Id*/
                $("#franchiselead_title_id").html(id);
                $("#portlettoplist").click();
                $(".checkbox_questionaire").prop("checked", false);
                $(".checkbox_acknowledgement").prop("checked", false);

                /**
               * Make a request   '
               */
                var URL = "/CRM/CRMPotentialFranchise/GetPotentialDetail?accountId=" + id;

                $.ajax({
                    url: URL,
                    type: "GET",
                    dataType: "json",
                    cache: false,
                    success: function (data) {
                        BindLeadGen(data.franchisedetailvm.StageStatus, data, setFranchiseDetailData, data.franchisedetailvm.CRM_AccountFranchiseDetailId);
                    },
                    error: function (error) {
                        JK.CRM.CRMApp.hideActivity("#addlead_modalview_footer");
                        console.log(error.message);
                    }
                });
            }
        }

        $(document).ready(function () {



            $(document).on('init.dt', function (e, settings) {
                var api = new $.fn.dataTable.Api(settings);
                if ($(api.table().node()).attr('id') == 'FranchiseSold_List') {
                    setPaging();
                }
            });


            function initTable() {

                var ps = $('#pageSize').val();
                var dtable = $('#FranchiseSold_List').dataTable({
                    "bAutoWidth": false,
                    cache: true,
                    "iDisplayLength": ps == '-1' ? 10 : ps,
                    "bDestroy": true,
                    "aLengthMenu": [[5, 7, 10, 25, 50, -1], [5, 7, 10, 25, 50, "All"]],
                    //"dom": "<'headerbox list'<'row'<'col-md-1'l><'col-md-4'f><'#divrightckbox.col-md-5 pull-right text-center'>>><'table-responsive't><'bottom'ip><'clear'>",
                    "dom": "<'table-responsive't><'bottom'ip><'clear'>",
                    "aaSorting": [[0, "asc"]],
                    "sAjaxSource": getCurrentUrl(),
                    "sAjaxDataProp": "aadata",  // Internationalisation. For more info refer to http://datatables.net/manual/i18n
                    "rowCallback": function (nRow, data) {
                    },
                    "aoColumns": [
                        {
                            "sName": "AccountId",
                            "bSortable": true,
                            "mRender": function (data, type, full) {
                                return '<span>' + full.CRM_AccountId + '</span>';
                            }
                        },
                        {
                            "sName": "FranchiseeName",
                            "bSortable": true,
                            "sClass": "tabpointer",
                            "mRender": function (data, type, full) {
                                return "<a href='javascript: void(0);' onclick='getFranchiseDetail(" + full.CRM_AccountId + ")'  style='color:#0c9cff' id=" + full.CRM_AccountId + ">" + full.FranchiseeName + "</a>";
                            }
                        },
                        {
                            "sName": "ContactName",
                            "bSortable": true,
                            "mRender": function (data, type, full) {
                                return "<span>" + full.ContactName + "</span>";
                            }
                        },
                        {
                            "sName": "PhoneNumber",
                            "bSortable": true,
                            "sClass": "alignCenter",
                            "mRender": function (data, type, full) {
                                if (full.PhoneNumber != null) {
                                    if (full.PhoneNumber.length == 10)
                                        var value = '(' + full.PhoneNumber.substr(0, 3) + ')' + ' ' + full.PhoneNumber.substr(3, 3) + '-' + full.PhoneNumber.substr(6, 4);
                                    return '<span>' + value + '</span>';
                                } else { return ''; }
                            }
                        },
                        {
                            "sName": "EmailAddress",
                            "bSortable": true,
                            "sClass": "capitaltext",
                            "mRender": function (data, type, full) {
                                return full.EmailAddress;
                            }
                        },
                        {
                            "sName": "ProviderName",
                            "bSortable": true,
                            "sClass": "alignCenter capitaltext",
                            "mRender": function (data, type, full) {
                                return full.ProviderName;
                            }
                        },
                        {
                            "sName": "StageStatusName",
                            "bSortable": true,
                            "sClass": "alignCenter capitaltext",
                            "mRender": function (data, type, full) {
                                    return '<span class="label label-sm label-warning" style="background-color:#567ca5;">' + full.StageStatusName + '</span>'
                            }
                        }
                    ]
                });
            }
            /*Search keyp up event*/
            $("#input_Search").keyup(function () {
                var table = $("#FranchiseSold_List").DataTable();
                table.search($(this).val()).draw();
            });

            /*page size change event*/
            $("#pageSize").change(function () {
                setPaging();
            })

            /*Call table initialize function*/
            initTable();

        });

        function setPaging() {
            var z = $("#pageSize").val();
            var table = $("#FranchiseSold_List").DataTable();
            if (z > 0) {
                table.page.len(z).draw();
            }
            else if (z == -1) {
                table.page.len(table.rows().count()).draw();
            }
            else {
                table.page.page.len(10).draw();
            }
        }

        $("#input_starttime").timepicker({
            useCurrent: true
        });

        $(".potentialdetailtab").click(function (e) {

            var tabClickId = $(this).attr('id');

            if (tabClickId == "tab_contactinfo") {
                $('#divLoadStage_contactinfo').html('');
                $('#' + lastDivStage).contents().appendTo('#divLoadStage_contactinfo');
                $('#' + lastDivStage).html('');
                lastDivStage = "divLoadStage_contactinfo";
            }
            else if (tabClickId == "tab_potentialdetail") {
                $("#divLoadStage_potentialdetail").html('');
                $('#' + lastDivStage).contents().appendTo("#divLoadStage_potentialdetail");
                $('#' + lastDivStage).html('');
                lastDivStage = "divLoadStage_potentialdetail";
            }
            else if (tabClickId == "tab_activity") {
                $("#divLoadStage_activity").html('');
                $('#' + lastDivStage).contents().appendTo("#divLoadStage_activity");
                $('#' + lastDivStage).html('');
                lastDivStage = "divLoadStage_activity";
            }
            else if (tabClickId == "tab_todo") {
                $("#divLoadStage_todo").html('');
                $('#' + lastDivStage).contents().appendTo("#divLoadStage_todo");
                $('#' + lastDivStage).html('');
                lastDivStage = "divLoadStage_todo";
            }
            else if (tabClickId == "tab_note") {
                $("#divLoadStage_personalnote").html('');
                $('#' + lastDivStage).contents().appendTo("#divLoadStage_personalnote");
                $('#' + lastDivStage).html('');
                lastDivStage = "divLoadStage_personalnote";
            }
            else if (tabClickId == "tab_document") {
                $("#divLoadStage_document").html('');
                $('#' + lastDivStage).contents().appendTo("#divLoadStage_document");
                $('#' + lastDivStage).html('');
                lastDivStage = "divLoadStage_document";
            }
            else if (tabClickId == "tab_schedule") {
                $("#divLoadStage_schedule").html('');
                $('#' + lastDivStage).contents().appendTo("#divLoadStage_schedule");
                $('#' + lastDivStage).html('');
                lastDivStage = "divLoadStage_schedule";
            }

            setupForm();

        })

    </script>


}

<div class="portlet box" style="margin-bottom:5px; margin-top:-7px;">
    <div class="portlet-title text-center" style="background: #3da8c6;">
        <div class="caption">
            <b>POTENTIAL LIST</b>
        </div>
        <div id="franchisesold_lead_title" class="caption col-md-8" style="display:none;">
            Lead # <span id="franchisesold_lead_title_id"></span>
        </div>
        <div class="tools">
            <a id="portlettoplist" href="javascript:;" class="collapse" data-original-title="" title=""> </a>
        </div>
    </div>
    <div class="portlet-body" style="display: block;padding-left: 0px;padding-right: 0px;">

        @*Potential Header*@
        <div class="custom-listbox" style="margin-top: -10px;">
            <div class="headerbox">
                <div class="row no-padding">
                    <div class="col-md-1 page-size">
                        <select class="form-control input-sm" id="pageSize" style="padding-left:6px;">
                            <option value="-1">All</option>
                            <option value="10" selected>10</option>
                            <option value="25">25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>

                        </select>
                    </div>
                    <div class="col-md-3">
                        <div class="input-icon">
                            <i class="icon-magnifier icon-align-right" style="margin-top: 8px;"></i>
                            <input id="input_Search" type="text" required name="customernumber" autocomplete="off" placeholder="Search..." value="" class="form-control input-sm typeahead" />
                        </div>
                    </div>
                    <div class="col-md-4"></div>
                    <div class="col-md-4 pull-right" style="padding-right:5px;">
                    </div>
                </div>
            </div>
        </div>

        @*Potential Table*@
        <div class="tablebox">
            <div class="table-responsive" id="divcustomerList">
                <table class="table table-striped table-bordered table-hover order-column" id="FranchiseSold_List" style="margin-top:0 !important;">
                    <thead>
                        <tr>
                            <th style="width:25px;text-align:center;">
                                ID #
                            </th>
                            <th style="width:160px;text-align:center;">
                                Franchisee Name
                            </th>
                            <th style="width:160px;text-align:center;">
                                Contact Name
                            </th>
                            <th style="text-align:center;width:75px;">
                                PHONE NUMBER
                            </th>
                            <th style="text-align:center;width:65px;">
                                EMAIL
                            </th>
                            <th style="text-align:center;width:40px;">
                                PROVIDER
                            </th>
                            <th style="text-align:center;width:30px;">
                                STATUS
                            </th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
</div>


<div class="portlet light bordered" id="divBelow" style="display:none;">

    @*@Html.Hidden("hdfselectedaccountdetailid", "", new { @id = "hdfselectedaccountdetailid" })*@
    @*@Html.Hidden("hdfSelectedAccountId", "", new {@id = "hdfSelectedAccountId"})*@
    @*@Html.Hidden("hdfAssigneeId", "", new { @id = "hdfAssigneeId" })*@

    <div class="portlet-title compact">
        <div class="btn-group pull-right">
            <button class="btn green  btn-outline dropdown-toggle " data-toggle="dropdown">
                Action
                <i class="fa fa-angle-down"></i>
            </button>
            <ul class="dropdown-menu pull-right">
                <li>
                    <a href="#addActivity_modalview" data-toggle="modal">
                        <i class="fa fa-plus"></i>
                        Create To-Do
                    </a>
                </li>
                <li>
                    <a href="#addNote_modalview" data-toggle="modal">
                        <i class="fa fa-pencil-square-o"></i>
                        Create Personal Note
                    </a>
                </li>
                <li>
                    <a href="#report_modalview" data-toggle="modal">
                        <i class="fa fa-pencil-square-o"></i>
                        Create a Report
                    </a>
                </li>
                <li>
                    <a href="#uploaddocument_modalview" data-toggle="modal">
                        <i class="fa fa-upload"></i>
                        Add a Document
                    </a>
                </li>
                <li>
                    <a href="javascript:;" onclick="SendEmail();">
                        <i class="fa fa-envelope"></i> Write an Email
                    </a>
                </li>
            </ul>
        </div>
        <div class="tabbable-line">
            <ul class="nav nav-tabs ">
                <li class="active">
                    <a id="tab_contactinfo" href="#tabcontent_contactinfo" class="potentialdetailtab" data-toggle="tab">Contact info</a>
                </li>
                <li>
                    <a id="tab_potentialdetail" href="#tabcontent_potentialdetail" class="potentialdetailtab" data-toggle="tab"> Potential Detail </a>
                </li>
                <li>
                    <a id="tab_activity" href="#tabcontent_activity" class="potentialdetailtab" data-toggle="tab">Activity </a>
                </li>
                <li>
                    <a id="tab_todo" href="#tabcontent_todo" class="potentialdetailtab" data-toggle="tab">Tasks</a>
                </li>
                <li>
                    <a id="tab_note" href="#tabcontent_personalnote" class="potentialdetailtab" data-toggle="tab">Personal Note</a>
                </li>
                <li>
                    <a id="tab_document" href="#tabcontent_document" class="potentialdetailtab" data-toggle="tab">Document </a>
                </li>
                <li>
                    <a id="tab_schedule" href="#tabcontent_schedule" class="potentialdetailtab" data-toggle="tab"> Schedule </a>
                </li>
            </ul>
        </div>
    </div>

    <div class="portlet-body">
        <div class="tab-content">
            <div class="tab-pane active" id="tabcontent_contactinfo">
                @Html.Partial("_CRMFranchiseStages")
                <div class="row">
                    <div class="col-md-5">
                        <div class="row">
                            <!-- CONTACT SECTION -->
                            <form action="#" id="form_referenceinfo">

                                <div class="col-md-12 portlet-align">
                                    <div class="portlet box portlet-bottom" style="background-color: #a3a9ad;">
                                        <div class="portlet-title compact">
                                            <div class="caption">
                                                Employee Info
                                            </div>
                                        </div>
                                        <div class="portlet-body">
                                            <div class="portlet-body form">
                                                <!-- BEGIN FORM-->
                                                <div class="form-body" style="margin-top:-20px; margin-bottom:-20px;">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">Franchisee Name:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("franchisename", "", new { @class = "forminput", @id = "input_franchisename", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">Full/Part Time:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    <select class="forminput input-sm" id="select_jobtype" disabled="disabled">
                                                                        <option value="1">Full Time</option>
                                                                        <option value="2">Part Time</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- END FORM-->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-12 portlet-align">
                                    <div class="portlet box portlet-bottom" style="background-color: #a3a9ad;">
                                        <div class="portlet-title compact">
                                            <div class="caption">
                                                Contact Info
                                            </div>
                                        </div>
                                        <div class="portlet-body">
                                            <div class="portlet-body form">
                                                <!-- BEGIN FORM-->
                                                <div class="form-body" style="margin-top:-20px; margin-bottom:-20px;">
                                                    @Html.Hidden("AccountId", "", new { @id = "accountid" })
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">Contact Name:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("firstname", "", new { @class = "forminput", @id = "input_contactname", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">Position:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("position", "", new { @class = "forminput", @id = "input_position", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.phone:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("phonenumber", "", new { @class = "forminput", @id = "input_contactphonenumber", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.email:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("contactEmail", "", new { @class = "forminput", @id = "input_contactemail", type = "email", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- END FORM-->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-12 portlet-align">
                                    <div class="portlet box portlet-align" style="background-color: #a3a9ad;">
                                        <div class="portlet-title compact">
                                            <div class="caption">
                                                @JKCRMResource.address
                                            </div>
                                        </div>
                                        <div class="portlet-body">
                                            <div class="portlet-body form">
                                                <!-- BEGIN FORM-->
                                                <div class="form-body" style="margin-top:-20px; margin-bottom:-20px;">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.address1:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("addessline1", "", new { @class = "forminput", @id = "input_addressline1", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.address2:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("addessline2", "", new { @class = "forminput", @id = "input_addressline2", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.city:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("city", "", new { @class = "forminput", @id = "input_city", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.county:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("county", "", new { @class = "forminput", @id = "input_county", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.state:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @*@Html.DropDownList("state", (SelectList) ViewBag.State, "Select", new { @class = "forminput", @id = "select_state", @disabled = "disabled" })*@
                                                                </div>
                                                            </div>
                                                        </div>
                                                        @*<div class="col-md-12">
                                                                <div class="form-group">
                                                                    <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">Home:</label>
                                                                    <div class="col-md-7 col--sm-6">
                                                                        @Html.TextBox("homenumber", "", new { @class = "forminput", @id = "input_homenumber", @disabled = "disabled" })
                                                                    </div>
                                                                </div>
                                                            </div>*@
                                                        @*<div class="col-md-12">
                                                                <div class="form-group">
                                                                    <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.fax:</label>
                                                                    <div class="col-md-7 col--sm-6">
                                                                        @Html.TextBox("faxnumber", "", new { @class = "forminput", @id = "input_faxnumber", @disabled = "disabled" })
                                                                    </div>
                                                                </div>
                                                            </div>*@
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="col-md-5 col-sm-6 control-label" style="text-align:left;">@JKCRMResource.zipCode:</label>
                                                                <div class="col-md-7 col--sm-6">
                                                                    @Html.TextBox("zipcode", "", new { @class = "forminput", @id = "input_zipcode", @disabled = "disabled" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- END FORM-->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </form>
                            <div class="form-actions">
                                <div class="col-md-4">
                                    <button id="editcontactinfo_button" type="button" class="btn green btn-block" onclick="EditData();">Edit</button>
                                </div>
                                <div class="col-md-4">
                                    <button id="cancelcontactinfo_button" type="button" class="btn green btn-block" onclick="CancelBtn();">Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="divLoadStage_contactinfo">

                    </div>

                </div>
            </div>
            <div class="tab-pane" id="tabcontent_potentialdetail">
                @Html.Partial("_CRMFranchiseStages")
                <div class="row">

                    <div class="col-md-5">
                        <div class="row">
                            <div class="col-md-12 portlet-align" id="right-content">
                                <div class="portlet box div-right portlet-bottom" style="background-color: #a3a9ad;">
                                    <div class="portlet-title compact">
                                        <div class="caption">
                                            Detail
                                        </div>
                                    </div>
                                    <div class="portlet-body">
                                        <form action="#" id="form_summary" class="form-horizontal">
                                            <div class="form-body">
                                                @Html.Hidden("AccountfranchiseDetailId", "", new { @id = "accountfranchisedetailid" })
                                                <!-- Lead Status -->
                                                <div class="form-group">
                                                    <label for="select_stagestatus" class="control-label col-md-4">@JKCRMResource.leadstatus:</label>
                                                    <div class="col-md-6">
                                                        @Html.DropDownList("stagestatus", (SelectList)ViewBag.LeadStageStatusList, new { @class = "form-control input-sm", @id = "select_stagestatus", @disabled = "disabled" })
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="select_providertype" class="control-label col-md-4">@JKCRMResource.leadsource:</label>
                                                    <div class="col-md-6">
                                                        @Html.DropDownList("providertype", (SelectList)ViewBag.ProviderTypeList, new { @class = "form-control input-sm", @id = "select_providertype", @disabled = "disabled" })
                                                    </div>
                                                </div>
                                                <!-- Current Provider -->
                                                <div class="form-group">
                                                    <label for="select_providersource" class="control-label col-md-4">@JKCRMResource.currentprovider:</label>
                                                    <div class="col-md-6">
                                                        @Html.DropDownList("providersource", (SelectList)ViewBag.ProviderSourceList, new { @class = "form-control input-sm", @id = "select_providersource", @disabled = "disabled" })
                                                    </div>
                                                </div>
                                                <!-- Budget Amount -->
                                                <div class="form-group">
                                                    <label for="input_budgetamount" class="control-label col-md-4">@JKCRMResource.budget:</label>
                                                    <div class="col-md-6">
                                                        @Html.TextBox("_budgetamount", "$50,000", new { @class = "form-control input-sm", @id = "input_budgetamount", @disabled = "disabled" })
                                                    </div>
                                                </div>
                                                <div class="form-actions">
                                                    <div class="row" id="contactinfo_action">
                                                        <div class="col-md-4 pull-right">
                                                            <button id="btn_editpotential" type="button" class="btn green btn-block" onclick="btnPotential_Edit();">Edit</button>
                                                        </div>
                                                        <div class="col-md-4 col-md-offset-4">
                                                            <button id="btn_cancelpotential" type="button" class="btn green btn-block" onclick="btnPotential_Cancel();">Cancel</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="divLoadStage_potentialdetail">

                    </div>


                </div>
            </div>

            <div class="tab-pane" id="tabcontent_activity">
                @Html.Partial("_CRMFranchiseStages")
                <div class="row">

                    <div class="col-md-5">
                        <div class="row">
                            <div class="col-md-12 portlet-align">
                                <div class="portlet box div-right portlet-bottom" style="background-color: #a3a9ad;">
                                    <div class="portlet-title compact">
                                        <div class="caption">
                                            Activities
                                        </div>
                                    </div>
                                    <div class="portlet-body">
                                        <form action="#" id="form_activities" class="form-horizontal">
                                            <div class="form-body">
                                                <div class="scroller" style="height: 518px;" data-always-visible="1" data-rail-visible1="0" data-handle-color="#333">
                                                    <div class="general-item-list">
                                                        <div class="mt-comments">
                                                            <div class="mt-comment" id="franchise_content_activity">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="divLoadStage_activity">

                    </div>
                </div>
            </div>

            <div class="tab-pane" id="tabcontent_todo">
                @Html.Partial("_CRMFranchiseStages")
                <div class="row">
                    <div class="col-md-5">
                        <div class="row">
                            <div class="col-md-12 portlet-align">
                                <div class="portlet box div-right portlet-bottom" style="background-color: #a3a9ad;">
                                    <div class="portlet-title compact">
                                        <div class="caption">
                                            TO - DO
                                        </div>
                                    </div>
                                    <div class="portlet-body">
                                        <form action="#" id="form_todo" class="form-horizontal">
                                            <div class="form-body">
                                                <div class="scroller" style="height: 500px;" data-always-visible="1" data-rail-visible1="0" data-handle-color="#333">
                                                    <div class="general-item-list">
                                                        <div class="mt-comments">
                                                            <div class="mt-comment" id="franchise_content_todo">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="divLoadStage_todo">

                    </div>
                </div>
            </div>

            <div class="tab-pane" id="tabcontent_personalnote">
                @Html.Partial("_CRMFranchiseStages")
                <div class="row">
                    <div class="col-md-5">
                        <div class="row">
                            <div class="col-md-12 portlet-align">
                                <div class="portlet box div-right portlet-bottom" style="background-color: #a3a9ad;">
                                    <div class="portlet-title compact">
                                        <div class="caption">
                                            Notes
                                        </div>
                                    </div>
                                    <div class="portlet-body">
                                        <form action="#" id="form_notes" class="form-horizontal">
                                            <div class="form-body">
                                                <div class="scroller" style="height: 500px;" data-always-visible="1" data-rail-visible1="0" data-handle-color="#333">
                                                    <div class="general-item-list">
                                                        <div class="mt-comments">
                                                            <div class="mt-comments" id="franchise_content_note">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div id="divLoadStage_personalnote">

                    </div>
                </div>
            </div>

            <div class="tab-pane" id="tabcontent_document">
                @Html.Partial("_CRMFranchiseStages")
                <div class="row">
                    <div class="col-md-5">
                        <div class="row">
                            <div class="col-md-12 portlet-align">
                                <div class="portlet box div-right portlet-bottom" style="background-color: #a3a9ad;">
                                    <div class="portlet-title compact">
                                        <div class="caption">
                                            Documents
                                        </div>
                                    </div>
                                    <div class="portlet-body">
                                        <form action="#" id="form_document" class="form-horizontal">
                                            <div class="form-body">
                                                <div class="scroller" style="height: 500px;" data-always-visible="1" data-rail-visible1="0" data-handle-color="#333">
                                                    <div class="general-item-list">
                                                        <div class="mt-comments">
                                                            <div class="mt-comments" id="franchise_content_document">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="divLoadStage_document">

                    </div>

                </div>
            </div>

            <div class="tab-pane" id="tabcontent_schedule">
                @Html.Partial("_CRMFranchiseStages")
                <div class="row">
                    <div class="col-md-5">
                        <div class="row">
                            <div class="col-md-12 portlet-align">
                                <div class="portlet box div-right portlet-bottom" style="background-color: #a3a9ad;">
                                    <div class="portlet-title compact">
                                        <div class="caption">
                                            Schedules
                                        </div>
                                    </div>
                                    <div class="portlet-body">
                                        <form action="#" id="form_schedules" class="form-horizontal">
                                            <div class="form-body">
                                                <div class="scroller" style="height: 500px;" data-always-visible="1" data-rail-visible1="0" data-handle-color="#333">
                                                    <div class="general-item-list">
                                                        <div class="mt-comments">
                                                            <div class="mt-comments" id="franchise_content_schedule">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-actions">
                                                <div class="row">
                                                    <div class="col-md-4 pull-right">
                                                        <a class="btn green btn-block" data-toggle="modal" id="calendar_model">View Calender</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div id="divLoadStage_schedule">

                    </div>

                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade in" id="ModelFranchiseCRMUploadDocumentPopup" tabindex="-1" role="basic" aria-hidden="true" style="display: none; padding-right: 17px;">
    <div class="modal-dialog modal-lg" id="RenderFranchiseCRMUploadDocumentPopup">
    </div>
</div>


<!-- Initial Communication As Lead Generation Modal View -->
<div class="modal fade custom-model custom-form-design" id="initialdetail_modalview" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content modal-custom-content" id="renderinitialdetail_modalview">
        </div>
        <!-- /.modal-content -->
    </div>
</div>


<!-- Potential Inquary Modal View -->
<div class="modal fade custom-model custom-form-design" id="potentialinquary_modalview" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content modal-custom-content" id="renderpotentialinquary_modalview">
        </div>
        <!-- /.modal-content -->
    </div>
</div>

<!-- Franchise Contract Modal View -->
<div class="modal fade custom-model custom-form-design" id="franchisecontract_modalview" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content modal-custom-content" id="renderfranchisecontract_modalview">
        </div>
        <!-- /.modal-content -->
    </div>
</div>

<!-- Franchise Contract Modal View -->
<div class="modal fade custom-model custom-form-design" id="followup_modal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content modal-custom-content" id="renderfollowup_modalview">
        </div>
        <!-- /.modal-content -->
    </div>
</div>





<script>

    /*We Can Assign the default parameter in js function(ss, data1,detailsetfranchise = null)*/
    var lastDivStage = "divLoadStage_contactinfo";

    function BindLeadGen(ss, data1, setFranchiseDetailData, fd) {
        /*Second Method to set default parameter to function*/
        setFranchiseDetailData = setFranchiseDetailData || null;

        var sURL = '@Url.Action("PartialPotentialLoad", "CRMPotentialFranchise", new { area = "CRM" })?ssid=' + ss + '&&fdid=' + fd;
        $.ajax({
            type: "GET",
            url: sURL,
            contentType: "application/json; charset=utf-8",
            datatype: "json",
            success: function (data) {
                $('#' + lastDivStage).html(data.signagreementvm);
                setupForm();
                // UpdateDocument(data1);
                if (setFranchiseDetailData != null) { setFranchiseDetailData(data1); }

            },
            error: function (err) {
                console.log(err);
            }
        });
    }
</script>



<script>

    /* Get Lead Generation from Initial Communication by Franchise Detail Id*/
    function OpenInitialPP(FranchiseDetailbyId) {
        var sURL = '@Url.Action("LeadGenerationPopup", "CRMPotentialFranchise")?franchiseDetailbyId=' + FranchiseDetailbyId;
            $.ajax({
                type: "GET",
                url: sURL,
                contentType: "application/json; charset=utf-8",
                datatype: "json",
                cache:false,
                success: function (data) {
                    $('#renderinitialdetail_modalview').html(data);
                    $("#initialdetail_modalview").modal({ backdrop: 'static' });
                },
                error: function (err) {
                    console.log(err);
                }
            });
    }

    /*Get Potential Inquary by Franchise Detail Id*/
    function OpenPotentialInquaryPP(FranchiseDetailById) {
        var sURL = '@Url.Action("LeadPotentialInquaryPopup", "CRMPotentialFranchise")?franchiseDetailById=' + FranchiseDetailById;
        $.ajax({
            type: "GET",
            url: sURL,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            cache: false,
            success: function (data) {
                $("#renderpotentialinquary_modalview").html(data.leadgen);
                $("#potentialinquary_modalview").modal({ backdrop: 'static' });
            },
            error: function (err) {
                console.log(err);
                console.log(err);
            }
        });

    }

    /*Get Franchise Contract by Franchise Detail Id */
    function OpenFrachiseContractPP(FranchiseDetailById) {
        var sURL = '@Url.Action("PotentialContractPopup","CRMPotentialFranchise")?franchiseDetailById=' + FranchiseDetailById;

        $.ajax({
            url: sURL,
            type: "GET",
            dataType: "json",
            cache: false,
            success: function (data) {
                console.log(data);
                $("#renderfranchisecontract_modalview").html(data.franchisecontract);
                $("#franchisecontract_modalview").modal({ backdrop: 'static' });
            },
            error: function (error) {
                console.log(err);
            }
        });
    }


    /*Get FollowUp by Franchise Detail Id */
    function OpenFrachiseFollowUpPP(FranchiseDetailById) {
        var sURL = '@Url.Action("FollowUpPopUp", "CRMPotentialFranchise")?franchiseDetailById=' + FranchiseDetailById;
        $.ajax({
            url: sURL,
            type: "GET",
            dataType: "json",
            cache: false,
            success: function (data) {
                console.log(data.followup);
                $("#renderfollowup_modalview").html(data.followup);
                $("#followup_modal").modal({ backdrop: "static" });
            },
            error: function (err) {
                console.log(err);
            }
        });
    }


    /*Get Sign Agreement by Franchise Detail Id */
    function OpenSignAgreementPP(FranchiseDetailById) {
        var sURL = '@Url.Action("FollowUpPopUp","CRMPotentialFranchise")?franchiseDetailId=' + FranchiseDetailById;
        $.ajax({
            url: sURL,
            type: "GET",
            dataType: "json",
            cache: false,
            success: function (data) {
                console.log(data);
            },
            error: function (err) {
                console.log(err);
            }

        });

    }
</script>






